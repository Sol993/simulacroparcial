"use strict";(self.webpackChunksimulacroparcial=self.webpackChunksimulacroparcial||[]).push([[179],{440:(Rt,ke,L)=>{L.d(ke,{nm:()=>ni});var p=L(5813);L(4650),L(5867);var ce=L(5861),Je=L(9681),Qe=L(4859),Be=L(2090),Ge=L(1877);const X=new Map,Me={activated:!1,tokenObservers:[]},ee={initialized:!1,enabled:!1};function Ie(Ce){return X.get(Ce)||Me}function he(Ce,xe){X.set(Ce,xe)}function Ne(){return ee}class at{constructor(xe,Fe,ut,St,Zt){if(this.operation=xe,this.retryPolicy=Fe,this.getWaitDuration=ut,this.lowerBound=St,this.upperBound=Zt,this.pending=null,this.nextErrorWaitInterval=St,St>Zt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(xe){var Fe=this;return(0,ce.Z)(function*(){Fe.stop();try{Fe.pending=new Be.BH,yield function Vt(Ce){return new Promise(xe=>{setTimeout(xe,Ce)})}(Fe.getNextRun(xe)),Fe.pending.resolve(),yield Fe.pending.promise,Fe.pending=new Be.BH,yield Fe.operation(),Fe.pending.resolve(),yield Fe.pending.promise,Fe.process(!0).catch(()=>{})}catch(ut){Fe.retryPolicy(ut)?Fe.process(!1).catch(()=>{}):Fe.stop()}})()}getNextRun(xe){if(xe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Fe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Fe}}}const Nt=new Be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tn(Ce){if(!Ie(Ce).activated)throw Nt.create("use-before-activation",{appName:Ce.name})}function rr(Ce,xe){return tr.apply(this,arguments)}function tr(){return(tr=(0,ce.Z)(function*({url:Ce,body:xe},Fe){var ut,St;const Zt={"Content-Type":"application/json"},mn=Fe.getImmediate({optional:!0});if(mn){const si=yield mn.getHeartbeatsHeader();si&&(Zt["X-Firebase-Client"]=si)}const ri={method:"POST",body:JSON.stringify(xe),headers:Zt};let Fn,hi;try{Fn=yield fetch(Ce,ri)}catch(si){throw Nt.create("fetch-network-error",{originalErrorMessage:null===(ut=si)||void 0===ut?void 0:ut.message})}if(200!==Fn.status)throw Nt.create("fetch-status-error",{httpStatus:Fn.status});try{hi=yield Fn.json()}catch(si){throw Nt.create("fetch-parse-error",{originalErrorMessage:null===(St=si)||void 0===St?void 0:St.message})}const Gs=hi.ttl.match(/^([\d.]+)(s)$/);if(!Gs||!Gs[2]||isNaN(Number(Gs[1])))throw Nt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${hi.ttl}`});const Rs=1e3*Number(Gs[1]),ii=Date.now();return{token:hi.token,expireTimeMillis:ii+Rs,issuedAtTimeMillis:ii}})).apply(this,arguments)}function zt(Ce,xe){const{projectId:Fe,appId:ut,apiKey:St}=Ce.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Fe}/apps/${ut}:exchangeDebugToken?key=${St}`,body:{debug_token:xe}}}const zn="firebase-app-check-store";let Un=null;function gn(){return Un||(Un=new Promise((Ce,xe)=>{var Fe;try{const ut=indexedDB.open("firebase-app-check-database",1);ut.onsuccess=St=>{Ce(St.target.result)},ut.onerror=St=>{var Zt;xe(Nt.create("storage-open",{originalErrorMessage:null===(Zt=St.target.error)||void 0===Zt?void 0:Zt.message}))},ut.onupgradeneeded=St=>{0===St.oldVersion&&St.target.result.createObjectStore(zn,{keyPath:"compositeKey"})}}catch(ut){xe(Nt.create("storage-open",{originalErrorMessage:null===(Fe=ut)||void 0===Fe?void 0:Fe.message}))}}),Un)}function ye(){return(ye=(0,ce.Z)(function*(Ce,xe){const ut=(yield gn()).transaction(zn,"readwrite"),Zt=ut.objectStore(zn).put({compositeKey:Ce,value:xe});return new Promise((mn,ri)=>{Zt.onsuccess=Fn=>{mn()},ut.onerror=Fn=>{var hi;ri(Nt.create("storage-set",{originalErrorMessage:null===(hi=Fn.target.error)||void 0===hi?void 0:hi.message}))}})})).apply(this,arguments)}const Ft=new Ge.Yd("@firebase/app-check");function At(Ce,xe){return(0,Be.hl)()?function _r(Ce,xe){return function Ze(Ce,xe){return ye.apply(this,arguments)}(function it(Ce){return`${Ce.options.appId}-${Ce.name}`}(Ce),xe)}(Ce,xe).catch(Fe=>{Ft.warn(`Failed to write token to IndexedDB. Error: ${Fe}`)}):Promise.resolve()}function Tr(){return Ne().enabled}function nn(){return me.apply(this,arguments)}function me(){return(me=(0,ce.Z)(function*(){const Ce=Ne();if(Ce.enabled&&Ce.token)return Ce.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ue={error:"UNKNOWN_ERROR"};function Ee(Ce){return Be.US.encodeString(JSON.stringify(Ce),!1)}function fe(Ce){return ot.apply(this,arguments)}function ot(){return(ot=(0,ce.Z)(function*(Ce,xe=!1){const Fe=Ce.app;tn(Fe);const ut=Ie(Fe);let Zt,St=ut.token;if(!St){const Fn=yield ut.cachedTokenPromise;Fn&&pn(Fn)&&(St=Fn)}if(!xe&&St&&pn(St))return{token:St.token};let ri,mn=!1;if(Tr()){ut.exchangeTokenPromise||(ut.exchangeTokenPromise=rr(zt(Fe,yield nn()),Ce.heartbeatServiceProvider).then(hi=>(ut.exchangeTokenPromise=void 0,hi)),mn=!0);const Fn=yield ut.exchangeTokenPromise;return yield At(Fe,Fn),he(Fe,Object.assign(Object.assign({},ut),{token:Fn})),{token:Fn.token}}try{ut.exchangeTokenPromise||(ut.exchangeTokenPromise=ut.provider.getToken().then(Fn=>(ut.exchangeTokenPromise=void 0,Fn)),mn=!0),St=yield ut.exchangeTokenPromise}catch(Fn){"appCheck/throttled"===Fn.code?Ft.warn(Fn.message):Ft.error(Fn),Zt=Fn}return St?(ri={token:St.token},he(Fe,Object.assign(Object.assign({},ut),{token:St})),yield At(Fe,St)):ri=dn(Zt),mn&&Wn(Fe,ri),ri})).apply(this,arguments)}function Bt(Ce,xe){const Fe=Ie(Ce),ut=Fe.tokenObservers.filter(St=>St.next!==xe);0===ut.length&&Fe.tokenRefresher&&Fe.tokenRefresher.isRunning()&&Fe.tokenRefresher.stop(),he(Ce,Object.assign(Object.assign({},Fe),{tokenObservers:ut}))}function $n(Ce){const{app:xe}=Ce,Fe=Ie(xe);let ut=Fe.tokenRefresher;ut||(ut=function _n(Ce){const{app:xe}=Ce;return new at((0,ce.Z)(function*(){let ut;if(ut=Ie(xe).token?yield fe(Ce,!0):yield fe(Ce),ut.error)throw ut.error}),()=>!0,()=>{const Fe=Ie(xe);if(Fe.token){let ut=Fe.token.issuedAtTimeMillis+.5*(Fe.token.expireTimeMillis-Fe.token.issuedAtTimeMillis)+3e5;return ut=Math.min(ut,Fe.token.expireTimeMillis-3e5),Math.max(0,ut-Date.now())}return 0},3e4,96e4)}(Ce),he(xe,Object.assign(Object.assign({},Fe),{tokenRefresher:ut}))),!ut.isRunning()&&Fe.isTokenAutoRefreshEnabled&&ut.start()}function Wn(Ce,xe){const Fe=Ie(Ce).tokenObservers;for(const ut of Fe)try{"EXTERNAL"===ut.type&&null!=xe.error?ut.error(xe.error):ut.next(xe)}catch{}}function pn(Ce){return Ce.expireTimeMillis-Date.now()>0}function dn(Ce){return{token:Ee(ue),error:Ce}}class Qn{constructor(xe,Fe){this.app=xe,this.heartbeatServiceProvider=Fe}_delete(){const{tokenObservers:xe}=Ie(this.app);for(const Fe of xe)Bt(this.app,Fe.next);return Promise.resolve()}}const Ki="app-check-internal";!function ti(){(0,Je._registerComponent)(new Qe.wA("app-check",Ce=>function ar(Ce,xe){return new Qn(Ce,xe)}(Ce.getProvider("app").getImmediate(),Ce.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ce,xe,Fe)=>{Ce.getProvider(Ki).initialize()})),(0,Je._registerComponent)(new Qe.wA(Ki,Ce=>function kr(Ce){return{getToken:xe=>fe(Ce,xe),addTokenListener:xe=>function Ct(Ce,xe,Fe,ut){const{app:St}=Ce,Zt=Ie(St),mn={next:Fe,error:ut,type:xe};if(he(St,Object.assign(Object.assign({},Zt),{tokenObservers:[...Zt.tokenObservers,mn]})),Zt.token&&pn(Zt.token)){const ri=Zt.token;Promise.resolve().then(()=>{Fe({token:ri.token}),$n(Ce)}).catch(()=>{})}Zt.cachedTokenPromise.then(()=>$n(Ce))}(Ce,"INTERNAL",xe),removeTokenListener:xe=>Bt(Ce.app,xe)}}(Ce.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Je.registerVersion)("@firebase/app-check","0.5.12")}();class ni{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(Rt,ke,L)=>{L.d(ke,{zQ:()=>lt,ww:()=>pt,rT:()=>ee,f7:()=>he,L6:()=>X,_Q:()=>Me,lh:()=>Ie,Qv:()=>Ge,nw:()=>Ne});var p=L(4650),k=L(7579),C=L(9646),ge=L(9751),le=L(8996),we=L(6451),Y=L(5363),Ae=L(3900),be=L(4004),K=L(6063);class ne extends k.x{constructor(Pe=1/0,dt=1/0,Se=K.l){super(),this._bufferSize=Pe,this._windowTime=dt,this._timestampProvider=Se,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=dt===1/0,this._bufferSize=Math.max(1,Pe),this._windowTime=Math.max(1,dt)}next(Pe){const{isStopped:dt,_buffer:Se,_infiniteTimeWindow:at,_timestampProvider:Vt,_windowTime:Ht}=this;dt||(Se.push(Pe),!at&&Se.push(Vt.now()+Ht)),this._trimBuffer(),super.next(Pe)}_subscribe(Pe){this._throwIfClosed(),this._trimBuffer();const dt=this._innerSubscribe(Pe),{_infiniteTimeWindow:Se,_buffer:at}=this,Vt=at.slice();for(let Ht=0;Ht<Vt.length&&!Pe.closed;Ht+=Se?1:2)Pe.next(Vt[Ht]);return this._checkFinalizedStatuses(Pe),dt}_trimBuffer(){const{_bufferSize:Pe,_timestampProvider:dt,_buffer:Se,_infiniteTimeWindow:at}=this,Vt=(at?1:2)*Pe;if(Pe<1/0&&Vt<Se.length&&Se.splice(0,Se.length-Vt),!at){const Ht=dt.now();let Nt=0;for(let yn=1;yn<Se.length&&Se[yn]<=Ht;yn+=2)Nt=yn;Nt&&Se.splice(0,Nt+1)}}}var re=L(3099);function nt(_t,Pe,dt){let Se,at=!1;return _t&&"object"==typeof _t?({bufferSize:Se=1/0,windowTime:Pe=1/0,refCount:at=!1,scheduler:dt}=_t):Se=_t??1/0,(0,re.B)({connector:()=>new ne(Se,Pe,dt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:at})}var et=L(590),Ve=L(576);function Tt(_t,Pe){return(0,Ve.m)(Pe)?(0,Ae.w)(()=>_t,Pe):(0,Ae.w)(()=>_t)}var ze=L(9468),De=L(9300),Dt=L(5813),Et=L(2011),ce=L(6895),Je=L(440),Qe=L(127);const Ge=new p.OlP("angularfire2.auth.use-emulator"),X=new p.OlP("angularfire2.auth.settings"),Me=new p.OlP("angularfire2.auth.tenant-id"),ee=new p.OlP("angularfire2.auth.langugage-code"),Ie=new p.OlP("angularfire2.auth.use-device-language"),he=new p.OlP("angularfire.auth.persistence"),Ne=(_t,Pe,dt,Se,at,Vt,Ht,Nt)=>(0,Et.cc)(`${_t.name}.auth`,"AngularFireAuth",_t.name,()=>{const yn=Pe.runOutsideAngular(()=>_t.auth());if(dt&&yn.useEmulator(...dt),Se&&(yn.tenantId=Se),yn.languageCode=at,Vt&&yn.useDeviceLanguage(),Ht)for(const[tn,Tn]of Object.entries(Ht))yn.settings[tn]=Tn;return Nt&&yn.setPersistence(Nt),yn},[dt,Se,at,Vt,Ht,Nt]);let lt=(()=>{class _t{constructor(dt,Se,at,Vt,Ht,Nt,yn,tn,Tn,Kr,rr,tr){const In=new k.x,br=(0,C.of)(void 0).pipe((0,Y.Q)(Ht.outsideAngular),(0,Ae.w)(()=>Vt.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2476)))),(0,be.U)(()=>(0,Et.on)(dt,Vt,Se)),(0,be.U)(zt=>Ne(zt,Vt,Nt,tn,Tn,Kr,yn,rr)),nt({bufferSize:1,refCount:!1}));if((0,ce.PM)(at))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,C.of)(null);else{br.pipe((0,et.P)()).subscribe();const Hn=br.pipe((0,Ae.w)(mt=>mt.getRedirectResult().then(Un=>Un,()=>null)),Dt.iC,nt({bufferSize:1,refCount:!1})),or=br.pipe((0,Ae.w)(mt=>new ge.y(Un=>({unsubscribe:Vt.runOutsideAngular(()=>mt.onAuthStateChanged(gn=>Un.next(gn),gn=>Un.error(gn),()=>Un.complete()))})))),zn=br.pipe((0,Ae.w)(mt=>new ge.y(Un=>({unsubscribe:Vt.runOutsideAngular(()=>mt.onIdTokenChanged(gn=>Un.next(gn),gn=>Un.error(gn),()=>Un.complete()))}))));this.authState=Hn.pipe(Tt(or),(0,ze.R)(Ht.outsideAngular),(0,Y.Q)(Ht.insideAngular)),this.user=Hn.pipe(Tt(zn),(0,ze.R)(Ht.outsideAngular),(0,Y.Q)(Ht.insideAngular)),this.idToken=this.user.pipe((0,Ae.w)(mt=>mt?(0,le.D)(mt.getIdToken()):(0,C.of)(null))),this.idTokenResult=this.user.pipe((0,Ae.w)(mt=>mt?(0,le.D)(mt.getIdTokenResult()):(0,C.of)(null))),this.credential=(0,we.T)(Hn,In,this.authState.pipe((0,De.h)(mt=>!mt))).pipe((0,be.U)(mt=>mt?.user?mt:null),(0,ze.R)(Ht.outsideAngular),(0,Y.Q)(Ht.insideAngular))}return(0,Et.pX)(this,br,Vt,{spy:{apply:(zt,Hn,or)=>{(zt.startsWith("signIn")||zt.startsWith("createUser"))&&or.then(zn=>In.next(zn))}}})}}return _t.\u0275fac=function(dt){return new(dt||_t)(p.LFG(Et.Dh),p.LFG(Et.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Dt.HU),p.LFG(Ge,8),p.LFG(X,8),p.LFG(Me,8),p.LFG(ee,8),p.LFG(Ie,8),p.LFG(he,8),p.LFG(Je.nm,8))},_t.\u0275prov=p.Yz7({token:_t,factory:_t.\u0275fac,providedIn:"any"}),_t})(),pt=(()=>{class _t{constructor(){Qe.Z.registerVersion("angularfire",Dt.q4.full,"auth-compat")}}return _t.\u0275fac=function(dt){return new(dt||_t)},_t.\u0275mod=p.oAB({type:_t}),_t.\u0275inj=p.cJS({providers:[lt]}),_t})()},2011:(Rt,ke,L)=>{L.d(ke,{Dh:()=>Ae,GT:()=>we,cc:()=>et,hO:()=>nt,on:()=>K,pX:()=>le,xv:()=>be});var p=L(4650),k=L(127),C=L(5813);Rt=L.hmd(Rt);const ge=["ngOnDestroy"],le=(De,Dt,Et,ce={})=>new Proxy(De,{get:(Je,Qe)=>Et.runOutsideAngular(()=>{var Be;if(De[Qe])return!(null===(Be=ce?.spy)||void 0===Be)&&Be.get&&ce.spy.get(Qe,De[Qe]),De[Qe];if(ge.indexOf(Qe)>-1)return()=>{};const Ge=Dt.toPromise().then(X=>{const Me=X&&X[Qe];return"function"==typeof Me?Me.bind(X):Me&&Me.then?Me.then(ee=>Et.run(()=>ee)):Et.run(()=>Me)});return new Proxy(()=>{},{get:(X,Me)=>Ge[Me],apply:(X,Me,ee)=>Ge.then(Ie=>{var he;const Ne=Ie&&Ie(...ee);return!(null===(he=ce?.spy)||void 0===he)&&he.apply&&ce.spy.apply(Qe,ee,Ne),Ne})})})}),we=(De,Dt)=>{Dt.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(ce=>{Object.defineProperty(De.prototype,ce,Object.getOwnPropertyDescriptor(Et.prototype||Et,ce))})})};class Y{constructor(Dt){return Dt}}const Ae=new p.OlP("angularfire2.app.options"),be=new p.OlP("angularfire2.app.name");function K(De,Dt,Et){const Je="object"==typeof Et&&Et||{};Je.name=Je.name||"string"==typeof Et&&Et||"[DEFAULT]";const Be=k.Z.apps.filter(Ge=>Ge&&Ge.name===Je.name)[0]||Dt.runOutsideAngular(()=>k.Z.initializeApp(De,Je));try{JSON.stringify(De)!==JSON.stringify(Be.options)&&ne("error",`${Be.name} Firebase App already initialized with different options${Rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Y(Be)}const ne=(De,...Dt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[De](...Dt)},re={provide:Y,useFactory:K,deps:[Ae,p.R0b,[new p.FiY,be]]};let nt=(()=>{class De{constructor(Et){k.Z.registerVersion("angularfire",C.q4.full,"core"),k.Z.registerVersion("angularfire",C.q4.full,"app-compat"),k.Z.registerVersion("angular",p.q4F.full,Et.toString())}static initializeApp(Et,ce){return{ngModule:De,providers:[{provide:Ae,useValue:Et},{provide:be,useValue:ce}]}}}return De.\u0275fac=function(Et){return new(Et||De)(p.LFG(p.Lbi))},De.\u0275mod=p.oAB({type:De}),De.\u0275inj=p.cJS({providers:[re]}),De})();function et(De,Dt,Et,ce,Je){const[,Qe,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===De)||[];if(Qe)return function Ve(De,Dt){try{return De.toString()===Dt.toString()}catch{return De===Dt}}(Je,Be)||(ze("error",`${Dt} was already initialized on the ${Et} Firebase App with different settings.${Tt?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Je,was:Be})),Qe;{const Ge=ce();return globalThis.\u0275AngularfireInstanceCache.push([De,Ge,Je]),Ge}}const Tt=!!Rt.hot,ze=(De,...Dt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[De](...Dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Rt,ke,L)=>{L.d(ke,{q4:()=>ds,iC:()=>bs,HU:()=>Gi,vb:()=>Kt,JM:()=>bt});var p=L(4650),k=L(5867),C=L(5861),ge=L(9681),le=L(2090),we=L(4859),Y=L(1877),Ae=L(8766);const be="@firebase/installations",K="0.5.12",re=`w:${K}`,nt="FIS_v2",Dt=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(M){return M instanceof le.ZR&&M.code.includes("request-failed")}function ce({projectId:M}){return`https://firebaseinstallations.googleapis.com/v1/projects/${M}/installations`}function Je(M){return{token:M.token,requestStatus:2,expiresIn:Ie(M.expiresIn),creationTime:Date.now()}}function Qe(M,O){return Be.apply(this,arguments)}function Be(){return(Be=(0,C.Z)(function*(M,O){const se=(yield O.json()).error;return Dt.create("request-failed",{requestName:M,serverCode:se.code,serverMessage:se.message,serverStatus:se.status})})).apply(this,arguments)}function Ge({apiKey:M}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M})}function X(M,{refreshToken:O}){const H=Ge(M);return H.append("Authorization",function he(M){return`${nt} ${M}`}(O)),H}function Me(M){return ee.apply(this,arguments)}function ee(){return(ee=(0,C.Z)(function*(M){const O=yield M();return O.status>=500&&O.status<600?M():O})).apply(this,arguments)}function Ie(M){return Number(M.replace("s","000"))}function Ne(M,O){return lt.apply(this,arguments)}function lt(){return(lt=(0,C.Z)(function*({appConfig:M,heartbeatServiceProvider:O},{fid:H}){const se=ce(M),Oe=Ge(M),Ke=O.getImmediate({optional:!0});if(Ke){const En=yield Ke.getHeartbeatsHeader();En&&Oe.append("x-firebase-client",En)}const Pt={method:"POST",headers:Oe,body:JSON.stringify({fid:H,authVersion:nt,appId:M.appId,sdkVersion:re})},hn=yield Me(()=>fetch(se,Pt));if(hn.ok){const En=yield hn.json();return{fid:En.fid||H,registrationStatus:2,refreshToken:En.refreshToken,authToken:Je(En.authToken)}}throw yield Qe("Create Installation",hn)})).apply(this,arguments)}function pt(M){return new Promise(O=>{setTimeout(O,M)})}const Pe=/^[cdef][\w-]{21}$/;function Se(){try{const M=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(M),M[0]=112+M[0]%16;const H=function at(M){return function _t(M){return btoa(String.fromCharCode(...M)).replace(/\+/g,"-").replace(/\//g,"_")}(M).substr(0,22)}(M);return Pe.test(H)?H:""}catch{return""}}function Vt(M){return`${M.appName}!${M.appId}`}const Ht=new Map;function Nt(M,O){const H=Vt(M);Tn(H,O),function Kr(M,O){const H=function tr(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=M=>{Tn(M.data.key,M.data.fid)}),rr}();H&&H.postMessage({key:M,fid:O}),function In(){0===Ht.size&&rr&&(rr.close(),rr=null)}()}(H,O)}function Tn(M,O){const H=Ht.get(M);if(H)for(const se of H)se(O)}let rr=null;const Hn="firebase-installations-store";let or=null;function zn(){return or||(or=(0,Ae.X3)("firebase-installations-database",1,{upgrade:(M,O)=>{0===O&&M.createObjectStore(Hn)}})),or}function mt(M,O){return Un.apply(this,arguments)}function Un(){return(Un=(0,C.Z)(function*(M,O){const H=Vt(M),Oe=(yield zn()).transaction(Hn,"readwrite"),Ke=Oe.objectStore(Hn),yt=yield Ke.get(H);return yield Ke.put(O,H),yield Oe.done,(!yt||yt.fid!==O.fid)&&Nt(M,O.fid),O})).apply(this,arguments)}function gn(M){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,C.Z)(function*(M){const O=Vt(M),se=(yield zn()).transaction(Hn,"readwrite");yield se.objectStore(Hn).delete(O),yield se.done})).apply(this,arguments)}function _r(M,O){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,C.Z)(function*(M,O){const H=Vt(M),Oe=(yield zn()).transaction(Hn,"readwrite"),Ke=Oe.objectStore(Hn),yt=yield Ke.get(H),Pt=O(yt);return void 0===Pt?yield Ke.delete(H):yield Ke.put(Pt,H),yield Oe.done,Pt&&(!yt||yt.fid!==Pt.fid)&&Nt(M,Pt.fid),Pt})).apply(this,arguments)}function fr(M){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,C.Z)(function*(M){let O;const H=yield _r(M.appConfig,se=>{const Oe=ye(se),Ke=ae(M,Oe);return O=Ke.registrationPromise,Ke.installationEntry});return""===H.fid?{installationEntry:yield O}:{installationEntry:H,registrationPromise:O}})).apply(this,arguments)}function ye(M){return At(M||{fid:Se(),registrationStatus:0})}function ae(M,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(Dt.create("app-offline"))};const H={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},se=function $e(M,O){return it.apply(this,arguments)}(M,H);return{installationEntry:H,registrationPromise:se}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:Ft(M)}:{installationEntry:O}}function it(){return(it=(0,C.Z)(function*(M,O){try{const H=yield Ne(M,O);return mt(M.appConfig,H)}catch(H){throw Et(H)&&409===H.customData.serverCode?yield gn(M.appConfig):yield mt(M.appConfig,{fid:O.fid,registrationStatus:0}),H}})).apply(this,arguments)}function Ft(M){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,C.Z)(function*(M){let O=yield An(M.appConfig);for(;1===O.registrationStatus;)yield pt(100),O=yield An(M.appConfig);if(0===O.registrationStatus){const{installationEntry:H,registrationPromise:se}=yield fr(M);return se||H}return O})).apply(this,arguments)}function An(M){return _r(M,O=>{if(!O)throw Dt.create("installation-not-found");return At(O)})}function At(M){return function Zn(M){return 1===M.registrationStatus&&M.registrationTime+1e4<Date.now()}(M)?{fid:M.fid,registrationStatus:0}:M}function vn(M,O){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,C.Z)(function*({appConfig:M,heartbeatServiceProvider:O},H){const se=nn(M,H),Oe=X(M,H),Ke=O.getImmediate({optional:!0});if(Ke){const En=yield Ke.getHeartbeatsHeader();En&&Oe.append("x-firebase-client",En)}const Pt={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:re,appId:M.appId}})},hn=yield Me(()=>fetch(se,Pt));if(hn.ok)return Je(yield hn.json());throw yield Qe("Generate Auth Token",hn)})).apply(this,arguments)}function nn(M,{fid:O}){return`${ce(M)}/${O}/authTokens:generate`}function me(M){return Q.apply(this,arguments)}function Q(){return(Q=(0,C.Z)(function*(M,O=!1){let H;const se=yield _r(M.appConfig,Ke=>{if(!Bt(Ke))throw Dt.create("not-registered");const yt=Ke.authToken;if(!O&&$n(yt))return Ke;if(1===yt.requestStatus)return H=ue(M,O),Ke;{if(!navigator.onLine)throw Dt.create("app-offline");const Pt=Wn(Ke);return H=ot(M,Pt),Pt}});return H?yield H:se.authToken})).apply(this,arguments)}function ue(M,O){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,C.Z)(function*(M,O){let H=yield fe(M.appConfig);for(;1===H.authToken.requestStatus;)yield pt(100),H=yield fe(M.appConfig);const se=H.authToken;return 0===se.requestStatus?me(M,O):se})).apply(this,arguments)}function fe(M){return _r(M,O=>{if(!Bt(O))throw Dt.create("not-registered");return function pn(M){return 1===M.requestStatus&&M.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function ot(M,O){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,C.Z)(function*(M,O){try{const H=yield vn(M,O),se=Object.assign(Object.assign({},O),{authToken:H});return yield mt(M.appConfig,se),H}catch(H){if(!Et(H)||401!==H.customData.serverCode&&404!==H.customData.serverCode){const se=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield mt(M.appConfig,se)}else yield gn(M.appConfig);throw H}})).apply(this,arguments)}function Bt(M){return void 0!==M&&2===M.registrationStatus}function $n(M){return 2===M.requestStatus&&!function _n(M){const O=Date.now();return O<M.creationTime||M.creationTime+M.expiresIn<O+36e5}(M)}function Wn(M){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},M),{authToken:O})}function Qn(){return(Qn=(0,C.Z)(function*(M){const O=M,{installationEntry:H,registrationPromise:se}=yield fr(O);return se?se.catch(console.error):me(O).catch(console.error),H.fid})).apply(this,arguments)}function kr(){return(kr=(0,C.Z)(function*(M,O=!1){const H=M;return yield Fr(H),(yield me(H,O)).token})).apply(this,arguments)}function Fr(M){return pr.apply(this,arguments)}function pr(){return(pr=(0,C.Z)(function*(M){const{registrationPromise:O}=yield fr(M);O&&(yield O)})).apply(this,arguments)}function Dn(M){return Dt.create("missing-app-config-values",{valueName:M})}const jr="installations",nr=M=>{const O=M.getProvider("app").getImmediate(),H=function Yt(M){if(!M||!M.options)throw Dn("App Configuration");if(!M.name)throw Dn("App Name");const O=["projectId","apiKey","appId"];for(const H of O)if(!M.options[H])throw Dn(H);return{appName:M.name,projectId:M.options.projectId,apiKey:M.options.apiKey,appId:M.options.appId}}(O);return{app:O,appConfig:H,heartbeatServiceProvider:(0,ge._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},$r=M=>{const O=M.getProvider("app").getImmediate(),H=(0,ge._getProvider)(O,jr).getImmediate();return{getId:()=>function dn(M){return Qn.apply(this,arguments)}(H),getToken:Oe=>function ar(M){return kr.apply(this,arguments)}(H,Oe)}};(function gs(){(0,ge._registerComponent)(new we.wA(jr,nr,"PUBLIC")),(0,ge._registerComponent)(new we.wA("installations-internal",$r,"PRIVATE"))})(),(0,ge.registerVersion)(be,K),(0,ge.registerVersion)(be,K,"esm2017");const Ui="@firebase/remote-config",gr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $s{constructor(O,H,se,Oe){this.client=O,this.storage=H,this.storageCache=se,this.logger=Oe}isCachedDataFresh(O,H){if(!H)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const se=Date.now()-H,Oe=se<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${se}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Oe}.`),Oe}fetch(O){var H=this;return(0,C.Z)(function*(){const[se,Oe]=yield Promise.all([H.storage.getLastSuccessfulFetchTimestampMillis(),H.storage.getLastSuccessfulFetchResponse()]);if(Oe&&H.isCachedDataFresh(O.cacheMaxAgeMillis,se))return Oe;O.eTag=Oe&&Oe.eTag;const Ke=yield H.client.fetch(O),yt=[H.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ke.status&&yt.push(H.storage.setLastSuccessfulFetchResponse(Ke)),yield Promise.all(yt),Ke})()}}function ho(M=navigator){return M.languages&&M.languages[0]||M.language}class Hs{constructor(O,H,se,Oe,Ke,yt){this.firebaseInstallations=O,this.sdkVersion=H,this.namespace=se,this.projectId=Oe,this.apiKey=Ke,this.appId=yt}fetch(O){var H=this;return(0,C.Z)(function*(){var se,Oe,Ke;const[yt,Pt]=yield Promise.all([H.firebaseInstallations.getId(),H.firebaseInstallations.getToken()]),En=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${H.projectId}/namespaces/${H.namespace}:fetch?key=${H.apiKey}`,Rn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},un={sdk_version:H.sdkVersion,app_instance_id:yt,app_instance_id_token:Pt,app_id:H.appId,language_code:ho()},Jr={method:"POST",headers:Rn,body:JSON.stringify(un)},fs=fetch(En,Jr),Ja=new Promise((Xa,Ca)=>{O.signal.addEventListener(()=>{const ba=new Error("The operation was aborted.");ba.name="AbortError",Ca(ba)})});let Pa;try{yield Promise.race([fs,Ja]),Pa=yield fs}catch(Xa){let Ca="fetch-client-network";throw"AbortError"===(null===(se=Xa)||void 0===se?void 0:se.name)&&(Ca="fetch-timeout"),gr.create(Ca,{originalErrorMessage:null===(Oe=Xa)||void 0===Oe?void 0:Oe.message})}let Da=Pa.status;const di=Pa.headers.get("ETag")||void 0;let oa,cr;if(200===Pa.status){let Xa;try{Xa=yield Pa.json()}catch(Ca){throw gr.create("fetch-client-parse",{originalErrorMessage:null===(Ke=Ca)||void 0===Ke?void 0:Ke.message})}oa=Xa.entries,cr=Xa.state}if("INSTANCE_STATE_UNSPECIFIED"===cr?Da=500:"NO_CHANGE"===cr?Da=304:("NO_TEMPLATE"===cr||"EMPTY_CONFIG"===cr)&&(oa={}),304!==Da&&200!==Da)throw gr.create("fetch-status",{httpStatus:Da});return{status:Da,eTag:di,config:oa}})()}}class xe{constructor(O,H){this.client=O,this.storage=H}fetch(O){var H=this;return(0,C.Z)(function*(){const se=(yield H.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return H.attemptFetch(O,se)})()}attemptFetch(O,{throttleEndTimeMillis:H,backoffCount:se}){var Oe=this;return(0,C.Z)(function*(){yield function Lr(M,O){return new Promise((H,se)=>{const Oe=Math.max(O-Date.now(),0),Ke=setTimeout(H,Oe);M.addEventListener(()=>{clearTimeout(Ke),se(gr.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,H);try{const Ke=yield Oe.client.fetch(O);return yield Oe.storage.deleteThrottleMetadata(),Ke}catch(Ke){if(!function Ce(M){if(!(M instanceof le.ZR&&M.customData))return!1;const O=Number(M.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Ke))throw Ke;const yt={throttleEndTimeMillis:Date.now()+(0,le.$s)(se),backoffCount:se+1};return yield Oe.storage.setThrottleMetadata(yt),Oe.attemptFetch(O,yt)}})()}}class St{constructor(O,H,se,Oe,Ke){this.app=O,this._client=H,this._storageCache=se,this._storage=Oe,this._logger=Ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zt(M,O){var H;const se=M.target.error||void 0;return gr.create(O,{originalErrorMessage:se&&(null===(H=se)||void 0===H?void 0:H.message)})}const mn="app_namespace_store";class Gs{constructor(O,H,se,Oe=function hi(){return new Promise((M,O)=>{var H;try{const se=indexedDB.open("firebase_remote_config",1);se.onerror=Oe=>{O(Zt(Oe,"storage-open"))},se.onsuccess=Oe=>{M(Oe.target.result)},se.onupgradeneeded=Oe=>{0===Oe.oldVersion&&Oe.target.result.createObjectStore(mn,{keyPath:"compositeKey"})}}catch(se){O(gr.create("storage-open",{originalErrorMessage:null===(H=se)||void 0===H?void 0:H.message}))}})}()){this.appId=O,this.appName=H,this.namespace=se,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var H=this;return(0,C.Z)(function*(){const se=yield H.openDbPromise;return new Promise((Oe,Ke)=>{var yt;const hn=se.transaction([mn],"readonly").objectStore(mn),En=H.createCompositeKey(O);try{const Rn=hn.get(En);Rn.onerror=un=>{Ke(Zt(un,"storage-get"))},Rn.onsuccess=un=>{const Jr=un.target.result;Oe(Jr?Jr.value:void 0)}}catch(Rn){Ke(gr.create("storage-get",{originalErrorMessage:null===(yt=Rn)||void 0===yt?void 0:yt.message}))}})})()}set(O,H){var se=this;return(0,C.Z)(function*(){const Oe=yield se.openDbPromise;return new Promise((Ke,yt)=>{var Pt;const En=Oe.transaction([mn],"readwrite").objectStore(mn),Rn=se.createCompositeKey(O);try{const un=En.put({compositeKey:Rn,value:H});un.onerror=Jr=>{yt(Zt(Jr,"storage-set"))},un.onsuccess=()=>{Ke()}}catch(un){yt(gr.create("storage-set",{originalErrorMessage:null===(Pt=un)||void 0===Pt?void 0:Pt.message}))}})})()}delete(O){var H=this;return(0,C.Z)(function*(){const se=yield H.openDbPromise;return new Promise((Oe,Ke)=>{var yt;const hn=se.transaction([mn],"readwrite").objectStore(mn),En=H.createCompositeKey(O);try{const Rn=hn.delete(En);Rn.onerror=un=>{Ke(Zt(un,"storage-delete"))},Rn.onsuccess=()=>{Oe()}}catch(Rn){Ke(gr.create("storage-delete",{originalErrorMessage:null===(yt=Rn)||void 0===yt?void 0:yt.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Rs{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,C.Z)(function*(){const H=O.storage.getLastFetchStatus(),se=O.storage.getLastSuccessfulFetchTimestampMillis(),Oe=O.storage.getActiveConfig(),Ke=yield H;Ke&&(O.lastFetchStatus=Ke);const yt=yield se;yt&&(O.lastSuccessfulFetchTimestampMillis=yt);const Pt=yield Oe;Pt&&(O.activeConfig=Pt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function ys(){return fo.apply(this,arguments)}function fo(){return(fo=(0,C.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function ii(){(0,ge._registerComponent)(new we.wA("remote-config",function M(O,{instanceIdentifier:H}){const se=O.getProvider("app").getImmediate(),Oe=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gr.create("registration-window");if(!(0,le.hl)())throw gr.create("indexed-db-unavailable");const{projectId:Ke,apiKey:yt,appId:Pt}=se.options;if(!Ke)throw gr.create("registration-project-id");if(!yt)throw gr.create("registration-api-key");if(!Pt)throw gr.create("registration-app-id");const hn=new Gs(Pt,se.name,H=H||"firebase"),En=new Rs(hn),Rn=new Y.Yd(Ui);Rn.logLevel=Y.in.ERROR;const un=new Hs(Oe,ge.SDK_VERSION,H,Ke,yt,Pt),Jr=new xe(un,hn),fs=new $s(Jr,hn,En,Rn),Ja=new St(se,fs,En,hn,Rn);return function Er(M){const O=(0,le.m9)(M);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(Ja),Ja},"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(Ui,"0.3.11"),(0,ge.registerVersion)(Ui,"0.3.11","esm2017")}();const Di="/firebase-messaging-sw.js",Ci="/firebase-cloud-messaging-push-scope",oi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qs="google.c.a.c_id",vs="google.c.a.c_l",_s="google.c.a.ts",Po="google.c.a.e";var fi=(()=>{return(M=fi||(fi={})).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked",fi;var M})();function Rr(M){const O=new Uint8Array(M);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pi(M){const H=(M+"=".repeat((4-M.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),se=atob(H),Oe=new Uint8Array(se.length);for(let Ke=0;Ke<se.length;++Ke)Oe[Ke]=se.charCodeAt(Ke);return Oe}const Oi="fcm_token_details_db",ai="fcm_token_object_Store";function po(M){return fa.apply(this,arguments)}function fa(){return fa=(0,C.Z)(function*(M){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ke=>Ke.name).includes(Oi))return null;let O=null;return(yield(0,Ae.X3)(Oi,5,{upgrade:(se=(0,C.Z)(function*(Oe,Ke,yt,Pt){var hn;if(Ke<2||!Oe.objectStoreNames.contains(ai))return;const En=Pt.objectStore(ai),Rn=yield En.index("fcmSenderId").get(M);if(yield En.clear(),Rn)if(2===Ke){const un=Rn;if(!un.auth||!un.p256dh||!un.endpoint)return;O={token:un.fcmToken,createTime:null!==(hn=un.createTime)&&void 0!==hn?hn:Date.now(),subscriptionOptions:{auth:un.auth,p256dh:un.p256dh,endpoint:un.endpoint,swScope:un.swScope,vapidKey:"string"==typeof un.vapidKey?un.vapidKey:Rr(un.vapidKey)}}}else if(3===Ke){const un=Rn;O={token:un.fcmToken,createTime:un.createTime,subscriptionOptions:{auth:Rr(un.auth),p256dh:Rr(un.p256dh),endpoint:un.endpoint,swScope:un.swScope,vapidKey:Rr(un.vapidKey)}}}else if(4===Ke){const un=Rn;O={token:un.fcmToken,createTime:un.createTime,subscriptionOptions:{auth:Rr(un.auth),p256dh:Rr(un.p256dh),endpoint:un.endpoint,swScope:un.swScope,vapidKey:Rr(un.vapidKey)}}}}),function(Ke,yt,Pt,hn){return se.apply(this,arguments)})})).close(),yield(0,Ae.Lj)(Oi),yield(0,Ae.Lj)("fcm_vapid_details_db"),yield(0,Ae.Lj)("undefined"),ir(O)?O:null;var se}),fa.apply(this,arguments)}function ir(M){if(!M||!M.subscriptionOptions)return!1;const{subscriptionOptions:O}=M;return"number"==typeof M.createTime&&M.createTime>0&&"string"==typeof M.token&&M.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const ui="firebase-messaging-store";let Vr=null;function Ln(){return Vr||(Vr=(0,Ae.X3)("firebase-messaging-database",1,{upgrade:(M,O)=>{0===O&&M.createObjectStore(ui)}})),Vr}function Ji(M){return bi.apply(this,arguments)}function bi(){return(bi=(0,C.Z)(function*(M){const O=$i(M),se=yield(yield Ln()).transaction(ui).objectStore(ui).get(O);if(se)return se;{const Oe=yield po(M.appConfig.senderId);if(Oe)return yield On(M,Oe),Oe}})).apply(this,arguments)}function On(M,O){return zs.apply(this,arguments)}function zs(){return(zs=(0,C.Z)(function*(M,O){const H=$i(M),Oe=(yield Ln()).transaction(ui,"readwrite");return yield Oe.objectStore(ui).put(O,H),yield Oe.done,O})).apply(this,arguments)}function Es(M){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,C.Z)(function*(M){const O=$i(M),se=(yield Ln()).transaction(ui,"readwrite");yield se.objectStore(ui).delete(O),yield se.done})).apply(this,arguments)}function $i({appConfig:M}){return M.appId}const Nr=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rn(M,O){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,C.Z)(function*(M,O){var H;const se=yield Xs(M),Oe=gt(O),Ke={method:"POST",headers:se,body:JSON.stringify(Oe)};let yt;try{yt=yield(yield fetch(es(M.appConfig),Ke)).json()}catch(Pt){throw Nr.create("token-subscribe-failed",{errorInfo:null===(H=Pt)||void 0===H?void 0:H.toString()})}if(yt.error)throw Nr.create("token-subscribe-failed",{errorInfo:yt.error.message});if(!yt.token)throw Nr.create("token-subscribe-no-token");return yt.token})).apply(this,arguments)}function qo(M,O){return go.apply(this,arguments)}function go(){return(go=(0,C.Z)(function*(M,O){var H;const se=yield Xs(M),Oe=gt(O.subscriptionOptions),Ke={method:"PATCH",headers:se,body:JSON.stringify(Oe)};let yt;try{yt=yield(yield fetch(`${es(M.appConfig)}/${O.token}`,Ke)).json()}catch(Pt){throw Nr.create("token-update-failed",{errorInfo:null===(H=Pt)||void 0===H?void 0:H.toString()})}if(yt.error)throw Nr.create("token-update-failed",{errorInfo:yt.error.message});if(!yt.token)throw Nr.create("token-update-no-token");return yt.token})).apply(this,arguments)}function Ns(M,O){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,C.Z)(function*(M,O){var H;const Oe={method:"DELETE",headers:yield Xs(M)};try{const yt=yield(yield fetch(`${es(M.appConfig)}/${O}`,Oe)).json();if(yt.error)throw Nr.create("token-unsubscribe-failed",{errorInfo:yt.error.message})}catch(Ke){throw Nr.create("token-unsubscribe-failed",{errorInfo:null===(H=Ke)||void 0===H?void 0:H.toString()})}})).apply(this,arguments)}function es({projectId:M}){return`https://fcmregistrations.googleapis.com/v1/projects/${M}/registrations`}function Xs(M){return mo.apply(this,arguments)}function mo(){return(mo=(0,C.Z)(function*({appConfig:M,installations:O}){const H=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M.apiKey,"x-goog-firebase-installations-auth":`FIS ${H}`})})).apply(this,arguments)}function gt({p256dh:M,auth:O,endpoint:H,vapidKey:se}){const Oe={web:{endpoint:H,auth:O,p256dh:M}};return se!==oi&&(Oe.web.applicationPubKey=se),Oe}const Sn=6048e5;function Os(M){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,C.Z)(function*(M){const O=yield eo(M.swRegistration,M.vapidKey),H={vapidKey:M.vapidKey,swScope:M.swRegistration.scope,endpoint:O.endpoint,auth:Rr(O.getKey("auth")),p256dh:Rr(O.getKey("p256dh"))},se=yield Ji(M.firebaseDependencies);if(se){if(P(se.subscriptionOptions,H))return Date.now()>=se.createTime+Sn?as(M,{token:se.token,createTime:Date.now(),subscriptionOptions:H}):se.token;try{yield Ns(M.firebaseDependencies,se.token)}catch(Oe){console.warn(Oe)}return yo(M.firebaseDependencies,H)}return yo(M.firebaseDependencies,H)})).apply(this,arguments)}function Dr(M){return ws.apply(this,arguments)}function ws(){return(ws=(0,C.Z)(function*(M){const O=yield Ji(M.firebaseDependencies);O&&(yield Ns(M.firebaseDependencies,O.token),yield Es(M.firebaseDependencies));const H=yield M.swRegistration.pushManager.getSubscription();return!H||H.unsubscribe()})).apply(this,arguments)}function as(M,O){return mi.apply(this,arguments)}function mi(){return(mi=(0,C.Z)(function*(M,O){try{const H=yield qo(M.firebaseDependencies,O),se=Object.assign(Object.assign({},O),{token:H,createTime:Date.now()});return yield On(M.firebaseDependencies,se),H}catch(H){throw yield Dr(M),H}})).apply(this,arguments)}function yo(M,O){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,C.Z)(function*(M,O){const se={token:yield rn(M,O),createTime:Date.now(),subscriptionOptions:O};return yield On(M,se),se.token})).apply(this,arguments)}function eo(M,O){return vo.apply(this,arguments)}function vo(){return(vo=(0,C.Z)(function*(M,O){return(yield M.pushManager.getSubscription())||M.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pi(O)})})).apply(this,arguments)}function P(M,O){return O.vapidKey===M.vapidKey&&O.endpoint===M.endpoint&&O.auth===M.auth&&O.p256dh===M.p256dh}function R(M){const O={from:M.from,collapseKey:M.collapse_key,messageId:M.fcmMessageId};return function A(M,O){if(!O.notification)return;M.notification={};const H=O.notification.title;H&&(M.notification.title=H);const se=O.notification.body;se&&(M.notification.body=se);const Oe=O.notification.image;Oe&&(M.notification.image=Oe)}(O,M),function z(M,O){!O.data||(M.data=O.data)}(O,M),function qe(M,O){var H,se,Oe,Ke,yt;if(!(O.fcmOptions||null!==(H=O.notification)&&void 0!==H&&H.click_action))return;M.fcmOptions={};const Pt=null!==(Oe=null===(se=O.fcmOptions)||void 0===se?void 0:se.link)&&void 0!==Oe?Oe:null===(Ke=O.notification)||void 0===Ke?void 0:Ke.click_action;Pt&&(M.fcmOptions.link=Pt);const hn=null===(yt=O.fcmOptions)||void 0===yt?void 0:yt.analytics_label;hn&&(M.fcmOptions.analyticsLabel=hn)}(O,M),O}function kt(M){return"object"==typeof M&&!!M&&Qs in M}function qn(M,O){const H=[];for(let se=0;se<M.length;se++)H.push(M.charAt(se)),se<O.length&&H.push(O.charAt(se));return H.join("")}function yi(M){return Nr.create("missing-app-config-values",{valueName:M})}qn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class us{constructor(O,H,se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function Kn(M){if(!M||!M.options)throw yi("App Configuration Object");if(!M.name)throw yi("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:H}=M;for(const se of O)if(!H[se])throw yi(se);return{appName:M.name,projectId:H.projectId,apiKey:H.apiKey,appId:H.appId,senderId:H.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Oe,installations:H,analyticsProvider:se}}_delete(){return Promise.resolve()}}function to(M){return no.apply(this,arguments)}function no(){return(no=(0,C.Z)(function*(M){var O;try{M.swRegistration=yield navigator.serviceWorker.register(Di,{scope:Ci}),M.swRegistration.update().catch(()=>{})}catch(H){throw Nr.create("failed-service-worker-registration",{browserErrorMessage:null===(O=H)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function ro(M,O){return pa.apply(this,arguments)}function pa(){return(pa=(0,C.Z)(function*(M,O){if(!O&&!M.swRegistration&&(yield to(M)),O||!M.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw Nr.create("invalid-sw-registration");M.swRegistration=O}})).apply(this,arguments)}function Fo(M,O){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,C.Z)(function*(M,O){O?M.vapidKey=O:M.vapidKey||(M.vapidKey=oi)})).apply(this,arguments)}function ls(){return(ls=(0,C.Z)(function*(M,O){if(!navigator)throw Nr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nr.create("permission-blocked");return yield Fo(M,O?.vapidKey),yield ro(M,O?.serviceWorkerRegistration),Os(M)})).apply(this,arguments)}function ga(M,O,H){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,C.Z)(function*(M,O,H){const se=Qo(O);(yield M.firebaseDependencies.analyticsProvider.get()).logEvent(se,{message_id:H[Qs],message_name:H[vs],message_time:H[_s],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qo(M){switch(M){case fi.NOTIFICATION_CLICKED:return"notification_open";case fi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function B(){return(B=(0,C.Z)(function*(M,O){const H=O.data;if(!H.isFirebaseMessaging)return;M.onMessageHandler&&H.messageType===fi.PUSH_RECEIVED&&("function"==typeof M.onMessageHandler?M.onMessageHandler(R(H)):M.onMessageHandler.next(R(H)));const se=H.data;kt(se)&&"1"===se[Po]&&(yield ga(M,H.messageType,se))})).apply(this,arguments)}const x="@firebase/messaging",G="0.9.16",pe=M=>{const O=new us(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),M.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",H=>function T(M,O){return B.apply(this,arguments)}(O,H)),O},He=M=>{const O=M.getProvider("messaging").getImmediate();return{getToken:se=>function Ko(M,O){return ls.apply(this,arguments)}(O,se)}};function Wt(){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,C.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function rt(){(0,ge._registerComponent)(new we.wA("messaging",pe,"PUBLIC")),(0,ge._registerComponent)(new we.wA("messaging-internal",He,"PRIVATE")),(0,ge.registerVersion)(x,G),(0,ge.registerVersion)(x,G,"esm2017")}();const Ti="analytics",io="firebase_id",cs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jo="https://www.googletagmanager.com/gtag/js",er=new Y.Yd("@firebase/analytics");function xa(M){return Promise.all(M.map(O=>O.catch(H=>H)))}function Wu(M,O){const H=document.createElement("script");H.src=`${Jo}?l=${M}&id=${O}`,H.async=!0,document.head.appendChild(H)}function qu(M,O,H,se,Oe,Ke){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,C.Z)(function*(M,O,H,se,Oe,Ke){const yt=se[Oe];try{if(yt)yield O[yt];else{const hn=(yield xa(H)).find(En=>En.measurementId===Oe);hn&&(yield O[hn.appId])}}catch(Pt){er.error(Pt)}M("config",Oe,Ke)})).apply(this,arguments)}function Xo(M,O,H,se,Oe){return ea.apply(this,arguments)}function ea(){return(ea=(0,C.Z)(function*(M,O,H,se,Oe){try{let Ke=[];if(Oe&&Oe.send_to){let yt=Oe.send_to;Array.isArray(yt)||(yt=[yt]);const Pt=yield xa(H);for(const hn of yt){const En=Pt.find(un=>un.measurementId===hn),Rn=En&&O[En.appId];if(!Rn){Ke=[];break}Ke.push(Rn)}}0===Ke.length&&(Ke=Object.values(O)),yield Promise.all(Ke),M("event",se,Oe||{})}catch(Ke){er.error(Ke)}})).apply(this,arguments)}function fu(){const M=window.document.getElementsByTagName("script");for(const O of Object.values(M))if(O.src&&O.src.includes(Jo))return O;return null}const Ai=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ls=new class ts{constructor(O={},H=1e3){this.throttleMetadata=O,this.intervalMillis=H}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,H){this.throttleMetadata[O]=H}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function Ku(M){return new Headers({Accept:"application/json","x-goog-api-key":M})}function _a(M){return wt.apply(this,arguments)}function wt(){return(wt=(0,C.Z)(function*(M){var O;const{appId:H,apiKey:se}=M,Oe={method:"GET",headers:Ku(se)},Ke=cs.replace("{app-id}",H),yt=yield fetch(Ke,Oe);if(200!==yt.status&&304!==yt.status){let Pt="";try{const hn=yield yt.json();null!==(O=hn.error)&&void 0!==O&&O.message&&(Pt=hn.error.message)}catch{}throw Ai.create("config-fetch-failed",{httpStatus:yt.status,responseMessage:Pt})}return yt.json()})).apply(this,arguments)}function kn(M){return vi.apply(this,arguments)}function vi(){return(vi=(0,C.Z)(function*(M,O=Ls,H){const{appId:se,apiKey:Oe,measurementId:Ke}=M.options;if(!se)throw Ai.create("no-app-id");if(!Oe){if(Ke)return{measurementId:Ke,appId:se};throw Ai.create("no-api-key")}const yt=O.getThrottleMetadata(se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new Lt;return setTimeout((0,C.Z)(function*(){Pt.abort()}),void 0!==H?H:6e4),ta({appId:se,apiKey:Oe,measurementId:Ke},yt,Pt,O)})).apply(this,arguments)}function ta(M,O,H){return qt.apply(this,arguments)}function qt(){return(qt=(0,C.Z)(function*(M,{throttleEndTimeMillis:O,backoffCount:H},se,Oe=Ls){var Ke,yt;const{appId:Pt,measurementId:hn}=M;try{yield fn(se,O)}catch(En){if(hn)return er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${null===(Ke=En)||void 0===Ke?void 0:Ke.message}]`),{appId:Pt,measurementId:hn};throw En}try{const En=yield _a(M);return Oe.deleteThrottleMetadata(Pt),En}catch(En){const Rn=En;if(!pu(Rn)){if(Oe.deleteThrottleMetadata(Pt),hn)return er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${Rn?.message}]`),{appId:Pt,measurementId:hn};throw En}const un=503===Number(null===(yt=Rn?.customData)||void 0===yt?void 0:yt.httpStatus)?(0,le.$s)(H,Oe.intervalMillis,30):(0,le.$s)(H,Oe.intervalMillis),Jr={throttleEndTimeMillis:Date.now()+un,backoffCount:H+1};return Oe.setThrottleMetadata(Pt,Jr),er.debug(`Calling attemptFetch again in ${un} millis`),ta(M,Jr,se,Oe)}})).apply(this,arguments)}function fn(M,O){return new Promise((H,se)=>{const Oe=Math.max(O-Date.now(),0),Ke=setTimeout(H,Oe);M.addEventListener(()=>{clearTimeout(Ke),se(Ai.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function pu(M){if(!(M instanceof le.ZR&&M.customData))return!1;const O=Number(M.customData.httpStatus);return 429===O||500===O||503===O||504===O}class Lt{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}let Ye,Oa;function Or(){return(Or=(0,C.Z)(function*(M,O,H,se,Oe){if(Oe&&Oe.global)M("event",H,se);else{const Ke=yield O;M("event",H,Object.assign(Object.assign({},se),{send_to:Ke}))}})).apply(this,arguments)}function Uo(M){Oa=M}function Qa(M){Ye=M}function Jt(){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,C.Z)(function*(){var M;if(!(0,le.hl)())return er.warn(Ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(O){return er.warn(Ai.create("indexeddb-unavailable",{errorInfo:null===(M=O)||void 0===M?void 0:M.toString()}).message),!1}return!0})).apply(this,arguments)}function lr(){return(lr=(0,C.Z)(function*(M,O,H,se,Oe,Ke,yt){var Pt;const hn=kn(M);hn.then(fs=>{H[fs.measurementId]=fs.appId,M.options.measurementId&&fs.measurementId!==M.options.measurementId&&er.warn(`The measurement ID in the local Firebase config (${M.options.measurementId}) does not match the measurement ID fetched from the server (${fs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fs=>er.error(fs)),O.push(hn);const En=Jt().then(fs=>{if(fs)return se.getId()}),[Rn,un]=yield Promise.all([hn,En]);fu()||Wu(Ke,Rn.measurementId),Oa&&(Oe("consent","default",Oa),Uo(void 0)),Oe("js",new Date);const Jr=null!==(Pt=yt?.config)&&void 0!==Pt?Pt:{};return Jr.origin="firebase",Jr.update=!0,null!=un&&(Jr[io]=un),Oe("config",Rn.measurementId,Jr),Ye&&(Oe("set",Ye),Qa(void 0)),Rn.measurementId})).apply(this,arguments)}class an{constructor(O){this.app=O}_delete(){return delete Si[this.app.options.appId],Promise.resolve()}}let Si={},xn=[];const jo={};let oo,Vs,Sr="dataLayer",Cs=!1;function El(M,O,H){!function Yu(){const M=[];if((0,le.ru)()&&M.push("This is a browser extension environment."),(0,le.zI)()||M.push("Cookies are not available."),M.length>0){const O=M.map((se,Oe)=>`(${Oe+1}) ${se}`).join(" "),H=Ai.create("invalid-analytics-context",{errorInfo:O});er.warn(H.message)}}();const se=M.options.appId;if(!se)throw Ai.create("no-app-id");if(!M.options.apiKey){if(!M.options.measurementId)throw Ai.create("no-api-key");er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${M.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Si[se])throw Ai.create("already-exists",{id:se});if(!Cs){!function ma(M){let O=[];Array.isArray(window[M])?O=window[M]:window[M]=O}(Sr);const{wrappedGtag:Ke,gtagCore:yt}=function ya(M,O,H,se,Oe){let Ke=function(...yt){window[se].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&(Ke=window[Oe]),window[Oe]=function qa(M,O,H,se){function Ke(){return(Ke=(0,C.Z)(function*(yt,Pt,hn){try{"event"===yt?yield Xo(M,O,H,Pt,hn):"config"===yt?yield qu(M,O,H,se,Pt,hn):"consent"===yt?M("consent","update",hn):M("set",Pt)}catch(En){er.error(En)}})).apply(this,arguments)}return function Oe(yt,Pt,hn){return Ke.apply(this,arguments)}}(Ke,M,O,H),{gtagCore:Ke,wrappedGtag:window[Oe]}}(Si,xn,jo,Sr,"gtag");Vs=Ke,oo=yt,Cs=!0}return Si[se]=function Bo(M,O,H,se,Oe,Ke,yt){return lr.apply(this,arguments)}(M,xn,jo,O,oo,Sr,H),new an(M)}function Xl(){return ns.apply(this,arguments)}function ns(){return(ns=(0,C.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const uo="@firebase/analytics";!function Hi(){(0,ge._registerComponent)(new we.wA(Ti,(O,{options:H})=>El(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),H),"PUBLIC")),(0,ge._registerComponent)(new we.wA("analytics-internal",function M(O){try{const H=O.getProvider(Ti).getImmediate();return{logEvent:(se,Oe,Ke)=>function We(M,O,H,se){M=(0,le.m9)(M),function vt(M,O,H,se,Oe){return Or.apply(this,arguments)}(Vs,Si[M.app.options.appId],O,H,se).catch(Oe=>er.error(Oe))}(H,se,Oe,Ke)}}catch(H){throw Ai.create("interop-component-reg-failed",{reason:H})}},"PRIVATE")),(0,ge.registerVersion)(uo,"0.8.0"),(0,ge.registerVersion)(uo,"0.8.0","esm2017")}();var _i=L(4408),Us=L(7565);const Ia=new class Io extends Us.v{}(class Ju extends _i.o{constructor(O,H){super(O,H),this.scheduler=O,this.work=H}schedule(O,H=0){return H>0?super.schedule(O,H):(this.delay=H,this.state=O,this.scheduler.flush(this),this)}execute(O,H){return H>0||this.closed?super.execute(O,H):this._execute(O,H)}requestAsyncId(O,H,se=0){return null!=se&&se>0||null==se&&this.delay>0?super.requestAsyncId(O,H,se):O.flush(this)}});var yu=L(4986),Pi=L(8505),ia=L(9468),Ws=L(5363);const ds=new p.GfV("7.4.1"),Pr="__angularfire_symbol__analyticsIsSupportedValue",_="__angularfire_symbol__analyticsIsSupported",E="__angularfire_symbol__remoteConfigIsSupportedValue",m="__angularfire_symbol__remoteConfigIsSupported",b="__angularfire_symbol__messagingIsSupportedValue",N="__angularfire_symbol__messagingIsSupported";function bt(M,O,H){if(O){if(1===O.length)return O[0];const Ke=O.filter(yt=>yt.app===H);if(1===Ke.length)return Ke[0]}return H.container.getProvider(M).getImmediate({optional:!0})}globalThis[_]||(globalThis[_]=Xl().then(M=>globalThis[Pr]=M).catch(()=>globalThis[Pr]=!1)),globalThis[N]||(globalThis[N]=Wt().then(M=>globalThis[b]=M).catch(()=>globalThis[b]=!1)),globalThis[m]||(globalThis[m]=ys().then(M=>globalThis[E]=M).catch(()=>globalThis[E]=!1));const Kt=(M,O)=>{const H=O?[O]:(0,k.C6)(),se=[];return H.forEach(Oe=>{Oe.container.getProvider(M).instances.forEach(yt=>{se.includes(yt)||se.push(yt)})}),se};function Ut(){}class Vn{constructor(O,H=Ia){this.zone=O,this.delegate=H}now(){return this.delegate.now()}schedule(O,H,se){const Oe=this.zone;return this.delegate.schedule(function(yt){Oe.runGuarded(()=>{O.apply(this,[yt])})},H,se)}}class ki{constructor(O){this.zone=O,this.task=null}call(O,H){const se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ut,{},Ut,Ut)),H.pipe((0,Pi.b)({next:se,complete:se,error:se})).subscribe(O).add(se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Gi=(()=>{class M{constructor(H){this.ngZone=H,this.outsideAngular=H.runOutsideAngular(()=>new Vn(Zone.current)),this.insideAngular=H.run(()=>new Vn(Zone.current,yu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return M.\u0275fac=function(H){return new(H||M)(p.LFG(p.R0b))},M.\u0275prov=p.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function rs(){const M=globalThis.\u0275AngularFireScheduler;if(!M)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return M}function bs(M){return rs(),function vu(M){return function(H){return(H=H.lift(new ki(M.ngZone))).pipe((0,ia.R)(M.outsideAngular),(0,Ws.Q)(M.insideAngular))}}(rs())(M)}},2090:(Rt,ke,L)=>{L.d(ke,{$s:()=>Zn,BH:()=>nt,G6:()=>Ge,L:()=>Ae,LL:()=>lt,Sg:()=>et,UG:()=>ze,US:()=>we,ZB:()=>ne,ZR:()=>Ne,b$:()=>Et,eu:()=>Me,hl:()=>X,jU:()=>De,m9:()=>nn,ne:()=>zn,pd:()=>Hn,r3:()=>yn,ru:()=>Dt,tV:()=>be,uI:()=>Tt,vZ:()=>rr,w1:()=>Je,xO:()=>br,xb:()=>Tn,z$:()=>Ve,zI:()=>ee,zd:()=>zt});const ge=function(me){const Q=[];let ue=0;for(let Ee=0;Ee<me.length;Ee++){let fe=me.charCodeAt(Ee);fe<128?Q[ue++]=fe:fe<2048?(Q[ue++]=fe>>6|192,Q[ue++]=63&fe|128):55296==(64512&fe)&&Ee+1<me.length&&56320==(64512&me.charCodeAt(Ee+1))?(fe=65536+((1023&fe)<<10)+(1023&me.charCodeAt(++Ee)),Q[ue++]=fe>>18|240,Q[ue++]=fe>>12&63|128,Q[ue++]=fe>>6&63|128,Q[ue++]=63&fe|128):(Q[ue++]=fe>>12|224,Q[ue++]=fe>>6&63|128,Q[ue++]=63&fe|128)}return Q},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,Q){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ue=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let fe=0;fe<me.length;fe+=3){const ot=me[fe],Ct=fe+1<me.length,Bt=Ct?me[fe+1]:0,$n=fe+2<me.length,_n=$n?me[fe+2]:0;let dn=(15&Bt)<<2|_n>>6,Qn=63&_n;$n||(Qn=64,Ct||(dn=64)),Ee.push(ue[ot>>2],ue[(3&ot)<<4|Bt>>4],ue[dn],ue[Qn])}return Ee.join("")},encodeString(me,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(me):this.encodeByteArray(ge(me),Q)},decodeString(me,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(me):function(me){const Q=[];let ue=0,Ee=0;for(;ue<me.length;){const fe=me[ue++];if(fe<128)Q[Ee++]=String.fromCharCode(fe);else if(fe>191&&fe<224){const ot=me[ue++];Q[Ee++]=String.fromCharCode((31&fe)<<6|63&ot)}else if(fe>239&&fe<365){const $n=((7&fe)<<18|(63&me[ue++])<<12|(63&me[ue++])<<6|63&me[ue++])-65536;Q[Ee++]=String.fromCharCode(55296+($n>>10)),Q[Ee++]=String.fromCharCode(56320+(1023&$n))}else{const ot=me[ue++],Ct=me[ue++];Q[Ee++]=String.fromCharCode((15&fe)<<12|(63&ot)<<6|63&Ct)}}return Q.join("")}(this.decodeStringToByteArray(me,Q))},decodeStringToByteArray(me,Q){this.init_();const ue=Q?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let fe=0;fe<me.length;){const ot=ue[me.charAt(fe++)],Bt=fe<me.length?ue[me.charAt(fe)]:0;++fe;const _n=fe<me.length?ue[me.charAt(fe)]:64;++fe;const pn=fe<me.length?ue[me.charAt(fe)]:64;if(++fe,null==ot||null==Bt||null==_n||null==pn)throw Error();Ee.push(ot<<2|Bt>>4),64!==_n&&(Ee.push(Bt<<4&240|_n>>2),64!==pn&&Ee.push(_n<<6&192|pn))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}},Ae=function(me){return function(me){const Q=ge(me);return we.encodeByteArray(Q,!0)}(me).replace(/\./g,"")},be=function(me){try{return we.decodeString(me,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function ne(me,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return Q}for(const ue in Q)!Q.hasOwnProperty(ue)||!re(ue)||(me[ue]=ne(me[ue],Q[ue]));return me}function re(me){return"__proto__"!==me}class nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Q,ue)=>{this.resolve=Q,this.reject=ue})}wrapCallback(Q){return(ue,Ee)=>{ue?this.reject(ue):this.resolve(Ee),"function"==typeof Q&&(this.promise.catch(()=>{}),1===Q.length?Q(ue):Q(ue,Ee))}}}function et(me,Q){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=Q||"demo-project",fe=me.iat||0,ot=me.sub||me.user_id;if(!ot)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:fe,exp:fe+3600,auth_time:fe,sub:ot,user_id:ot,firebase:{sign_in_provider:"custom",identities:{}}},me);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(Ct)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Tt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function De(){return"object"==typeof self&&self.self===self}function Dt(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function Et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Je(){const me=Ve();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function Ge(){return!ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){return"object"==typeof indexedDB}function Me(){return new Promise((me,Q)=>{try{let ue=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",fe=self.indexedDB.open(Ee);fe.onsuccess=()=>{fe.result.close(),ue||self.indexedDB.deleteDatabase(Ee),me(!0)},fe.onupgradeneeded=()=>{ue=!1},fe.onerror=()=>{var ot;Q((null===(ot=fe.error)||void 0===ot?void 0:ot.message)||"")}}catch(ue){Q(ue)}})}function ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor(Q,ue,Ee){super(ue),this.code=Q,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}}class lt{constructor(Q,ue,Ee){this.service=Q,this.serviceName=ue,this.errors=Ee}create(Q,...ue){const Ee=ue[0]||{},fe=`${this.service}/${Q}`,ot=this.errors[Q],Ct=ot?function pt(me,Q){return me.replace(_t,(ue,Ee)=>{const fe=Q[Ee];return null!=fe?String(fe):`<${Ee}?>`})}(ot,Ee):"Error";return new Ne(fe,`${this.serviceName}: ${Ct} (${fe}).`,Ee)}}const _t=/\{\$([^}]+)}/g;function yn(me,Q){return Object.prototype.hasOwnProperty.call(me,Q)}function Tn(me){for(const Q in me)if(Object.prototype.hasOwnProperty.call(me,Q))return!1;return!0}function rr(me,Q){if(me===Q)return!0;const ue=Object.keys(me),Ee=Object.keys(Q);for(const fe of ue){if(!Ee.includes(fe))return!1;const ot=me[fe],Ct=Q[fe];if(tr(ot)&&tr(Ct)){if(!rr(ot,Ct))return!1}else if(ot!==Ct)return!1}for(const fe of Ee)if(!ue.includes(fe))return!1;return!0}function tr(me){return null!==me&&"object"==typeof me}function br(me){const Q=[];for(const[ue,Ee]of Object.entries(me))Array.isArray(Ee)?Ee.forEach(fe=>{Q.push(encodeURIComponent(ue)+"="+encodeURIComponent(fe))}):Q.push(encodeURIComponent(ue)+"="+encodeURIComponent(Ee));return Q.length?"&"+Q.join("&"):""}function zt(me){const Q={};return me.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[fe,ot]=Ee.split("=");Q[decodeURIComponent(fe)]=decodeURIComponent(ot)}}),Q}function Hn(me){const Q=me.indexOf("?");if(!Q)return"";const ue=me.indexOf("#",Q);return me.substring(Q,ue>0?ue:void 0)}function zn(me,Q){const ue=new mt(me,Q);return ue.subscribe.bind(ue)}class mt{constructor(Q,ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ue,this.task.then(()=>{Q(this)}).catch(Ee=>{this.error(Ee)})}next(Q){this.forEachObserver(ue=>{ue.next(Q)})}error(Q){this.forEachObserver(ue=>{ue.error(Q)}),this.close(Q)}complete(){this.forEachObserver(Q=>{Q.complete()}),this.close()}subscribe(Q,ue,Ee){let fe;if(void 0===Q&&void 0===ue&&void 0===Ee)throw new Error("Missing Observer.");fe=function gn(me,Q){if("object"!=typeof me||null===me)return!1;for(const ue of Q)if(ue in me&&"function"==typeof me[ue])return!0;return!1}(Q,["next","error","complete"])?Q:{next:Q,error:ue,complete:Ee},void 0===fe.next&&(fe.next=Gn),void 0===fe.error&&(fe.error=Gn),void 0===fe.complete&&(fe.complete=Gn);const ot=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?fe.error(this.finalError):fe.complete()}catch{}}),this.observers.push(fe),ot}unsubscribeOne(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Q){if(!this.finalized)for(let ue=0;ue<this.observers.length;ue++)this.sendOne(ue,Q)}sendOne(Q,ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Q])try{ue(this.observers[Q])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(Q){this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gn(){}function Zn(me,Q=1e3,ue=2){const Ee=Q*Math.pow(ue,me),fe=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+fe)}function nn(me){return me&&me._delegate?me._delegate:me}},1678:(Rt,ke,L)=>{L.d(ke,{v:()=>p});class p{}},3565:(Rt,ke,L)=>{L.r(ke),L.d(ke,{ActoresModule:()=>_t});var p=L(6895),k=L(7001),C=L(4650),ge=L(1678),le=L(433),we=L(9153),Y=L(529);let Ae=(()=>{class Pe{constructor(Se){this._http=Se}listarPaises(){return this._http.get("https://restcountries.com/v2/all")}buscarpais(Se){return this._http.get("https://restcountries.com/v3.1/name/"+Se)}}return Pe.\u0275fac=function(Se){return new(Se||Pe)(C.LFG(Y.eN))},Pe.\u0275prov=C.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})();var be=L(3189);function K(Pe,dt){if(1&Pe){const Se=C.EpF();C.TgZ(0,"tr")(1,"td"),C._UZ(2,"img",4),C.qZA(),C.TgZ(3,"td"),C._uU(4),C.qZA(),C.TgZ(5,"td")(6,"button",5),C.NdJ("click",function(){const Ht=C.CHM(Se).$implicit,Nt=C.oxw();return C.KtG(Nt.selecionarPais(Ht.name))}),C._uU(7,"Selecionar Pais"),C.qZA()()()}if(2&Pe){const Se=dt.$implicit;C.xp6(2),C.s9C("src",Se.flags.png,C.LSH),C.xp6(2),C.hij(" ",Se.name,"")}}let ne=(()=>{class Pe{constructor(Se){this.api=Se,this.selecionarPaisEvent=new C.vpe}ngOnInit(){this.api.listarPaises().subscribe(Se=>{this.countryInfo=Se})}selecionarPais(Se){this.selecionarPaisEvent.emit(Se)}}return Pe.\u0275fac=function(Se){return new(Se||Pe)(C.Y36(Ae))},Pe.\u0275cmp=C.Xpm({type:Pe,selectors:[["app-tabla-paises"]],outputs:{selecionarPaisEvent:"selecionarPaisEvent"},decls:13,vars:5,consts:[["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["width","40","height","20",3,"src"],[1,"btn","btn-info","btn-small",3,"click"]],template:function(Se,at){1&Se&&(C.TgZ(0,"input",0),C.NdJ("ngModelChange",function(Ht){return at.filterTerm=Ht}),C.qZA(),C.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),C._uU(5,"Imagen"),C.qZA(),C.TgZ(6,"th",2),C._uU(7,"Pais"),C.qZA(),C.TgZ(8,"th",2),C._uU(9,"Selecionar"),C.qZA()()(),C.TgZ(10,"tbody"),C.YNc(11,K,8,2,"tr",3),C.ALo(12,"filter"),C.qZA()()),2&Se&&(C.Q6J("ngModel",at.filterTerm),C.xp6(11),C.Q6J("ngForOf",C.xi3(12,2,at.countryInfo,at.filterTerm)))},dependencies:[p.sg,le.Fj,le.JJ,le.On,be.Z]}),Pe})();function re(Pe,dt){1&Pe&&(C.TgZ(0,"small",25),C._uU(1," El nombre es requerido "),C.qZA())}function nt(Pe,dt){1&Pe&&(C.TgZ(0,"small",25),C._uU(1," El apellido es requerido "),C.qZA())}function et(Pe,dt){1&Pe&&(C.TgZ(0,"small",25),C._uU(1," La edad es requerida "),C.qZA())}function Ve(Pe,dt){1&Pe&&(C.TgZ(0,"small",25),C._uU(1," La edad debe ser de 18 a 99 a\xf1os "),C.qZA())}function Tt(Pe,dt){1&Pe&&(C.TgZ(0,"small",25),C._uU(1," El sexo es requerido "),C.qZA())}function ze(Pe,dt){1&Pe&&(C.TgZ(0,"small",25),C._uU(1," Nacionalidad es requerido "),C.qZA())}let De=(()=>{class Pe{constructor(Se,at,Vt){this._servicio=Se,this.fb=at,this._router=Vt,this.actor=new ge.v,this.altaForm=this.fb.group({nombre:["",le.kI.required],apellido:["",le.kI.required],nacionalidad:["",le.kI.required],edad:["",[le.kI.required,le.kI.min(18),le.kI.max(100)]],sexo:["",le.kI.required]})}ngOnInit(){}aceptar(){this.actor.nombre=this.altaForm.value.nombre?.toString(),this.actor.apellido=this.altaForm.value.apellido?.toString(),this.actor.edad=this.altaForm.value.edad?.toString(),this.actor.sexo=this.altaForm.value.sexo?.toString(),this.actor.nacionalidad=this.altaForm.value.nacionalidad?.toString(),this._servicio.crearActor(this.actor).then(()=>{this._router.navigate(["home"])})}paisSelecionado(Se){this.altaForm.get("nacionalidad")?.setValue(Se)}}return Pe.\u0275fac=function(Se){return new(Se||Pe)(C.Y36(we.H),C.Y36(le.qu),C.Y36(k.F0))},Pe.\u0275cmp=C.Xpm({type:Pe,selectors:[["app-alta"]],decls:45,vars:8,consts:[[1,"row","g-5"],[1,"col-md-5","col-lg-4","order-md-last"],[3,"selecionarPaisEvent"],[1,"col-md-7","col-lg-8"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12","mb-5"],[1,"row","formulario"],[1,"col-md-6","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","formControlName","nombre",1,"form-control"],["class","invalid",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","formControlName","apellido",1,"form-control"],["for","dni",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","formControlName","edad",1,"form-control"],["for","sexo",1,"form-label"],["id","sexo","formControlName","sexo",1,"form-select"],["value",""],["value","F"],["value","M"],["for","nacionalidad",1,"form-label"],["type","text","readonly","","id","nacionalidad","formControlName","nacionalidad",1,"form-control"],[1,"col-md-12","d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"invalid"]],template:function(Se,at){1&Se&&(C.TgZ(0,"div",0)(1,"div",1)(2,"app-tabla-paises",2),C.NdJ("selecionarPaisEvent",function(Ht){return at.paisSelecionado(Ht)}),C.qZA()(),C.TgZ(3,"div",3)(4,"form",4),C.NdJ("ngSubmit",function(){return at.aceptar()}),C.TgZ(5,"div",5)(6,"div",6)(7,"h2"),C._uU(8,"Angular Forms"),C.qZA()()(),C.TgZ(9,"div",7)(10,"div",8)(11,"label",9),C._uU(12,"Nombre"),C.qZA(),C._UZ(13,"input",10),C.YNc(14,re,2,0,"small",11),C.qZA(),C.TgZ(15,"div",8)(16,"label",12),C._uU(17,"Apellido"),C.qZA(),C._UZ(18,"input",13),C.YNc(19,nt,2,0,"small",11),C.qZA(),C.TgZ(20,"div",8)(21,"label",14),C._uU(22,"Edad"),C.qZA(),C._UZ(23,"input",15),C.YNc(24,et,2,0,"small",11),C.YNc(25,Ve,2,0,"small",11),C.qZA(),C.TgZ(26,"div",8)(27,"label",16),C._uU(28,"Sexo"),C.qZA(),C.TgZ(29,"select",17)(30,"option",18),C._uU(31,"Seleccione uno"),C.qZA(),C.TgZ(32,"option",19),C._uU(33,"Femenino"),C.qZA(),C.TgZ(34,"option",20),C._uU(35,"Masculino"),C.qZA()(),C.YNc(36,Tt,2,0,"small",11),C.qZA(),C.TgZ(37,"div",8)(38,"label",21),C._uU(39,"Nacionalidad"),C.qZA(),C._UZ(40,"input",22),C.YNc(41,ze,2,0,"small",11),C.qZA()(),C.TgZ(42,"div",23)(43,"button",24),C._uU(44," Aceptar "),C.qZA()()()()()),2&Se&&(C.xp6(4),C.Q6J("formGroup",at.altaForm),C.xp6(10),C.Q6J("ngIf",(null==at.altaForm.controls.nombre.errors?null:at.altaForm.controls.nombre.errors.required)&&at.altaForm.controls.nombre.touched),C.xp6(5),C.Q6J("ngIf",(null==at.altaForm.controls.apellido.errors?null:at.altaForm.controls.apellido.errors.required)&&at.altaForm.controls.apellido.touched),C.xp6(5),C.Q6J("ngIf",(null==at.altaForm.controls.edad.errors?null:at.altaForm.controls.edad.errors.required)&&at.altaForm.controls.edad.touched),C.xp6(1),C.Q6J("ngIf",(null==at.altaForm.controls.edad.errors?null:at.altaForm.controls.edad.errors.min)||(null==at.altaForm.controls.edad.errors?null:at.altaForm.controls.edad.errors.max)&&at.altaForm.controls.edad.touched),C.xp6(11),C.Q6J("ngIf",(null==at.altaForm.controls.sexo.errors?null:at.altaForm.controls.sexo.errors.required)&&at.altaForm.controls.sexo.touched),C.xp6(5),C.Q6J("ngIf",(null==at.altaForm.controls.nacionalidad.errors?null:at.altaForm.controls.nacionalidad.errors.required)&&at.altaForm.controls.nacionalidad.touched),C.xp6(2),C.Q6J("disabled",at.altaForm.invalid))},dependencies:[p.O5,le._Y,le.YN,le.Kr,le.Fj,le.wV,le.EJ,le.JJ,le.JL,le.sg,le.u,ne]}),Pe})(),Dt=(()=>{class Pe{constructor(){}ngOnInit(){}}return Pe.\u0275fac=function(Se){return new(Se||Pe)},Pe.\u0275cmp=C.Xpm({type:Pe,selectors:[["app-actores"]],decls:1,vars:0,template:function(Se,at){1&Se&&C._UZ(0,"app-alta")},dependencies:[De]}),Pe})();var Et=L(672),ce=L(4004);function Je(Pe,dt){if(1&Pe&&(C.TgZ(0,"div")(1,"li"),C._uU(2),C.qZA()()),2&Pe){const Se=dt.$implicit;C.xp6(2),C.hij(" ",Se.nombre,"")}}function Qe(Pe,dt){if(1&Pe&&(C.TgZ(0,"div"),C.YNc(1,Je,3,1,"div",1),C.qZA()),2&Pe){const Se=C.oxw();C.xp6(1),C.Q6J("ngForOf",Se.peliculas)}}let Be=(()=>{class Pe{constructor(Se){this._db=Se}ngOnInit(){}ngOnChanges(Se){Se.idActor&&this.mostrarPeliculasFiltradas()}mostrarPeliculasFiltradas(){this.peliculas=new Array,this._db.traerPeliculasPorActor(this.idActor).snapshotChanges().pipe((0,ce.U)(Se=>Se.map(at=>({id:at.payload.doc.id,...at.payload.doc.data()})))).subscribe(Se=>{this.peliculas=Se})}}return Pe.\u0275fac=function(Se){return new(Se||Pe)(C.Y36(we.H))},Pe.\u0275cmp=C.Xpm({type:Pe,selectors:[["app-listadopelicula-filtrado"]],inputs:{idActor:"idActor"},features:[C.TTD],decls:3,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(Se,at){1&Se&&(C.TgZ(0,"h5"),C._uU(1,"Las peliculas en las que actuo fueron:"),C.qZA(),C.YNc(2,Qe,2,1,"div",0)),2&Se&&(C.xp6(2),C.Q6J("ngIf",at.peliculas))},dependencies:[p.sg,p.O5]}),Pe})(),Ge=(()=>{class Pe{constructor(Se){this._servpais=Se}ngOnInit(){}ngOnChanges(Se){Se.nacionalidad&&this._servpais.buscarpais(this.nacionalidad).subscribe(at=>{this.countryInfo=at})}}return Pe.\u0275fac=function(Se){return new(Se||Pe)(C.Y36(Ae))},Pe.\u0275cmp=C.Xpm({type:Pe,selectors:[["app-informacion-pais"]],inputs:{nacionalidad:"nacionalidad"},features:[C.TTD],decls:19,vars:5,consts:[[1,"text-center"],["width","100",3,"src"]],template:function(Se,at){1&Se&&(C.TgZ(0,"div",0)(1,"h4"),C._uU(2,"Pais"),C.qZA(),C._uU(3),C.TgZ(4,"h4"),C._uU(5,"Bandera"),C.qZA(),C._UZ(6,"img",1),C.TgZ(7,"h4"),C._uU(8,"Capital:"),C.qZA(),C.TgZ(9,"p"),C._uU(10),C.qZA(),C.TgZ(11,"h4"),C._uU(12,"Region"),C.qZA(),C.TgZ(13,"p"),C._uU(14),C.qZA(),C.TgZ(15,"h4"),C._uU(16,"Poblaci\xf3n"),C.qZA(),C.TgZ(17,"p"),C._uU(18),C.qZA()()),2&Se&&(C.xp6(3),C.hij("",at.nacionalidad," "),C.xp6(3),C.s9C("src",at.countryInfo[0].flags.png,C.LSH),C.xp6(4),C.Oqu(at.countryInfo[0].capital[0]),C.xp6(4),C.Oqu(at.countryInfo[0].region),C.xp6(4),C.Oqu(at.countryInfo[0].population))}}),Pe})(),X=(()=>{class Pe{constructor(){}ngOnInit(){}ngOnChanges(Se){}}return Pe.\u0275fac=function(Se){return new(Se||Pe)},Pe.\u0275cmp=C.Xpm({type:Pe,selectors:[["app-detalles-actor"]],inputs:{actor:"actor"},features:[C.TTD],decls:13,vars:4,template:function(Se,at){1&Se&&(C.TgZ(0,"div")(1,"h5"),C._uU(2,"Nombre: "),C.qZA(),C._uU(3),C.TgZ(4,"h5"),C._uU(5,"Pais: "),C.qZA(),C._uU(6),C.TgZ(7,"h5"),C._uU(8,"Edad: "),C.qZA(),C._uU(9),C.TgZ(10,"h5"),C._uU(11,"sexo: "),C.qZA(),C._uU(12),C.qZA()),2&Se&&(C.xp6(3),C.hij("",at.actor.nombre," "),C.xp6(3),C.hij("",at.actor.nacionalidad," "),C.xp6(3),C.hij("",at.actor.edad," "),C.xp6(3),C.hij("",at.actor.sexo,"\n"))}}),Pe})();function Me(Pe,dt){if(1&Pe&&(C.TgZ(0,"div",6),C._UZ(1,"app-listadopelicula-filtrado",7),C.qZA()),2&Pe){const Se=C.oxw();C.xp6(1),C.Q6J("idActor",Se.actor.id)}}function ee(Pe,dt){if(1&Pe&&(C.TgZ(0,"div",8),C._UZ(1,"app-informacion-pais",9),C.qZA()),2&Pe){const Se=C.oxw();C.xp6(1),C.Q6J("nacionalidad",Se.actor.nacionalidad)}}function Ie(Pe,dt){if(1&Pe&&(C.TgZ(0,"div",8),C._UZ(1,"br")(2,"app-detalles-actor",10),C.qZA()),2&Pe){const Se=C.oxw();C.xp6(2),C.Q6J("actor",Se.actor)}}const Ne=[{path:"alta",component:De},{path:"listado",component:Et.W},{path:"actorpelicula",component:(()=>{class Pe{constructor(Se){this._db=Se,this.actor=new ge.v,this.unActor=ge.v}ngOnInit(){}obtenerActor(Se){this.actor=Se}}return Pe.\u0275fac=function(Se){return new(Se||Pe)(C.Y36(we.H))},Pe.\u0275cmp=C.Xpm({type:Pe,selectors:[["app-actorpelicula"]],inputs:{unActor:"unActor"},decls:10,vars:3,consts:[[1,"p-4","p-md-5","mb-4","rounded","text-bg-warning"],[1,"col-md-9","px-0"],[3,"selecionarActorEvent"],[1,"row","align-items-md-stretch","text-center"],["class","col-md-4 bg-light",4,"ngIf"],["class","col-md-4 border bg-light",4,"ngIf"],[1,"col-md-4","bg-light"],[3,"idActor"],[1,"col-md-4","border","bg-light"],[3,"nacionalidad"],[3,"actor"]],template:function(Se,at){1&Se&&(C.TgZ(0,"div")(1,"div",0)(2,"h4"),C._uU(3,"Lista de actores"),C.qZA(),C.TgZ(4,"div",1)(5,"app-listado-actor",2),C.NdJ("selecionarActorEvent",function(Ht){return at.obtenerActor(Ht)}),C.qZA()()()(),C.TgZ(6,"div",3),C.YNc(7,Me,2,1,"div",4),C.YNc(8,ee,2,1,"div",5),C.YNc(9,Ie,3,1,"div",5),C.qZA()),2&Se&&(C.xp6(7),C.Q6J("ngIf",at.actor.id),C.xp6(1),C.Q6J("ngIf",at.actor.nacionalidad),C.xp6(1),C.Q6J("ngIf",at.actor.id))},dependencies:[p.O5,Et.W,Be,Ge,X]}),Pe})()},{path:"",component:Dt}];let lt=(()=>{class Pe{}return Pe.\u0275fac=function(Se){return new(Se||Pe)},Pe.\u0275mod=C.oAB({type:Pe}),Pe.\u0275inj=C.cJS({imports:[k.Bz.forChild(Ne),k.Bz]}),Pe})();var pt=L(5215);let _t=(()=>{class Pe{}return Pe.\u0275fac=function(Se){return new(Se||Pe)},Pe.\u0275mod=C.oAB({type:Pe}),Pe.\u0275inj=C.cJS({imports:[p.ez,lt,le.u5,le.UX,pt.CompartidosModule]}),Pe})()},672:(Rt,ke,L)=>{L.d(ke,{W:()=>we});var p=L(4650),k=L(4004),C=L(9153),ge=L(6895);function le(Y,Ae){if(1&Y){const be=p.EpF();p.TgZ(0,"tr")(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td")(12,"button",3),p.NdJ("click",function(){const re=p.CHM(be).$implicit,nt=p.oxw();return p.KtG(nt.selecionarActor(re))}),p._uU(13,"selecione"),p.qZA()()()}if(2&Y){const be=Ae.$implicit;p.xp6(2),p.Oqu(be.nombre),p.xp6(2),p.Oqu(be.apellido),p.xp6(2),p.Oqu(be.nacionalidad),p.xp6(2),p.Oqu(be.sexo),p.xp6(2),p.Oqu(be.edad)}}let we=(()=>{class Y{constructor(be){this._db=be,this.selecionarActorEvent=new p.vpe}ngOnInit(){this.obtenerListado()}obtenerListado(){this._db.trearActores().snapshotChanges().pipe((0,k.U)(be=>be.map(K=>({id:K.payload.doc.id,...K.payload.doc.data()})))).subscribe(be=>{this.arrayActores=be})}selecionarActor(be){this.selecionarActorEvent.emit(be)}}return Y.\u0275fac=function(be){return new(be||Y)(p.Y36(C.H))},Y.\u0275cmp=p.Xpm({type:Y,selectors:[["app-listado-actor"]],outputs:{selecionarActorEvent:"selecionarActorEvent"},decls:17,vars:1,consts:[[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-info",3,"click"]],template:function(be,K){1&be&&(p.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),p._uU(4,"Nombre"),p.qZA(),p.TgZ(5,"th",1),p._uU(6,"Apellido"),p.qZA(),p.TgZ(7,"th",1),p._uU(8,"Nacionalidad"),p.qZA(),p.TgZ(9,"th",1),p._uU(10,"Sexo"),p.qZA(),p.TgZ(11,"th",1),p._uU(12,"Edad"),p.qZA(),p.TgZ(13,"th",1),p._uU(14,"Selecionar"),p.qZA()()(),p.TgZ(15,"tbody"),p.YNc(16,le,14,5,"tr",2),p.qZA()()),2&be&&(p.xp6(16),p.Q6J("ngForOf",K.arrayActores))},dependencies:[ge.sg]}),Y})()},5215:(Rt,ke,L)=>{L.r(ke),L.d(ke,{CompartidosModule:()=>be});var p=L(6895),k=L(7001),C=L(4650);const le=[{path:"",component:(()=>{class K{constructor(){}ngOnInit(){}}return K.\u0275fac=function(re){return new(re||K)},K.\u0275cmp=C.Xpm({type:K,selectors:[["app-compartidos"]],decls:2,vars:0,template:function(re,nt){1&re&&(C.TgZ(0,"p"),C._uU(1,"compartidos works!"),C.qZA())}}),K})()}];let we=(()=>{class K{}return K.\u0275fac=function(re){return new(re||K)},K.\u0275mod=C.oAB({type:K}),K.\u0275inj=C.cJS({imports:[k.Bz.forChild(le),k.Bz]}),K})();var Y=L(433),Ae=L(3189);let be=(()=>{class K{}return K.\u0275fac=function(re){return new(re||K)},K.\u0275mod=C.oAB({type:K}),K.\u0275inj=C.cJS({imports:[p.ez,we,Y.u5,Ae.h]}),K})()},6054:(Rt,ke,L)=>{L.d(ke,{W:()=>be});var p=L(4004),k=L(4650),C=L(9153),ge=L(6895);function le(K,ne){if(1&K){const re=k.EpF();k.TgZ(0,"tr")(1,"th",3),k._uU(2),k.qZA(),k.TgZ(3,"td"),k._uU(4),k.qZA(),k.TgZ(5,"td"),k._uU(6),k.qZA(),k.TgZ(7,"td"),k._uU(8),k.qZA(),k.TgZ(9,"td"),k._uU(10),k.qZA(),k.TgZ(11,"td"),k._UZ(12,"img",4),k.qZA(),k.TgZ(13,"td")(14,"button",5),k.NdJ("click",function(){const Ve=k.CHM(re).$implicit,Tt=k.oxw();return k.KtG(Tt.onSelect(Ve))}),k._uU(15,"Ver Detalle"),k.qZA()()()}if(2&K){const re=ne.$implicit;k.xp6(2),k.Oqu(re.id),k.xp6(2),k.Oqu(re.nombre),k.xp6(2),k.Oqu(re.tipo),k.xp6(2),k.Oqu(re.fechaDeEstreno),k.xp6(2),k.Oqu(re.cantidadDePublico),k.xp6(2),k.Q6J("src",re.fotoDeLaPelicula,k.LSH)("height",100)}}let we=(()=>{class K{constructor(){this.peliculaEvent=new k.vpe}ngOnInit(){}onSelect(re){this.peliculaEvent.emit(re)}}return K.\u0275fac=function(re){return new(re||K)},K.\u0275cmp=k.Xpm({type:K,selectors:[["app-tabla-pelicula"]],inputs:{listadoPeliculas:"listadoPeliculas"},outputs:{peliculaEvent:"peliculaEvent"},decls:19,vars:1,consts:[[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["width","100",3,"src","height"],["type","button",3,"click"]],template:function(re,nt){1&re&&(k.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),k._uU(4,"#"),k.qZA(),k.TgZ(5,"th",1),k._uU(6,"Nombre"),k.qZA(),k.TgZ(7,"th",1),k._uU(8,"tipo"),k.qZA(),k.TgZ(9,"th",1),k._uU(10,"Fecha de Estreno"),k.qZA(),k.TgZ(11,"th",1),k._uU(12,"Cantidad de publico"),k.qZA(),k.TgZ(13,"th",1),k._uU(14,"Foto de la Pelicula"),k.qZA(),k.TgZ(15,"th",1),k._uU(16,"Ver Detalle"),k.qZA()()(),k.TgZ(17,"tbody"),k.YNc(18,le,16,7,"tr",2),k.qZA()()),2&re&&(k.xp6(18),k.Q6J("ngForOf",nt.listadoPeliculas))},dependencies:[ge.sg]}),K})();function Y(K,ne){if(1&K&&(k.TgZ(0,"div")(1,"h2"),k._uU(2),k.ALo(3,"uppercase"),k.qZA(),k.TgZ(4,"div")(5,"span"),k._uU(6,"Actor: "),k.qZA(),k._uU(7),k.qZA(),k.TgZ(8,"div")(9,"span"),k._uU(10,"Pais: "),k.qZA(),k._uU(11),k.qZA(),k.TgZ(12,"div")(13,"span"),k._uU(14,"Pais: "),k.qZA(),k._uU(15),k.qZA(),k.TgZ(16,"div")(17,"span"),k._uU(18,"Pais: "),k.qZA(),k._uU(19),k.qZA(),k.TgZ(20,"div")(21,"span"),k._uU(22,"Fecha de estreno: "),k.qZA(),k._uU(23),k.qZA()()),2&K){const re=k.oxw();k.xp6(2),k.hij("",k.lcZ(3,6,re.unaPeli.nombre)," Detalles"),k.xp6(5),k.Oqu(re.unaPeli.Actor.nombre),k.xp6(4),k.hij(" ",re.unaPeli.Actor.nacionalidad,""),k.xp6(4),k.hij(" ",re.unaPeli.Actor.sexo,""),k.xp6(4),k.hij(" ",re.unaPeli.Actor.edad,""),k.xp6(4),k.Oqu(re.unaPeli.fechaDeEstreno)}}let Ae=(()=>{class K{constructor(){}ngOnInit(){}}return K.\u0275fac=function(re){return new(re||K)},K.\u0275cmp=k.Xpm({type:K,selectors:[["app-detalle-pelicula"]],inputs:{unaPeli:"unaPeli"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(re,nt){1&re&&k.YNc(0,Y,24,8,"div",0),2&re&&k.Q6J("ngIf",nt.unaPeli)},dependencies:[ge.O5,ge.gd]}),K})(),be=(()=>{class K{constructor(re){this._db=re}ngOnInit(){this._db.trearTodasLasPelis().snapshotChanges().pipe((0,p.U)(re=>re.map(nt=>({id:nt.payload.doc.id,...nt.payload.doc.data()})))).subscribe(re=>{this.peliculas=re})}mostrar(re){this.selectedPelicula=re}}return K.\u0275fac=function(re){return new(re||K)(k.Y36(C.H))},K.\u0275cmp=k.Xpm({type:K,selectors:[["app-listado"]],decls:2,vars:2,consts:[[3,"listadoPeliculas","peliculaEvent"],[3,"unaPeli"]],template:function(re,nt){1&re&&(k.TgZ(0,"app-tabla-pelicula",0),k.NdJ("peliculaEvent",function(Ve){return nt.mostrar(Ve)}),k.qZA(),k._UZ(1,"app-detalle-pelicula",1)),2&re&&(k.Q6J("listadoPeliculas",nt.peliculas),k.xp6(1),k.Q6J("unaPeli",nt.selectedPelicula))},dependencies:[we,Ae]}),K})()},1884:(Rt,ke,L)=>{L.r(ke),L.d(ke,{PeliculasModule:()=>Qe});var p=L(6895),k=L(7001),C=L(433),ge=L(1678);class le{constructor(){this.Actor=new ge.v}}var we=(()=>{return(Be=we||(we={})).Terror="Terror",Be.Comedia="Comedia",Be.Amor="Amor",Be.Otros="Otros",we;var Be})(),Y=L(4650),Ae=L(9153),be=L(672);function K(Be,Ge){1&Be&&(Y.TgZ(0,"small",23),Y._uU(1," El nombre es requerido "),Y.qZA())}function ne(Be,Ge){if(1&Be&&(Y.TgZ(0,"option",24),Y._uU(1),Y.qZA()),2&Be){const X=Ge.$implicit;Y.Q6J("value",X),Y.xp6(1),Y.hij(" ",X," ")}}function re(Be,Ge){1&Be&&(Y.TgZ(0,"small",23),Y._uU(1," El tipo de pelicula es requerido "),Y.qZA())}function nt(Be,Ge){1&Be&&(Y.TgZ(0,"small",23),Y._uU(1," La fecha es requerida "),Y.qZA())}function et(Be,Ge){1&Be&&(Y.TgZ(0,"small",23),Y._uU(1," La cantidad del publico tiene que ser de 1 a 100000 "),Y.qZA())}function Ve(Be,Ge){1&Be&&(Y.TgZ(0,"small",23),Y._uU(1," La cantidad de publico es requerido "),Y.qZA())}function Tt(Be,Ge){1&Be&&(Y.TgZ(0,"small",23),Y._uU(1," Nacionalidad es requerido "),Y.qZA())}let ze=(()=>{class Be{constructor(X,Me,ee){this._servicio=X,this.fb=Me,this._router=ee,this.pelicula=new le,this.tipoPeliculas=Object.values(we),this.actor=new ge.v,this.altaForm=this.fb.group({nombre:["",C.kI.required],tipo:["",C.kI.required],fecha:["",C.kI.required],cantidadDePublico:["",[C.kI.required,C.kI.min(0),C.kI.max(1e5)]],actor:["",C.kI.required]})}ngOnInit(){}guardarPelicula(){this.pelicula.nombre=this.altaForm.value.nombre?.toString(),this.pelicula.tipo=we[this.altaForm.value.tipo?.toString()],this.pelicula.cantidadDePublico=Number(this.altaForm.value.cantidadDePublico?.toString()),this.pelicula.fechaDeEstreno=this.altaForm.value.fecha?.toString(),this.pelicula.fotoDeLaPelicula="assets/Imagenes/Pelicula.jpg",this.pelicula.Actor=this.actor,this._servicio.crearPelicula(this.pelicula).then(()=>{this._router.navigate(["home"])})}obtenerActor(X){this.actor=X,this.altaForm.get("actor")?.setValue(X.nombre+" "+X.apellido),console.log(X)}}return Be.\u0275fac=function(X){return new(X||Be)(Y.Y36(Ae.H),Y.Y36(C.qu),Y.Y36(k.F0))},Be.\u0275cmp=Y.Xpm({type:Be,selectors:[["app-alta"]],decls:40,vars:9,consts:[[1,"row","g-5"],[1,"col-md-4","col-lg-3","order-md-last"],[3,"selecionarActorEvent"],[1,"col-md-6","col-lg-7"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12","mb-5"],[1,"row","formulario"],[1,"col-md-6","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre de pelicula","formControlName","nombre",1,"form-control"],["class","invalid",4,"ngIf"],["for","tipo",1,"form-label"],["id","tipo","placeholder","Selecione el tipo","formControlName","tipo",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","fecha",1,"form-label"],["type","date","id","fecha","placeholder","Selecione fecha","formControlName","fecha",1,"form-control"],["for","cantidadDePublico",1,"form-label"],["type","number","id","cantidadDePublico","formControlName","cantidadDePublico",1,"form-control"],["for","actor",1,"form-label"],["type","text","readonly","","id","actor","formControlName","actor",1,"form-control"],[1,"col-md-12","d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"invalid"],[3,"value"]],template:function(X,Me){1&X&&(Y.TgZ(0,"div",0)(1,"div",1)(2,"app-listado-actor",2),Y.NdJ("selecionarActorEvent",function(Ie){return Me.obtenerActor(Ie)}),Y.qZA()(),Y.TgZ(3,"div",3)(4,"form",4),Y.NdJ("ngSubmit",function(){return Me.guardarPelicula()}),Y.TgZ(5,"div",5)(6,"div",6)(7,"h2"),Y._uU(8,"Angular Forms"),Y.qZA()()(),Y.TgZ(9,"div",7)(10,"div",8)(11,"label",9),Y._uU(12,"Nombre"),Y.qZA(),Y._UZ(13,"input",10),Y.YNc(14,K,2,0,"small",11),Y.qZA(),Y.TgZ(15,"div",8)(16,"label",12),Y._uU(17,"Tipo"),Y.qZA(),Y.TgZ(18,"select",13),Y.YNc(19,ne,2,2,"option",14),Y.qZA(),Y.YNc(20,re,2,0,"small",11),Y.qZA(),Y.TgZ(21,"div",8)(22,"label",15),Y._uU(23,"Fecha de Estreno"),Y.qZA(),Y._UZ(24,"input",16),Y.YNc(25,nt,2,0,"small",11),Y.YNc(26,et,2,0,"small",11),Y.qZA(),Y.TgZ(27,"div",8)(28,"label",17),Y._uU(29,"Cantidad de publico"),Y.qZA(),Y._UZ(30,"input",18),Y.YNc(31,Ve,2,0,"small",11),Y.qZA(),Y.TgZ(32,"div",8)(33,"label",19),Y._uU(34,"Actor"),Y.qZA(),Y._UZ(35,"input",20),Y.YNc(36,Tt,2,0,"small",11),Y.qZA(),Y.TgZ(37,"div",21)(38,"button",22),Y._uU(39," Aceptar "),Y.qZA()()()()()()),2&X&&(Y.xp6(4),Y.Q6J("formGroup",Me.altaForm),Y.xp6(10),Y.Q6J("ngIf",(null==Me.altaForm.controls.nombre.errors?null:Me.altaForm.controls.nombre.errors.required)&&Me.altaForm.controls.nombre.touched),Y.xp6(5),Y.Q6J("ngForOf",Me.tipoPeliculas),Y.xp6(1),Y.Q6J("ngIf",(null==Me.altaForm.controls.tipo.errors?null:Me.altaForm.controls.tipo.errors.required)&&Me.altaForm.controls.tipo.touched),Y.xp6(5),Y.Q6J("ngIf",(null==Me.altaForm.controls.fecha.errors?null:Me.altaForm.controls.fecha.errors.required)&&Me.altaForm.controls.fecha.touched),Y.xp6(1),Y.Q6J("ngIf",(null==Me.altaForm.controls.fecha.errors?null:Me.altaForm.controls.fecha.errors.min)||(null==Me.altaForm.controls.fecha.errors?null:Me.altaForm.controls.fecha.errors.max)&&Me.altaForm.controls.fecha.touched),Y.xp6(5),Y.Q6J("ngIf",(null==Me.altaForm.controls.cantidadDePublico.errors?null:Me.altaForm.controls.cantidadDePublico.errors.required)&&Me.altaForm.controls.cantidadDePublico.touched),Y.xp6(5),Y.Q6J("ngIf",(null==Me.altaForm.controls.actor.errors?null:Me.altaForm.controls.actor.errors.required)&&Me.altaForm.controls.actor.touched),Y.xp6(2),Y.Q6J("disabled",Me.altaForm.invalid))},dependencies:[p.sg,p.O5,C._Y,C.YN,C.Kr,C.Fj,C.wV,C.EJ,C.JJ,C.JL,C.sg,C.u,be.W]}),Be})();var De=L(6054);const Et=[{path:"alta",component:ze},{path:"listado",component:De.W},{path:"",component:(()=>{class Be{constructor(){}ngOnInit(){}}return Be.\u0275fac=function(X){return new(X||Be)},Be.\u0275cmp=Y.Xpm({type:Be,selectors:[["app-peliculas"]],decls:2,vars:0,template:function(X,Me){1&X&&Y._UZ(0,"app-alta")(1,"app-listado")},dependencies:[De.W,ze]}),Be})()}];let ce=(()=>{class Be{}return Be.\u0275fac=function(X){return new(X||Be)},Be.\u0275mod=Y.oAB({type:Be}),Be.\u0275inj=Y.cJS({imports:[k.Bz.forChild(Et),k.Bz]}),Be})();var Je=L(3565);let Qe=(()=>{class Be{}return Be.\u0275fac=function(X){return new(X||Be)},Be.\u0275mod=Y.oAB({type:Be}),Be.\u0275inj=Y.cJS({imports:[p.ez,ce,C.u5,C.UX,Je.ActoresModule]}),Be})()},9153:(Rt,ke,L)=>{L.d(ke,{H:()=>Af});var p=L(4650),k=L(4986),C=L(9751),ge=L(8996),le=L(9646),we=L(5813),Y=L(8675),Ae=L(4482),be=L(5403);function K(){return(0,Ae.e)((i,e)=>{let t,o=!1;i.subscribe((0,be.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ne=L(4004),re=L(5026),nt=L(4671);function Ve(i,e){return i===e}var ee,Tt=L(9300),ze=L(2011),De=L(6895),Et=(L(2476),L(3942)),ce=L(5861),Je=L(9681),Qe=L(4859),Be=L(1877),Ge=L(2090),X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Me={},Ie=Ie||{},he=X||self;function Ne(){}function lt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function pt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Pe="closure_uid_"+(1e9*Math.random()>>>0),dt=0;function Se(i,e,t){return i.call.apply(i.bind,arguments)}function at(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Vt(i,e,t){return(Vt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Se:at).apply(null,arguments)}function Ht(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Nt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var g=Array(arguments.length-2),D=2;D<arguments.length;D++)g[D-2]=arguments[D];return e.prototype[u].apply(o,g)}}function yn(){this.s=this.s,this.o=this.o}var Tn={};yn.prototype.s=!1,yn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function _t(i){return Object.prototype.hasOwnProperty.call(i,Pe)&&i[Pe]||(i[Pe]=++dt)}(this);delete Tn[i]}},yn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kr=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function rr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function tr(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(lt(o)){const u=i.length||0,d=o.length||0;i.length=u+d;for(let g=0;g<d;g++)i[u+g]=o[g]}else i.push(o)}}function In(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}In.prototype.h=function(){this.defaultPrevented=!0};var br=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{he.addEventListener("test",Ne,e),he.removeEventListener("test",Ne,e)}catch{}return i}();function zt(i){return/^[\s\xa0]*$/.test(i)}var Hn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function or(i,e){return i<e?-1:i>e?1:0}function zn(){var i=he.navigator;return i&&(i=i.userAgent)?i:""}function mt(i){return-1!=zn().indexOf(i)}function Un(i){return Un[" "](i),i}Un[" "]=Ne;var $e,i,Gn=mt("Opera"),_r=mt("Trident")||mt("MSIE"),Yr=mt("Edge"),fr=Yr||_r,Ze=mt("Gecko")&&!(-1!=zn().toLowerCase().indexOf("webkit")&&!mt("Edge"))&&!(mt("Trident")||mt("MSIE"))&&!mt("Edge"),ye=-1!=zn().toLowerCase().indexOf("webkit")&&!mt("Edge");function ae(){var i=he.document;return i?i.documentMode:void 0}e:{var it="",Ft=(i=zn(),Ze?/rv:([^\);]+)(\)|;)/.exec(i):Yr?/Edge\/([\d\.]+)/.exec(i):_r?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ye?/WebKit\/(\S+)/.exec(i):Gn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ft&&(it=Ft?Ft[1]:""),_r){var Xt=ae();if(null!=Xt&&Xt>parseFloat(it)){$e=String(Xt);break e}}$e=it}var An={};var Tr=he.document&&_r&&(ae()||parseInt($e,10))||void 0;function nn(i,e){if(In.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ze){e:{try{Un(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:me[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&nn.X.h.call(this)}}Nt(nn,In);var me={2:"touch",3:"pen",4:"mouse"};nn.prototype.h=function(){nn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),ue=0;function Ee(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++ue,this.ba=this.ea=!1}function fe(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function ot(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Ct(i){const e={};for(const t in i)e[t]=i[t];return e}const Bt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $n(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<Bt.length;d++)t=Bt[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function _n(i){this.src=i,this.g={},this.h=0}function Wn(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Kr(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(fe(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function pn(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ba&&d.listener==e&&d.capture==!!t&&d.ha==o)return u}return-1}_n.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=pn(i,e,o,u);return-1<g?(e=i[g],t||(e.ea=!1)):((e=new Ee(e,this.src,d,!!o,u)).ea=t,i.push(e)),e};var dn="closure_lm_"+(1e6*Math.random()|0),Qn={};function ar(i,e,t,o,u){if(o&&o.once)return pr(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)ar(i,e[d],t,o,u);return null}return t=ln(t),i&&i[Q]?i.N(e,t,pt(o)?!!o.capture:!!o,u):kr(i,e,t,!1,o,u)}function kr(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var g=pt(u)?!!u.capture:!!u,D=st(i);if(D||(i[dn]=D=new _n(i)),(t=D.add(e,t,o,g,d)).proxy)return t;if(o=function Fr(){const e=Le;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)br||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(te(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function pr(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)pr(i,e[d],t,o,u);return null}return t=ln(t),i&&i[Q]?i.O(e,t,pt(o)?!!o.capture:!!o,u):kr(i,e,t,!0,o,u)}function ve(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)ve(i,e[d],t,o,u);else o=pt(o)?!!o.capture:!!o,t=ln(t),i&&i[Q]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=pn(d=i.g[e],t,o,u))&&(fe(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=st(i))&&(e=i.g[e.toString()],i=-1,e&&(i=pn(e,t,o,u)),(t=-1<i?e[i]:null)&&de(t))}function de(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Q])Wn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(te(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=st(e))?(Wn(t,i),0==t.h&&(t.src=null,e[dn]=null)):fe(i)}}}function te(i){return i in Qn?Qn[i]:Qn[i]="on"+i}function Le(i,e){if(i.ba)i=!0;else{e=new nn(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&de(i),i=t.call(o,e)}return i}function st(i){return(i=i[dn])instanceof _n?i:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(i){return"function"==typeof i?i:(i[jt]||(i[jt]=function(e){return i.handleEvent(e)}),i[jt])}function Yt(){yn.call(this),this.i=new _n(this),this.P=this,this.I=null}function Dn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new In(e,i);else if(e instanceof In)e.target=e.target||i;else{var u=e;$n(e=new In(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=jr(g,o,!0,e)&&u}if(u=jr(g=e.g=i,o,!0,e)&&u,u=jr(g,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=jr(g=e.g=t[d],o,!1,e)&&u}function jr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ba&&g.capture==t){var D=g.listener,F=g.ha||g.src;g.ea&&Wn(i.i,g),u=!1!==D.call(F,o)&&u}}return u&&!o.defaultPrevented}Nt(Yt,yn),Yt.prototype[Q]=!0,Yt.prototype.removeEventListener=function(i,e,t,o){ve(this,i,e,t,o)},Yt.prototype.M=function(){if(Yt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)fe(t[o]);delete i.g[e],i.h--}}this.I=null},Yt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Yt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var cn=he.JSON.stringify;function nr(){var i=Ii;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Mi,gs=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Ui,i=>i.reset());class Ui{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ar(i){he.setTimeout(()=>{throw i},0)}function ss(i,e){Mi||function xr(){var i=he.Promise.resolve(void 0);Mi=function(){i.then(Jn)}}(),gr||(Mi(),gr=!0),Ii.add(i,e)}var gr=!1,Ii=new class $r{constructor(){this.h=this.g=null}add(e,t){const o=gs.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Jn(){for(var i;i=nr();){try{i.h.call(i.g)}catch(t){Ar(t)}var e=gs;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}gr=!1}function xs(i,e){Yt.call(this),this.h=i||1,this.g=e||he,this.j=Vt(this.kb,this),this.l=Date.now()}function Ki(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function ti(i,e,t){if("function"==typeof i)t&&(i=Vt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Vt(i.handleEvent,i)}return 2147483647<Number(e)?-1:he.setTimeout(i,e||0)}function os(i){i.g=ti(()=>{i.g=null,i.i&&(i.i=!1,os(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Nt(xs,Yt),(ee=xs.prototype).ca=!1,ee.R=null,ee.kb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Dn(this,"tick"),this.ca&&(Ki(this),this.start()))}},ee.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ee.M=function(){xs.X.M.call(this),Ki(this),delete this.g};class xi extends yn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:os(this)}M(){super.M(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(i){yn.call(this),this.h=i,this.g={}}Nt(ni,yn);var Bi=[];function Er(i,e,t,o){Array.isArray(t)||(t&&(Bi[0]=t.toString()),t=Bi);for(var u=0;u<t.length;u++){var d=ar(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Ri(i){ot(i.g,function(e,t){this.g.hasOwnProperty(t)&&de(e)},i),i.g={}}function wr(){this.g=!0}function Qr(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ir(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return cn(t)}catch{return e}}(i,t)+(o?" "+o:"")})}ni.prototype.M=function(){ni.X.M.call(this),Ri(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wr.prototype.Aa=function(){this.g=!1},wr.prototype.info=function(){};var ji={},ms=null;function $s(){return ms=ms||new Yt}function ho(i){In.call(this,ji.Oa,i)}function Hs(i){const e=$s();Dn(e,new ho(e,i))}function Lr(i,e){In.call(this,ji.STAT_EVENT,i),this.stat=e}function Ce(i){const e=$s();Dn(e,new Lr(e,i))}function xe(i,e){In.call(this,ji.Pa,i),this.size=e}function Fe(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){i()},e)}ji.Oa="serverreachability",Nt(ho,In),ji.STAT_EVENT="statevent",Nt(Lr,In),ji.Pa="timingevent",Nt(xe,In);var ut={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},St={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zt(){}function ri(){}Zt.prototype.h=null;var Rs,Fn={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function hi(){In.call(this,"d")}function Gs(){In.call(this,"c")}function ii(){}function si(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new ni(this),this.O=ys,this.T=new xs(i=fr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}Nt(hi,In),Nt(Gs,In),Nt(ii,Zt),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},Rs=new ii;var ys=45e3,fo={},Di={};function Ci(i,e,t){i.K=1,i.v=Ji(gi(e)),i.s=t,i.P=!0,oi(i,null)}function oi(i,e){i.F=Date.now(),_s(i),i.A=gi(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Ns(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Ni,i.g=Fs(i.l,t?e:null,!i.s),0<i.N&&(i.L=new xi(Vt(i.Ka,i,i.g),i.N)),Er(i.S,i.g,"readystatechange",i.hb),e=i.H?Ct(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Hs(1),function Zr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var g="",D=d.split("&"),F=0;F<D.length;F++){var j=D[F].split("=");if(1<j.length){var q=j[0];j=j[1];var _e=q.split("_");g=2<=_e.length&&"type"==_e[1]?g+(q+"=")+j+"&":g+(q+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Yi(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Qs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=vs(i,t),u==Di){4==e&&(i.o=4,Ce(14),o=!1),Qr(i.j,i.m,null,"[Incomplete Response]");break}if(u==fo){i.o=4,Ce(15),Qr(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Qr(i.j,i.m,u,null),pi(i,u)}Yi(i)&&u!=Di&&u!=fo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ce(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ur(e),e.K=!0,Ce(11))):(Qr(i.j,i.m,t,"[Invalid Chunked Response]"),Rr(i),fi(i))}function vs(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Di:(t=Number(e.substring(t,o)),isNaN(t)?fo:(o+=1)+t>e.length?Di:(e=e.substr(o,t),i.C=o+t,e))}function _s(i){i.V=Date.now()+i.O,Po(i,i.O)}function Po(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Fe(Vt(i.fb,i),e)}function Qi(i){i.B&&(he.clearTimeout(i.B),i.B=null)}function fi(i){0==i.l.G||i.I||ks(i.l,i)}function Rr(i){Qi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ki(i.T),Ri(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function pi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Zs(t.h,i)))if(!i.J&&Zs(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;ur(t),G(t)}Mn(t),Ce(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=Fe(Vt(t.bb,t),6e3));if(1>=Os(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ti(t,11)}else if((i.J||t.g==i)&&ur(t),!zt(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let j=u[e];if(t.T=j[0],j=j[1],2==t.G)if("c"==j[0]){t.I=j[1],t.ka=j[2];const q=j[3];null!=q&&(t.ma=q,t.j.info("VER="+t.ma));const _e=j[4];null!=_e&&(t.Ca=_e,t.j.info("SVER="+t.Ca));const Ue=j[5];null!=Ue&&"number"==typeof Ue&&0<Ue&&(t.J=o=1.5*Ue,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const ct=i.g;if(ct){const ft=ct.g?ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ft){var d=o.h;d.g||-1==ft.indexOf("spdy")&&-1==ft.indexOf("quic")&&-1==ft.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(Dr(d,d.h),d.h=null))}if(o.D){const $t=ct.g?ct.g.getResponseHeader("X-HTTP-Session-Id"):null;$t&&(o.za=$t,Ln(o.F,o.D,$t))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var g=i;if((o=t).sa=Ds(o,o.H?o.ka:null,o.V),g.J){ws(o.h,g);var D=g,F=o.J;F&&D.setTimeout(F),D.B&&(Qi(D),_s(D)),o.g=g}else Yn(o);0<t.i.length&&He(t)}else"stop"!=j[0]&&"close"!=j[0]||Ti(t,7);else 3==t.G&&("stop"==j[0]||"close"==j[0]?"stop"==j[0]?Ti(t,7):x(t):"noop"!=j[0]&&t.l&&t.l.wa(j),t.A=0)}Hs(4)}catch{}}function ai(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(lt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Zo(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(lt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Oi(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(lt(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}(ee=si.prototype).setTimeout=function(i){this.O=i},ee.hb=function(i){i=i.target;const e=this.L;e&&3==ls(i)?e.l():this.Ka(i)},ee.Ka=function(i){try{if(i==this.g)e:{const q=ls(this.g);var e=this.g.Ea();const _e=this.g.aa();if(!(3>q)&&(3!=q||fr||this.g&&(this.h.h||this.g.fa()||ga(this.g)))){this.I||4!=q||7==e||Hs(8==e||0>=_e?3:2),Qi(this);var t=this.g.aa();this.Y=t;t:if(Yi(this)){var o=ga(this.g);i="";var u=o.length,d=4==ls(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),fi(this);var g="";break t}this.h.i=new he.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.fa();if(this.i=200==t,function js(i,e,t,o,u,d,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.U,q,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var D,F=this.g;if((D=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zt(D)){var j=D;break t}}j=null}if(!(t=j)){this.i=!1,this.o=3,Ce(12),Rr(this),fi(this);break e}Qr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pi(this,t)}this.P?(Qs(this,q,g),fr&&this.i&&3==q&&(Er(this.S,this.T,"tick",this.gb),this.T.start())):(Qr(this.j,this.m,g,null),pi(this,g)),4==q&&Rr(this),this.i&&!this.I&&(4==q?ks(this.l,this):(this.i=!1,_s(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,Ce(12)):(this.o=0,Ce(13)),Rr(this),fi(this)}}}catch{}},ee.gb=function(){if(this.g){var i=ls(this.g),e=this.g.fa();this.C<e.length&&(Qi(this),Qs(this,i,e),this.i&&4!=i&&_s(this))}},ee.cancel=function(){this.I=!0,Rr(this)},ee.fb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Oo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hs(3),Ce(17)),Rr(this),this.o=2,fi(this)):Po(this,this.V-i)};var po=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ir){this.h=void 0!==e?e:i.h,Js(this,i.j),this.s=i.s,this.g=i.g,ui(this,i.m),this.l=i.l,e=i.i;var t=new rn;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Vr(this,t),this.o=i.o}else i&&(t=String(i).match(po))?(this.h=!!e,Js(this,t[1]||"",!0),this.s=bi(t[2]||""),this.g=bi(t[3]||"",!0),ui(this,t[4]),this.l=bi(t[5]||"",!0),Vr(this,t[6]||"",!0),this.o=bi(t[7]||"")):(this.h=!!e,this.i=new rn(null,this.h))}function gi(i){return new ir(i)}function Js(i,e,t){i.j=t?bi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ui(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Vr(i,e,t){e instanceof rn?(i.i=e,function es(i,e){e&&!i.j&&(Xi(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(qo(this,o),Ns(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=On(e,ko)),i.i=new rn(e,i.h))}function Ln(i,e,t){i.i.set(e,t)}function Ji(i){return Ln(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function bi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function On(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,zs),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function zs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ir.prototype.toString=function(){var i=[],e=this.j;e&&i.push(On(e,Es,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(On(e,Es,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(On(t,"/"==t.charAt(0)?$i:Wo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",On(t,Nr)),i.join("")};var Es=/[#\/\?@]/g,Wo=/[#\?:]/g,$i=/[#\?]/g,ko=/[#\?@]/g,Nr=/#/g;function rn(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Xi(i){i.g||(i.g=new Map,i.h=0,i.i&&function fa(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qo(i,e){Xi(i),e=Hr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function go(i,e){return Xi(i),e=Hr(i,e),i.g.has(e)}function Ns(i,e,t){qo(i,e),0<t.length&&(i.i=null,i.g.set(Hr(i,e),rr(t)),i.h+=t.length)}function Hr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function mo(i){this.l=i||gt,i=he.PerformanceNavigationTiming?0<(i=he.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(he.g&&he.g.Ga&&he.g.Ga()&&he.g.Ga().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ee=rn.prototype).add=function(i,e){Xi(this),this.i=null,i=Hr(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ee.forEach=function(i,e){Xi(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},ee.oa=function(){Xi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let d=0;d<u.length;d++)t.push(e[o])}return t},ee.W=function(i){Xi(this);let e=[];if("string"==typeof i)go(this,i)&&(e=e.concat(this.g.get(Hr(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},ee.set=function(i,e){return Xi(this),this.i=null,go(this,i=Hr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ee.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const d=encodeURIComponent(String(o)),g=this.W(o);for(o=0;o<g.length;o++){var u=d;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var gt=10;function Sn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Os(i){return i.h?1:i.g?i.g.size:0}function Zs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Dr(i,e){i.g?i.g.add(e):i.h=e}function ws(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function as(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return rr(i.i)}function mi(){}function yo(){this.g=new mi}function Ps(i,e,t){const o=t||"";try{ai(i,function(u,d){let g=u;pt(u)&&(g=cn(u)),e.push(o+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function vo(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function P(i){this.l=i.$b||null,this.j=i.ib||!1}function R(i,e){Yt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=A,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mo.prototype.cancel=function(){if(this.i=as(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},mi.prototype.stringify=function(i){return he.JSON.stringify(i,void 0)},mi.prototype.parse=function(i){return he.JSON.parse(i,void 0)},Nt(P,Zt),P.prototype.g=function(){return new R(this.l,this.j)},P.prototype.i=function(i){return function(){return i}}({}),Nt(R,Yt);var A=0;function z(i){i.j.read().then(i.Sa.bind(i)).catch(i.ga.bind(i))}function qe(i){i.readyState=4,i.l=null,i.j=null,i.A=null,kt(i)}function kt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ee=R.prototype).open=function(i,e){if(this.readyState!=A)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,kt(this)},ee.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||he).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qe(this)),this.readyState=A},ee.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,kt(this)),this.g&&(this.readyState=3,kt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof he.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z(this)}else i.text().then(this.Ua.bind(this),this.ga.bind(this))},ee.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?qe(this):kt(this),3==this.readyState&&z(this)}},ee.Ua=function(i){this.g&&(this.response=this.responseText=i,qe(this))},ee.Ta=function(i){this.g&&(this.response=i,qe(this))},ee.ga=function(){this.g&&qe(this)},ee.setRequestHeader=function(i,e){this.v.append(i,e)},ee.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ee.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(R.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var qn=he.JSON.parse;function Kn(i){Yt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yi,this.K=this.L=!1}Nt(Kn,Yt);var yi="",us=/^https?$/i,to=["POST","PUT"];function ro(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,pa(i),Lo(i)}function pa(i){i.D||(i.D=!0,Dn(i,"complete"),Dn(i,"error"))}function Fo(i){if(i.h&&typeof Ie<"u"&&(!i.C[1]||4!=ls(i)||2!=i.aa()))if(i.v&&4==ls(i))ti(i.Ha,0,i);else if(Dn(i,"readystatechange"),4==ls(i)){i.h=!1;try{const D=i.aa();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(po)[1]||null;if(!u&&he.self&&he.self.location){var d=he.self.location.protocol;u=d.substr(0,d.length-1)}o=!us.test(u?u.toLowerCase():"")}t=o}if(t)Dn(i,"complete"),Dn(i,"success");else{i.m=6;try{var g=2<ls(i)?i.g.statusText:""}catch{g=""}i.j=g+" ["+i.aa()+"]",pa(i)}}finally{Lo(i)}}}function Lo(i,e){if(i.g){Ko(i);const t=i.g,o=i.C[0]?Ne:null;i.g=null,i.C=null,e||Dn(i,"ready");try{t.onreadystatechange=o}catch{}}}function Ko(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(he.clearTimeout(i.A),i.A=null)}function ls(i){return i.g?i.g.readyState:0}function ga(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case yi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Yo(i){let e="";return ot(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Qo(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Yo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Ln(i,e,t))}function T(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function B(i){this.Ca=0,this.i=[],this.j=new wr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=T("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=T("baseRetryDelayMs",5e3,i),this.ab=T("retryDelaySeedMs",1e4,i),this.Za=T("forwardChannelMaxRetries",2,i),this.ta=T("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Yb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new mo(i&&i.concurrentRequestLimit),this.Fa=new yo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=i&&i.Wb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function x(i){if(pe(i),3==i.G){var e=i.U++,t=gi(i.F);Ln(t,"SID",i.I),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),Pn(i,t),(e=new si(i,i.j,e,void 0)).K=2,e.v=Ji(gi(t)),t=!1,he.navigator&&he.navigator.sendBeacon&&(t=he.navigator.sendBeacon(e.v.toString(),"")),!t&&he.Image&&((new Image).src=e.v,t=!0),t||(e.g=Fs(e.l,null),e.g.da(e.v)),e.F=Date.now(),_s(e)}io(i)}function G(i){i.g&&(Ur(i),i.g.cancel(),i.g=null)}function pe(i){G(i),i.u&&(he.clearTimeout(i.u),i.u=null),ur(i),i.h.cancel(),i.m&&("number"==typeof i.m&&he.clearTimeout(i.m),i.m=null)}function He(i){Sn(i.h)||i.m||(i.m=!0,ss(i.Ja,i),i.C=0)}function Wt(i,e){var t;t=e?e.m:i.U++;const o=gi(i.F);Ln(o,"SID",i.I),Ln(o,"RID",t),Ln(o,"AID",i.T),Pn(i,o),i.o&&i.s&&Qo(o,i.o,i.s),t=new si(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Xn(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Dr(i.h,t),Ci(t,o,e)}function Pn(i,e){i.ia&&ot(i.ia,function(t,o){Ln(e,o,t)}),i.l&&ai({},function(t,o){Ln(e,o,t)})}function Xn(i,e,t){t=Math.min(i.i.length,t);var o=i.l?Vt(i.l.Qa,i.l,i):null;e:{var u=i.i;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let D=!0;for(let F=0;F<t;F++){let j=u[F].h;const q=u[F].g;if(j-=d,0>j)d=Math.max(0,u[F].h-100),D=!1;else try{Ps(q,g,"req"+j+"_")}catch{o&&o(q)}}if(D){o=g.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Yn(i){i.g||i.u||(i.Z=1,ss(i.Ia,i),i.A=0)}function Mn(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Fe(Vt(i.Ia,i),Is(i,i.A)),i.A++,0))}function Ur(i){null!=i.B&&(he.clearTimeout(i.B),i.B=null)}function sr(i){i.g=new si(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=gi(i.sa);Ln(e,"RID","rpc"),Ln(e,"SID",i.I),Ln(e,"CI",i.L?"0":"1"),Ln(e,"AID",i.T),Ln(e,"TYPE","xmlhttp"),Pn(i,e),i.o&&i.s&&Qo(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ji(gi(e)),t.s=null,t.P=!0,oi(t,i)}function ur(i){null!=i.v&&(he.clearTimeout(i.v),i.v=null)}function ks(i,e){var t=null;if(i.g==e){ur(i),Ur(i),i.g=null;var o=2}else{if(!Zs(i.h,e))return;t=e.D,ws(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Dn(o=$s(),new xe(o,t,e,u)),He(i)}else Yn(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function rt(i,e){return!(Os(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Ya?0:i.Za)||(i.m=Fe(Vt(i.Ja,i,e),Is(i,i.C)),i.C++,0)))}(i,e)||2==o&&Mn(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Ti(i,5);break;case 4:Ti(i,10);break;case 3:Ti(i,6);break;default:Ti(i,2)}}function Is(i,e){let t=i.Wa+Math.floor(Math.random()*i.ab);return i.l||(t*=2),t*e}function Ti(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=Vt(i.jb,i);t||(t=new ir("//www.google.com/images/cleardot.gif"),he.location&&"http"==he.location.protocol||Js(t,"https"),Ji(t)),function eo(i,e){const t=new wr;if(he.Image){const o=new Image;o.onload=Ht(vo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Ht(vo,t,o,"TestLoadImage: error",!1,e),o.onabort=Ht(vo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Ht(vo,t,o,"TestLoadImage: timeout",!1,e),he.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Ce(2);i.G=0,i.l&&i.l.va(e),io(i),pe(i)}function io(i){if(i.G=0,i.la=[],i.l){const e=as(i.h);(0!=e.length||0!=i.i.length)&&(tr(i.la,e),tr(i.la,i.i),i.h.i.length=0,rr(i.i),i.i.length=0),i.l.ua()}}function Ds(i,e,t){var o=t instanceof ir?gi(t):new ir(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),ui(o,o.m);else{var u=he.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var d=new ir(null,void 0);o&&Js(d,o),e&&(d.g=e),u&&ui(d,u),t&&(d.l=t),o=d}return e=i.za,(t=i.D)&&e&&Ln(o,t,e),Ln(o,"VER",i.ma),Pn(i,o),o}function Fs(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&i.Da&&!i.ra?new P({ib:!0}):i.ra)).L=i.H,e}function cs(){}function Jo(){if(_r&&!(10<=Number(Tr)))throw Error("Environmental error: no available transport.")}function er(i,e){Yt.call(this),this.g=new B(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Xb)&&!zt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ma(this)}function xa(i){hi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Wu(){Gs.call(this),this.status=1}function ma(i){this.g=i}(ee=Kn.prototype).da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rs.g(),this.C=function mn(i){return i.h||(i.h=i.i())}(this.u?this.u:Rs),this.g.onreadystatechange=Vt(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void ro(this,d)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const d of o.keys())t.set(d,o.get(d))}o=Array.from(t.keys()).find(d=>"content-type"==d.toLowerCase()),u=he.FormData&&i instanceof he.FormData,!(0<=Kr(to,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,g]of t)this.g.setRequestHeader(d,g);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ko(this),0<this.B&&((this.K=function no(i){return _r&&function At(){return function gn(i){var e=An;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Hn(String($e)).split("."),t=Hn("9").split("."),o=Math.max(e.length,t.length);for(let g=0;0==i&&g<o;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=or(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||or(0==u[2].length,0==d[2].length)||or(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vt(this.qa,this)):this.A=ti(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){ro(this,d)}},ee.qa=function(){typeof Ie<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dn(this,"timeout"),this.abort(8))},ee.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Dn(this,"complete"),Dn(this,"abort"),Lo(this))},ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lo(this,!0)),Kn.X.M.call(this)},ee.Ha=function(){this.s||(this.F||this.v||this.l?Fo(this):this.eb())},ee.eb=function(){Fo(this)},ee.aa=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},ee.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ee.Ra=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),qn(e)}},ee.Ea=function(){return this.m},ee.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(ee=B.prototype).ma=8,ee.G=1,ee.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new si(this,this.j,i,void 0);let d=this.s;if(this.S&&(d?(d=Ct(d),$n(d,this.S)):d=this.S),null!==this.o||this.N||(u.H=d,d=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Xn(this,u,e),Ln(t=gi(this.F),"RID",i),Ln(t,"CVER",22),this.D&&Ln(t,"X-HTTP-Session-Id",this.D),Pn(this,t),d&&(this.N?e="headers="+encodeURIComponent(String(Yo(d)))+"&"+e:this.o&&Qo(t,this.o,d)),Dr(this.h,u),this.Xa&&Ln(t,"TYPE","init"),this.O?(Ln(t,"$req",e),Ln(t,"SID","null"),u.Z=!0,Ci(u,t,null)):Ci(u,t,e),this.G=2}}else 3==this.G&&(i?Wt(this,i):0==this.i.length||Sn(this.h)||Wt(this))},ee.Ia=function(){if(this.u=null,sr(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Fe(Vt(this.cb,this),i)}},ee.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ce(10),G(this),sr(this))},ee.bb=function(){null!=this.v&&(this.v=null,G(this),Mn(this),Ce(19))},ee.jb=function(i){i?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},(ee=cs.prototype).xa=function(){},ee.wa=function(){},ee.va=function(){},ee.ua=function(){},ee.Qa=function(){},Jo.prototype.g=function(i,e){return new er(i,e)},Nt(er,Yt),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Ce(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Ds(i,null,i.V),He(i)},er.prototype.close=function(){x(this.g)},er.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=cn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.$a++,i)),3==e.G&&He(e)},er.prototype.M=function(){this.g.l=null,delete this.j,x(this.g),delete this.g,er.X.M.call(this)},Nt(xa,hi),Nt(Wu,Gs),Nt(ma,cs),ma.prototype.xa=function(){Dn(this.g,"a")},ma.prototype.wa=function(i){Dn(this.g,new xa(i))},ma.prototype.va=function(i){Dn(this.g,new Wu(i))},ma.prototype.ua=function(){Dn(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,er.prototype.send=er.prototype.u,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,ut.NO_ERROR=0,ut.TIMEOUT=8,ut.HTTP_ERROR=6,St.COMPLETE="complete",ri.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Yt.prototype.listen=Yt.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.Na,Kn.prototype.getLastErrorCode=Kn.prototype.Ea,Kn.prototype.getStatus=Kn.prototype.aa,Kn.prototype.getResponseJson=Kn.prototype.Ra,Kn.prototype.getResponseText=Kn.prototype.fa,Kn.prototype.send=Kn.prototype.da;var qu=Me.createWebChannelTransport=function(){return new Jo},Wa=Me.getStatEventTarget=function(){return $s()},Xo=Me.ErrorCode=ut,ea=Me.EventType=St,qa=Me.Event=ji,ya=Me.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},fu=Me.FetchXmlHttpFactory=P,va=Me.WebChannel=ri,Ai=Me.XhrIo=Kn;const Ra="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let ts="9.10.0";const Ls=new Be.Yd("@firebase/firestore");function Ku(){return Ls.logLevel}function wt(i,...e){if(Ls.logLevel<=Be.in.DEBUG){const t=e.map(ta);Ls.debug(`Firestore (${ts}): ${i}`,...t)}}function kn(i,...e){if(Ls.logLevel<=Be.in.ERROR){const t=e.map(ta);Ls.error(`Firestore (${ts}): ${i}`,...t)}}function vi(i,...e){if(Ls.logLevel<=Be.in.WARN){const t=e.map(ta);Ls.warn(`Firestore (${ts}): ${i}`,...t)}}function ta(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function qt(i="Unexpected state"){const e=`FIRESTORE (${ts}) INTERNAL ASSERTION FAILED: `+i;throw kn(e),new Error(e)}function fn(i,e){i||qt()}function Lt(i,e){return i}const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends Ge.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ea{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class so{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class Na{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gu{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=j=>this.i!==u?(u=this.i,t(j)):Promise.resolve();let g=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Or,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const j=g;e.enqueueRetryable((0,ce.Z)(function*(){yield j.promise,yield d(o.currentUser)}))},F=j=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(j=>F(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?F(j):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Or)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(fn("string"==typeof o.accessToken),new Ea(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fn(null===e||"string"==typeof e),new Wr(e)}}class _o{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(fn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vo{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new _o(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ka{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ya{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.A;return this.A=d.token,wt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fn("string"==typeof t.token),this.A=t.token,new Ka(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Uo(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Qa{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Uo(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function Jt(i,e){return i<e?-1:i>e?1:0}function Eo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function Bo(i){return i+"\0"}class lr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new lr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class an{constructor(e){this.timestamp=e}static fromTimestamp(e){return new an(e)}static min(){return new an(new lr(0,0))}static max(){return new an(new lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Si{constructor(e,t,o){void 0===t?t=0:t>e.length&&qt(),void 0===o?o=e.length-t:o>e.length-t&&qt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Si.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xn extends Si{construct(e,t,o){return new xn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new vt(Ye.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new xn(t)}static emptyPath(){return new xn([])}}const jo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends Si{construct(e,t,o){return new Sr(e,t,o)}static isValidIdentifier(e){return jo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new vt(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let g=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new vt(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new vt(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=F,u+=2}else"`"===D?(g=!g,u++):"."!==D||g?(o+=D,u++):(d(),u++)}if(d(),g)throw new vt(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(xn.fromString(e))}static fromName(e){return new Ot(xn.fromString(e).popFirst(5))}static empty(){return new Ot(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new xn(e.slice()))}}class oo{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Vs(i){return i.fields.find(e=>2===e.kind)}function Cs(i){return i.fields.filter(e=>2!==e.kind)}oo.UNKNOWN_ID=-1;class Yu{constructor(e,t){this.fieldPath=e,this.kind=t}}class ao{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ao(0,ns.min())}}function mu(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=an.fromTimestamp(1e9===o?new lr(t+1,0):new lr(t,o));return new ns(u,Ot.empty(),e)}function Xl(i){return new ns(i.readTime,i.key,-1)}class ns{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new ns(an.min(),Ot.empty(),-1)}static max(){return new ns(an.max(),Ot.empty(),-1)}}function Qu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ot.comparator(i.documentKey,e.documentKey),0!==t?t:Jt(i.largestBatchId,e.largestBatchId))}const na="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wa(i){return li.apply(this,arguments)}function li(){return li=(0,ce.Z)(function*(i){if(i.code!==Ye.FAILED_PRECONDITION||i.message!==na)throw i;wt("LocalStore","Unexpectedly lost primary lease")}),li.apply(this,arguments)}class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new We((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof We?t:We.resolve(t)}catch(t){return We.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):We.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):We.reject(t)}static resolve(e){return new We((t,o)=>{t(e)})}static reject(e){return new We((t,o)=>{o(e)})}static waitFor(e){return new We((t,o)=>{let u=0,d=0,g=!1;e.forEach(D=>{++u,D.next(()=>{++d,g&&d===u&&t()},F=>o(F))}),g=!0,d===u&&t()})}static or(e){let t=We.resolve(!1);for(const o of e)t=t.next(u=>u?We.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new We((o,u)=>{const d=e.length,g=new Array(d);let D=0;for(let F=0;F<d;F++){const j=F;t(e[j]).next(q=>{g[j]=q,++D,D===d&&o(g)},q=>u(q))}})}static doWhile(e,t){return new We((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class wo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Hi(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=Ia(o.target.error);this.P.reject(new Hi(e,u))}}static open(e,t,o,u){try{return new wo(t,e.transaction(u,o))}catch(d){throw new Hi(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ju(t)}}class uo{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===uo.D((0,Ge.z$)())&&kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wt("SimpleDb","Removing database:",e),Us(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ge.hl)())return!1;if(uo.N())return!0;const e=(0,Ge.z$)(),t=uo.D(e),o=0<t&&t<10,u=uo.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,ce.Z)(function*(){return t.db||(wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{u(new Hi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const D=g.target.error;u("VersionError"===D.name?new vt(Ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new vt(Ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Hi(e,D))},d.onupgradeneeded=g=>{wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.S.$(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,ce.Z)(function*(){const g="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.F(e);const F=wo.open(d.db,e,g?"readonly":"readwrite",o),j=u(F).next(q=>(F.V(),q)).catch(q=>(F.abort(q),We.reject(q))).toPromise();return j.catch(()=>{}),yield F.v,j}catch(F){const j=F,q="FirebaseError"!==j.name&&D<3;if(wt("SimpleDb","Transaction failed with error:",j.message,"Retrying:",q),d.close(),!q)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ra{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Us(this.U.delete())}}class Hi extends vt{constructor(e,t){super(Ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _i(i){return"IndexedDbTransactionError"===i.name}class Ju{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(wt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Us(o)}add(e){return wt("SimpleDb","ADD",this.store.name,e,e),Us(this.store.add(e))}get(e){return Us(this.store.get(e)).next(t=>(void 0===t&&(t=null),wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return wt("SimpleDb","DELETE",this.store.name,e),Us(this.store.delete(e))}count(){return wt("SimpleDb","COUNT",this.store.name),Us(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(g,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new We((d,g)=>{u.onerror=D=>{g(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new We((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}Y(e,t){wt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,g,D)=>D.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new We((o,u)=>{t.onerror=d=>{const g=Ia(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(D=>{D?g.continue():o()}):o()}})}H(e,t){const o=[];return new We((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const D=g.target.result;if(!D)return void u();const F=new ra(D),j=t(D.primaryKey,D.value,F);if(j instanceof We){const q=j.catch(_e=>(F.done(),We.reject(_e)));o.push(q)}F.isDone?u():null===F.G?D.continue():D.continue(F.G)}}).next(()=>We.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Us(i){return new We((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Ia(o.target.error);t(u)}})}let Io=!1;function Ia(i){const e=uo.D((0,Ge.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Io||(Io=!0,setTimeout(()=>{throw o},0)),o}}return i}class ec{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;wt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.Z)(function*(){t.task=null;try{wt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){_i(o)?wt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield wa(o)}yield t.nt(6e4)}))}}class yu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return We.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return wt("IndexBackiller",`Processing collection: ${g}`),this.rt(e,g,u).next(D=>{u-=D,o.add(g)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ot(u,d)).next(D=>(wt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>g.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const g=Xl(d);Qu(g,o)>0&&(o=g)}),new ns(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function ia(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ws(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ds(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Pi.at=-1;class Pr{constructor(e,t){this.comparator=e,this.root=t||E.EMPTY}insert(e,t){return new Pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,E.BLACK,null,null))}remove(e){return new Pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,E.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _(this.root,e,this.comparator,!1)}getReverseIterator(){return new _(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _(this.root,e,this.comparator,!0)}}class _{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class E{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??E.RED,this.left=u??E.EMPTY,this.right=d??E.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new E(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return E.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return E.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,E.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,E.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qt();const e=this.left.check();if(e!==this.right.check())throw qt();return e+(this.isRed()?0:1)}}E.EMPTY=null,E.RED=!0,E.BLACK=!1,E.EMPTY=new class{constructor(){this.size=0}get key(){throw qt()}get value(){throw qt()}get color(){throw qt()}get left(){throw qt()}get right(){throw qt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new E(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class m{constructor(e){this.comparator=e,this.data=new Pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b(this.data.getIterator())}getIteratorFrom(e){return new b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof m)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new m(this.comparator);return t.data=e,t}}class b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function N(i){return i.hasNext()?i.getNext():void 0}class ${constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new $([])}unionWith(e){let t=new m(Sr.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new $(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class oe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new oe(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new oe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oe.EMPTY_BYTE_STRING=new oe("");const Xe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bt(i){if(fn(!!i),"string"==typeof i){let e=0;const t=Xe.exec(i);if(fn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Kt(i.seconds),nanos:Kt(i.nanos)}}function Kt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ut(i){return"string"==typeof i?oe.fromBase64String(i):oe.fromUint8Array(i)}function Vn(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ki(i){const e=i.mapValue.fields.__previous_value__;return Vn(e)?ki(e):e}function Gi(i){const e=bt(i.mapValue.fields.__local_write_time__.timestampValue);return new lr(e.seconds,e.nanos)}class rs{constructor(e,t,o,u,d,g,D,F){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=D,this.useFetchStreams=F}}class ci{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ci("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ci&&e.projectId===this.projectId&&e.database===this.database}}function hs(i){return null==i}function Do(i){return 0===i&&1/i==-1/0}function sa(i){return"number"==typeof i&&Number.isInteger(i)&&!Do(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const bs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vu={nullValue:"NULL_VALUE"};function Br(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vn(i)?4:Jr(i)?9007199254740991:10:qt()}function $o(i,e){if(i===e)return!0;const t=Br(i);if(t!==Br(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Gi(i).isEqual(Gi(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=bt(o.timestampValue),g=bt(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ut(i.bytesValue).isEqual(Ut(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Kt(o.geoPointValue.latitude)===Kt(u.geoPointValue.latitude)&&Kt(o.geoPointValue.longitude)===Kt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Kt(o.integerValue)===Kt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Kt(o.doubleValue),g=Kt(u.doubleValue);return d===g?Do(d)===Do(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return Eo(i.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(ia(d)!==ia(g))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===g[D]||!$o(d[D],g[D])))return!1;return!0}(i,e);default:return qt()}var u}function M(i,e){return void 0!==(i.values||[]).find(t=>$o(t,e))}function O(i,e){if(i===e)return 0;const t=Br(i),o=Br(e);if(t!==o)return Jt(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=Kt(u.integerValue||u.doubleValue),D=Kt(d.integerValue||d.doubleValue);return g<D?-1:g>D?1:g===D?0:isNaN(g)?isNaN(D)?0:-1:1}(i,e);case 3:return H(i.timestampValue,e.timestampValue);case 4:return H(Gi(i),Gi(e));case 5:return Jt(i.stringValue,e.stringValue);case 6:return function(u,d){const g=Ut(u),D=Ut(d);return g.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),D=d.split("/");for(let F=0;F<g.length&&F<D.length;F++){const j=Jt(g[F],D[F]);if(0!==j)return j}return Jt(g.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=Jt(Kt(u.latitude),Kt(d.latitude));return 0!==g?g:Jt(Kt(u.longitude),Kt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],D=d.values||[];for(let F=0;F<g.length&&F<D.length;++F){const j=O(g[F],D[F]);if(j)return j}return Jt(g.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===bs.mapValue&&d===bs.mapValue)return 0;if(u===bs.mapValue)return 1;if(d===bs.mapValue)return-1;const g=u.fields||{},D=Object.keys(g),F=d.fields||{},j=Object.keys(F);D.sort(),j.sort();for(let q=0;q<D.length&&q<j.length;++q){const _e=Jt(D[q],j[q]);if(0!==_e)return _e;const Ue=O(g[D[q]],F[j[q]]);if(0!==Ue)return Ue}return Jt(D.length,j.length)}(i.mapValue,e.mapValue);default:throw qt()}}function H(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Jt(i,e);const t=bt(i),o=bt(e),u=Jt(t.seconds,o.seconds);return 0!==u?u:Jt(t.nanos,o.nanos)}function se(i){return Oe(i)}function Oe(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=bt(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ut(i.bytesValue).toBase64():"referenceValue"in i?Ot.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const g of o.values||[])d?d=!1:u+=",",u+=Oe(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const D of u)g?g=!1:d+=",",d+=`${D}:${Oe(o.fields[D])}`;return d+"}"}(i.mapValue):qt();var e}function Ke(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function yt(i){return!!i&&"integerValue"in i}function Pt(i){return!!i&&"arrayValue"in i}function hn(i){return!!i&&"nullValue"in i}function En(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Rn(i){return!!i&&"mapValue"in i}function un(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ws(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=un(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=un(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Jr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function fs(i){return"nullValue"in i?vu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ke(ci.empty(),Ot.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:qt()}function Ja(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ke(ci.empty(),Ot.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?bs:qt()}function Pa(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Da(i,e){const t=O(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Rn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=un(t)}setAll(e){let t=Sr.emptyPath(),o={},u=[];e.forEach((g,D)=>{if(!t.isImmediateParentOf(D)){const F=this.getFieldsMap(t);this.applyChanges(F,o,u),o={},u=[],t=D.popLast()}g?o[D.lastSegment()]=un(g):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Rn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Rn(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ws(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new di(un(this.value))}}function oa(i){const e=[];return Ws(i.fields,(t,o)=>{const u=new Sr([t]);if(Rn(o)){const d=oa(o.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new $(e)}class cr{constructor(e,t,o,u,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new cr(e,0,an.min(),an.min(),di.empty(),0)}static newFoundDocument(e,t,o){return new cr(e,1,t,an.min(),o,0)}static newNoDocument(e,t){return new cr(e,2,t,an.min(),di.empty(),0)}static newUnknownDocument(e,t){return new cr(e,3,t,an.min(),di.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=an.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xa{constructor(e,t=null,o=[],u=[],d=null,g=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=g,this.endAt=D,this.ht=null}}function Ca(i,e=null,t=[],o=[],u=null,d=null,g=null){return new Xa(i,e,t,o,u,d,g)}function ba(i){const e=Lt(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+se(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),hs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>se(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>se(o)).join(",")),e.ht=t}return e.ht}function Il(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Of(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!$o(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Pf(i.startAt,e.startAt)&&Pf(i.endAt,e.endAt)}function tc(i){return Ot.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Dl(i,e){return i.filters.filter(t=>t instanceof Ts&&t.field.isEqual(e))}function Cl(i,e,t){let o=vu,u=!0;for(const d of Dl(i,e)){let g=vu,D=!0;switch(d.op){case"<":case"<=":g=fs(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,D=!1;break;case"!=":case"not-in":g=vu}Pa({value:o,inclusive:u},{value:g,inclusive:D})<0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Pa({value:o,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}function Xu(i,e,t){let o=bs,u=!0;for(const d of Dl(i,e)){let g=bs,D=!0;switch(d.op){case">=":case">":g=Ja(d.value),D=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,D=!1;break;case"!=":case"not-in":g=bs}Da({value:o,inclusive:u},{value:g,inclusive:D})>0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Da({value:o,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}class Ts extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new Yd(e,t,o):"array-contains"===t?new zc(e,o):"in"===t?new Nf(e,o):"not-in"===t?new Jd(e,o):"array-contains-any"===t?new el(e,o):new Ts(e,t,o)}static lt(e,t,o){return"in"===t?new Ng(e,o):new Qd(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(O(t,this.value)):null!==t&&Br(this.value)===Br(t)&&this.ft(O(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Yd extends Ts{constructor(e,t,o){super(e,t,o),this.key=Ot.fromName(o.referenceValue)}matches(e){const t=Ot.comparator(e.key,this.key);return this.ft(t)}}class Ng extends Ts{constructor(e,t){super(e,"in",t),this.keys=Rf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qd extends Ts{constructor(e,t){super(e,"not-in",t),this.keys=Rf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Ot.fromName(o.referenceValue))}class zc extends Ts{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pt(t)&&M(t.arrayValue,this.value)}}class Nf extends Ts{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&M(this.value.arrayValue,t)}}class Jd extends Ts{constructor(e,t){super(e,"not-in",t)}matches(e){if(M(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!M(this.value.arrayValue,t)}}class el extends Ts{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>M(this.value.arrayValue,o))}}class Ta{constructor(e,t){this.position=e,this.inclusive=t}}class aa{constructor(e,t="asc"){this.field=e,this.dir=t}}function Of(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Xd(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(o=d.field.isKeyField()?Ot.comparator(Ot.fromName(g.referenceValue),t.key):O(g,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Pf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!$o(i.position[t],e.position[t]))return!1;return!0}class Co{constructor(e,t=null,o=[],u=[],d=null,g="F",D=null,F=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=g,this.startAt=D,this.endAt=F,this._t=null,this.wt=null}}function nc(i,e,t,o,u,d,g,D){return new Co(i,e,t,o,u,d,g,D)}function _u(i){return new Co(i)}function Zc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function rc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function tl(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Wc(i){return null!==i.collectionGroup}function eu(i){const e=Lt(i);if(null===e._t){e._t=[];const t=tl(e),o=rc(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new aa(t)),e._t.push(new aa(Sr.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new aa(Sr.keyField(),d))}}}return e._t}function lo(i){const e=Lt(i);if(!e.wt)if("F"===e.limitType)e.wt=Ca(e.path,e.collectionGroup,eu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of eu(e))t.push(new aa(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Ta(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Ta(e.startAt.position,e.startAt.inclusive):null;e.wt=Ca(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function bl(i,e,t){return new Co(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Tl(i,e){return Il(lo(i),lo(e))&&i.limitType===e.limitType}function ua(i){return`${ba(lo(i))}|lt:${i.limitType}`}function Eu(i){return`Query(target=${function Kd(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${se(o.value)}`;var o}).join(", ")}]`),hs(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>se(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>se(t)).join(",")),`Target(${e})`}(lo(i))}; limitType=${i.limitType})`}function ic(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Ot.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,g){const D=Xd(u,d,g);return u.inclusive?D<=0:D<0}(t.startAt,eu(t),o)||t.endAt&&!function(u,d,g){const D=Xd(u,d,g);return u.inclusive?D>=0:D>0}(t.endAt,eu(t),o)));var t,o}function eh(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function kf(i){return(e,t)=>{let o=!1;for(const u of eu(i)){const d=Og(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Og(i,e,t){const o=i.field.isKeyField()?Ot.comparator(e.key,t.key):function(u,d,g){const D=d.data.field(u),F=g.data.field(u);return null!==D&&null!==F?O(D,F):qt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return qt()}}function Ff(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Do(e)?"-0":e}}function Pg(i){return{integerValue:""+i}}function ka(i,e){return sa(e)?Pg(e):Ff(i,e)}class sc{constructor(){this._=void 0}}function Lf(i,e,t){return i instanceof Aa?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof qs?nl(i,e):i instanceof Sa?Kc(i,e):function(o,u){const d=th(o,u),g=Yc(d)+Yc(o.yt);return yt(d)&&yt(o.yt)?Pg(g):Ff(o.It,g)}(i,e)}function qc(i,e,t){return i instanceof qs?nl(i,e):i instanceof Sa?Kc(i,e):t}function th(i,e){return i instanceof wu?yt(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Aa extends sc{}class qs extends sc{constructor(e){super(),this.elements=e}}function nl(i,e){const t=Vf(e);for(const o of i.elements)t.some(u=>$o(u,o))||t.push(o);return{arrayValue:{values:t}}}class Sa extends sc{constructor(e){super(),this.elements=e}}function Kc(i,e){let t=Vf(e);for(const o of i.elements)t=t.filter(u=>!$o(u,o));return{arrayValue:{values:t}}}class wu extends sc{constructor(e,t){super(),this.It=e,this.yt=t}}function Yc(i){return Kt(i.integerValue||i.doubleValue)}function Vf(i){return Pt(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class oc{constructor(e,t){this.field=e,this.transform=t}}class Jc{constructor(e,t){this.version=e,this.transformResults=t}}class Ei{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ac(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Iu{}function nh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Cu(i.key,Ei.none()):new Fa(i.key,i.data,Ei.none());{const t=i.data,o=di.empty();let u=new m(Sr.comparator);for(let d of e.fields)if(!u.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?o.delete(d):o.set(d,g),u=u.add(d)}return new Ho(i.key,o,new $(u.toArray()),Ei.none())}}function Uf(i,e,t){i instanceof Fa?function(o,u,d){const g=o.value.clone(),D=rh(o.fieldTransforms,u,d.transformResults);g.setAll(D),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof Ho?function(o,u,d){if(!ac(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=rh(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(uc(o)),D.setAll(g),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Du(i,e,t,o){return i instanceof Fa?function(u,d,g,D){if(!ac(u.precondition,d))return g;const F=u.value.clone(),j=Fi(u.fieldTransforms,D,d);return F.setAll(j),d.convertToFoundDocument(d.version,F).setHasLocalMutations(),null}(i,e,t,o):i instanceof Ho?function(u,d,g,D){if(!ac(u.precondition,d))return g;const F=Fi(u.fieldTransforms,D,d),j=d.data;return j.setAll(uc(u)),j.setAll(F),d.convertToFoundDocument(d.version,j).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(q=>q.field))}(i,e,t,o):(g=t,ac(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function Xc(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=th(o.transform,u||null);null!=d&&(null===t&&(t=di.empty()),t.set(o.field,d))}return t||null}function ed(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Eo(t,o,(u,d)=>function Qc(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof qs&&o instanceof qs||t instanceof Sa&&o instanceof Sa?Eo(t.elements,o.elements,$o):t instanceof wu&&o instanceof wu?$o(t.yt,o.yt):t instanceof Aa&&o instanceof Aa);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Fa extends Iu{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Ho extends Iu{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function uc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function rh(i,e,t){const o=new Map;fn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,D=e.data.field(d.field);o.set(d.field,qc(g,D,t[u]))}return o}function Fi(i,e,t){const o=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);o.set(u.field,Lf(d,g,e))}return o}class Cu extends Iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class td extends Iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nd{constructor(e){this.count=e}}var Li,dr;function rl(i){switch(i){default:return qt();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0}}function ih(i){if(void 0===i)return kn("GRPC error has no .code"),Ye.UNKNOWN;switch(i){case Li.OK:return Ye.OK;case Li.CANCELLED:return Ye.CANCELLED;case Li.UNKNOWN:return Ye.UNKNOWN;case Li.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Li.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Li.INTERNAL:return Ye.INTERNAL;case Li.UNAVAILABLE:return Ye.UNAVAILABLE;case Li.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Li.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Li.NOT_FOUND:return Ye.NOT_FOUND;case Li.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Li.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Li.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Li.ABORTED:return Ye.ABORTED;case Li.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Li.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Li.DATA_LOSS:return Ye.DATA_LOSS;default:return qt()}}(dr=Li||(Li={}))[dr.OK=0]="OK",dr[dr.CANCELLED=1]="CANCELLED",dr[dr.UNKNOWN=2]="UNKNOWN",dr[dr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dr[dr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dr[dr.NOT_FOUND=5]="NOT_FOUND",dr[dr.ALREADY_EXISTS=6]="ALREADY_EXISTS",dr[dr.PERMISSION_DENIED=7]="PERMISSION_DENIED",dr[dr.UNAUTHENTICATED=16]="UNAUTHENTICATED",dr[dr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dr[dr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dr[dr.ABORTED=10]="ABORTED",dr[dr.OUT_OF_RANGE=11]="OUT_OF_RANGE",dr[dr.UNIMPLEMENTED=12]="UNIMPLEMENTED",dr[dr.INTERNAL=13]="INTERNAL",dr[dr.UNAVAILABLE=14]="UNAVAILABLE",dr[dr.DATA_LOSS=15]="DATA_LOSS";class La{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return ds(this.inner)}size(){return this.innerSize}}const Bf=new Pr(Ot.comparator);function bo(){return Bf}const jf=new Pr(Ot.comparator);function Va(...i){let e=jf;for(const t of i)e=e.insert(t.key,t);return e}function Al(i){let e=jf;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function To(){return bu()}function Sl(){return bu()}function bu(){return new La(i=>i.toString(),(i,e)=>i.isEqual(e))}const $f=new Pr(Ot.comparator),lc=new m(Ot.comparator);function Bn(...i){let e=lc;for(const t of i)e=e.add(t);return e}const Ks=new m(Jt);function Tu(){return Ks}class il{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t)),new il(an.min(),o,Tu(),bo(),Bn())}}class Au{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Au(oe.EMPTY_BYTE_STRING,t,Bn(),Bn(),Bn())}}class Su{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class Ml{constructor(e,t){this.targetId=e,this.At=t}}class tu{constructor(e,t,o=oe.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class rd{constructor(){this.Rt=0,this.bt=sd(),this.Pt=oe.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Bn(),t=Bn(),o=Bn();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:qt()}}),new Au(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=sd()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class id{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=bo(),this.qt=Go(),this.Kt=new m(Jt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:qt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(tc(d))if(0===o){const g=new Ot(d.path);this.jt(t,g,cr.newNoDocument(g,an.min()))}else fn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,g)=>{const D=this.Xt(g);if(D){if(d.current&&tc(D.target)){const F=new Ot(D.target.path);null!==this.Ut.get(F)||this.ee(g,F)||this.jt(g,F,cr.newNoDocument(F,e))}d.Dt&&(t.set(g,d.xt()),d.Nt())}});let o=Bn();this.qt.forEach((d,g)=>{let D=!0;g.forEachWhile(F=>{const j=this.Xt(F);return!j||2===j.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.Ut.forEach((d,g)=>g.setReadTime(e));const u=new il(e,t,this.Kt,this.Ut,o);return this.Ut=bo(),this.qt=Go(),this.Kt=new m(Jt),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new rd,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new m(Jt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||wt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new rd),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Go(){return new Pr(Ot.comparator)}function sd(){return new Pr(Ot.comparator)}const od={asc:"ASCENDING",desc:"DESCENDING"},cc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Mu{constructor(e,t){this.databaseId=e,this.gt=t}}function xu(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function As(i,e){return i.gt?e.toBase64():e.toUint8Array()}function ad(i,e){return xu(i,e.toTimestamp())}function zi(i){return fn(!!i),an.fromTimestamp(function(e){const t=bt(e);return new lr(t.seconds,t.nanos)}(i))}function dc(i,e){return(t=i,new xn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ys(i){const e=xn.fromString(i);return fn(fc(e)),e}function Ua(i,e){return dc(i.databaseId,e.path)}function la(i,e){const t=Ys(e);if(t.get(1)!==i.databaseId.projectId)throw new vt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new vt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ot(oh(t))}function hc(i,e){return dc(i.databaseId,e)}function sh(i){const e=Ys(i);return 4===e.length?xn.emptyPath():oh(e)}function Ba(i){return new xn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function oh(i){return fn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ud(i,e,t){return{name:Ua(i,e),fields:t.value.mapValue.fields}}function ah(i,e,t){const o=la(i,e.name),u=zi(e.updateTime),d=new di({mapValue:{fields:e.fields}}),g=cr.newFoundDocument(o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function c(i,e){let t;if(e instanceof Fa)t={update:ud(i,e.key,e.value)};else if(e instanceof Cu)t={delete:Ua(i,e.key)};else if(e instanceof Ho)t={update:ud(i,e.key,e.data),updateMask:lh(e.fieldMask)};else{if(!(e instanceof td))return qt();t={verify:Ua(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const g=d.transform;if(g instanceof Aa)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof qs)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Sa)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof wu)return{fieldPath:d.field.canonicalString(),increment:g.yt};throw qt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:ad(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:qt()),t;var u}function f(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Ei.updateTime(zi(u.updateTime)):void 0!==u.exists?Ei.exists(u.exists):Ei.none():Ei.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let D=null;"setToServerValue"in g?(fn("REQUEST_TIME"===g.setToServerValue),D=new Aa):"appendMissingElements"in g?D=new qs(g.appendMissingElements.values||[]):"removeAllFromArray"in g?D=new Sa(g.removeAllFromArray.values||[]):"increment"in g?D=new wu(d,g.increment):qt();const F=Sr.fromServerFormat(g.fieldPath);return new oc(F,D)}(i,u)):[];var u;if(e.update){const u=la(i,e.update.name),d=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new $((e.updateMask.fieldPaths||[]).map(j=>Sr.fromServerFormat(j)));return new Ho(u,d,g,t,o)}return new Fa(u,d,t,o)}if(e.delete){const u=la(i,e.delete);return new Cu(u,t)}if(e.verify){const u=la(i,e.verify);return new td(u,t)}return qt()}function U(i,e){return{documents:[hc(i,e.path)]}}function W(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=hc(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hc(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(F){if(0===F.length)return;const j=F.map(q=>function(_e){if("=="===_e.op){if(En(_e.value))return{unaryFilter:{field:sn(_e.field),op:"IS_NAN"}};if(hn(_e.value))return{unaryFilter:{field:sn(_e.field),op:"IS_NULL"}}}else if("!="===_e.op){if(En(_e.value))return{unaryFilter:{field:sn(_e.field),op:"IS_NOT_NAN"}};if(hn(_e.value))return{unaryFilter:{field:sn(_e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sn(_e.field),op:wn(_e.op),value:_e.value}}}(q));return 1===j.length?j[0]:{compositeFilter:{op:"AND",filters:j}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(F){if(0!==F.length)return F.map(j=>{return{field:sn((q=j).field),direction:Qt(q.dir)};var q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(j=e.limit,i.gt||hs(j)?j:{value:j});var j,D,F;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),t}function Re(i){let e=sh(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){fn(1===o);const q=t.from[0];q.allDescendants?u=q.collectionId:e=e.child(q.collectionId)}let d=[];t.where&&(d=Mt(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(q=>{return new aa(Xr((_e=q).field),function(Ue){switch(Ue){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_e.direction));var _e}));let D=null;t.limit&&(D=function(q){let _e;return _e="object"==typeof q?q.value:q,hs(_e)?null:_e}(t.limit));let F=null;var q;t.startAt&&(F=new Ta((q=t.startAt).values||[],!!q.before));let j=null;return t.endAt&&(j=function(q){return new Ta(q.values||[],!q.before)}(t.endAt)),nc(e,u,g,d,D,"F",F,j)}function Mt(i){return i?void 0!==i.unaryFilter?[sl(i)]:void 0!==i.fieldFilter?[zo(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Mt(e)).reduce((e,t)=>e.concat(t)):qt():[]}function Qt(i){return od[i]}function wn(i){return cc[i]}function sn(i){return{fieldPath:i.canonicalString()}}function Xr(i){return Sr.fromServerFormat(i.fieldPath)}function zo(i){return Ts.create(Xr(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qt()}}(i.fieldFilter.op),i.fieldFilter.value)}function sl(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Xr(i.unaryFilter.field);return Ts.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Xr(i.unaryFilter.field);return Ts.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xr(i.unaryFilter.field);return Ts.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xr(i.unaryFilter.field);return Ts.create(u,"!=",{nullValue:"NULL_VALUE"});default:return qt()}}function lh(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ps(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ld(e)),e=Hf(i.get(t),e);return ld(e)}function Hf(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function ld(i){return i+"\x01\x01"}function Ao(i){const e=i.length;if(fn(e>=2),2===e)return fn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),xn.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&qt(),i.charAt(g+1)){case"\x01":const D=i.substring(d,g);let F;0===u.length?F=D:(u+=D,F=u,u=""),o.push(F);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:qt()}d=g+2}return new xn(o)}const ch=["userId","batchId"];function xl(i,e){return[i,ps(e)]}function dh(i,e,t){return[i,ps(e),t]}const kg={},hh=["prefixPath","collectionGroup","readTime","documentId"],Gf=["prefixPath","collectionGroup","documentId"],Fg=["collectionGroup","readTime","prefixPath","documentId"],zf=["canonicalId","targetId"],Lg=["targetId","path"],Vg=["path","targetId"],Ug=["collectionId","parent"],Zf=["indexId","uid"],By=["uid","sequenceNumber"],Wf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cd=["indexId","uid","orderedDocumentKey"],jy=["userId","collectionPath","documentId"],$y=["userId","collectionPath","largestBatchId"],Hy=["userId","collectionGroup","largestBatchId"],qf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gy=[...qf,"documentOverlays"],Bg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jg=Bg,zy=[...jg,"indexConfiguration","indexState","indexEntries"];class dd extends wl{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Bs(i,e){const t=Lt(i);return uo.O(t.ie,e)}class Kf{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Uf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Du(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Du(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Sl();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let D=this.applyToLocalView(g,d.mutatedFields);D=t.has(u.key)?null:D;const F=nh(g,D);null!==F&&o.set(u.key,F),g.isValidDocument()||g.convertToNoDocument(an.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bn())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(t,o)=>ed(t,o))&&Eo(this.baseMutations,e.baseMutations,(t,o)=>ed(t,o))}}class Yf{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){fn(e.mutations.length===o.length);let u=$f;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,o[g].version);return new Yf(e,t,o,u)}}class fh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ol{constructor(e,t,o,u,d=an.min(),g=an.min(),D=oe.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=D}withSequenceNumber(e){return new ol(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $g{constructor(e){this.re=e}}function ph(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Ua(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:xu(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return qt();o.unknownDocument={path:t.path.toArray(),version:Ru(e.version)}}var u,d;return o}function hd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zi(i){const e=new lr(i.seconds,i.nanoseconds);return an.fromTimestamp(e)}function ja(i,e){const t=(e.baseMutations||[]).map(d=>f(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>f(i.re,d)),u=lr.fromMillis(e.localWriteTimeMs);return new Kf(e.batchId,u,t,o)}function pc(i){const e=Zi(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Zi(i.lastLimboFreeSnapshotVersion):an.min();let o;var u;return void 0!==i.query.documents?(fn(1===(u=i.query).documents.length),o=lo(_u(sh(u.documents[0])))):o=lo(Re(i.query)),new ol(o,i.targetId,0,i.lastListenSequenceNumber,e,t,oe.fromBase64String(i.resumeToken))}function Hg(i,e){const t=Ru(e.snapshotVersion),o=Ru(e.lastLimboFreeSnapshotVersion);let u;u=tc(e.target)?U(i.re,e.target):W(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ba(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Qf(i){const e=Re({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?bl(e,e.limit,"L"):e}function gh(i,e){return new fh(e.largestBatchId,f(i.re,e.overlayMutation))}function Gg(i,e){const t=e.path.lastSegment();return[i,ps(e.path.popLast()),t]}function Jf(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Ru(o.readTime),documentKey:ps(o.documentKey.path),largestBatchId:o.largestBatchId}}class Zy{getBundleMetadata(e,t){return Xf(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Zi(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Xf(e).put({bundleId:(o=t).id,createTime:Ru(zi(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return zg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Qf(u.bundledQuery),readTime:Zi(u.readTime)};var u})}saveNamedQuery(e,t){return zg(e).put({name:(o=t).name,readTime:Ru(zi(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Xf(i){return Bs(i,"bundles")}function zg(i){return Bs(i,"namedQueries")}class mh{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new mh(e,t.uid||"")}getOverlay(e,t){return fd(e).get(Gg(this.userId,t)).next(o=>o?gh(this.It,o):null)}getOverlays(e,t){const o=To();return We.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,g)=>{const D=new fh(t,g);u.push(this.ue(e,D))}),We.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(g=>u.add(ps(g.getCollectionPath())));const d=[];return u.forEach(g=>{const D=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);d.push(fd(e).Y("collectionPathOverlayIndex",D))}),We.waitFor(d)}getOverlaysForCollection(e,t,o){const u=To(),d=ps(t),g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return fd(e).W("collectionPathOverlayIndex",g).next(D=>{for(const F of D){const j=gh(this.It,F);u.set(j.getKey(),j)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=To();let g;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fd(e).Z({index:"collectionGroupOverlayIndex",range:D},(F,j,q)=>{const _e=gh(this.It,j);d.size()<u||_e.largestBatchId===g?(d.set(_e.getKey(),_e),g=_e.largestBatchId):q.done()}).next(()=>d)}ue(e,t){return fd(e).put(function(o,u,d){const[g,D,F]=Gg(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:F,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:c(o.re,d.mutation)}}(this.It,this.userId,t))}}function fd(i){return Bs(i,"documentOverlays")}class Rl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Kt(e.integerValue));else if("doubleValue"in e){const o=Kt(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Do(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ut(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?Jr(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):qt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),Ot.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Wy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Nl(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Wy(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Rl.Te=new Rl;class Nu{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=Nl(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=Nl(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class qy{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Ky{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class yh{constructor(){this.Be=new Nu,this.Le=new qy(this.Be),this.Ue=new Ky(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class gc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new gc(this.indexId,this.documentKey,this.arrayValue,o)}}function al(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Yy(i.arrayValue,e.arrayValue),0!==t?t:(t=Yy(i.directionalValue,e.directionalValue),0!==t?t:Ot.comparator(i.documentKey,e.documentKey)))}function Yy(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class nu{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=Vs(e);if(void 0!==t&&!this.ze(t))return!1;const o=Cs(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const g=o[u];if(!this.He(this.je,g)||!this.Je(this.Ge[d++],g))return!1;++u}for(;u<o.length;++u){const g=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],g))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ep{constructor(){this.Ye=new pd}addToCollectionParentIndex(e,t){return this.Ye.add(t),We.resolve()}getCollectionParents(e,t){return We.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return We.resolve()}deleteFieldIndex(e,t){return We.resolve()}getDocumentsMatchingTarget(e,t){return We.resolve(null)}getIndexType(e,t){return We.resolve(0)}getFieldIndexes(e,t){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}getMinOffset(e,t){return We.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,t){return We.resolve(ns.min())}updateCollectionGroup(e,t,o){return We.resolve()}updateIndexEntries(e,t){return We.resolve()}}class pd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new m(xn.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new m(xn.comparator)).toArray()}}const vh=new Uint8Array(0);class Zg{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new pd,this.Ze=new La(o=>ba(o),(o,u)=>Il(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:ps(u)};return Wg(e).put(d)}return We.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[Bo(t),""],!1,!0);return Wg(e).W(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;o.push(Ao(g.parent))}return o})}addFieldIndex(e,t){const o=_h(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var g;delete u.indexId;const d=o.add(u);if(t.indexState){const g=gd(e);return d.next(D=>{g.put(Jf(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=_h(e),u=gd(e),d=Ou(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Ou(e);let u=!0;const d=new Map;return We.forEach(this.tn(t),g=>this.en(e,g).next(D=>{u&&(u=!!D),d.set(g,D)})).next(()=>{if(u){let g=Bn();const D=[];return We.forEach(d,(F,j)=>{var q;wt("IndexedDbIndexManager",`Using index ${q=F,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(Mr=>`${Mr.fieldPath}:${Mr.kind}`).join(",")}`} to execute ${ba(t)}`);const _e=function(Mr,Vi){const hr=Vs(Vi);if(void 0===hr)return null;for(const Cr of Dl(Mr,hr.fieldPath))switch(Cr.op){case"array-contains-any":return Cr.value.arrayValue.values||[];case"array-contains":return[Cr.value]}return null}(j,F),Ue=function(Mr,Vi){const hr=new Map;for(const Cr of Cs(Vi))for(const Ms of Dl(Mr,Cr.fieldPath))switch(Ms.op){case"==":case"in":hr.set(Cr.fieldPath.canonicalString(),Ms.value);break;case"not-in":case"!=":return hr.set(Cr.fieldPath.canonicalString(),Ms.value),Array.from(hr.values())}return null}(j,F),ct=function(Mr,Vi){const hr=[];let Cr=!0;for(const Ms of Cs(Vi)){const Zd=0===Ms.kind?Cl(Mr,Ms.fieldPath,Mr.startAt):Xu(Mr,Ms.fieldPath,Mr.startAt);hr.push(Zd.value),Cr&&(Cr=Zd.inclusive)}return new Ta(hr,Cr)}(j,F),ft=function(Mr,Vi){const hr=[];let Cr=!0;for(const Ms of Cs(Vi)){const Zd=0===Ms.kind?Xu(Mr,Ms.fieldPath,Mr.endAt):Cl(Mr,Ms.fieldPath,Mr.endAt);hr.push(Zd.value),Cr&&(Cr=Zd.inclusive)}return new Ta(hr,Cr)}(j,F),$t=this.nn(F,j,ct),en=this.nn(F,j,ft),vr=this.sn(F,j,Ue),Gr=this.rn(F.indexId,_e,$t,ct.inclusive,en,ft.inclusive,vr);return We.forEach(Gr,Mr=>o.J(Mr,t.limit).next(Vi=>{Vi.forEach(hr=>{const Cr=Ot.fromSegments(hr.documentKey);g.has(Cr)||(g=g.add(Cr),D.push(Cr))})}))}).next(()=>D)}return We.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,g,D){const F=(null!=t?t.length:1)*Math.max(o.length,d.length),j=F/(null!=t?t.length:1),q=[];for(let _e=0;_e<F;++_e){const Ue=t?this.on(t[_e/j]):vh,ct=this.un(e,Ue,o[_e%j],u),ft=this.cn(e,Ue,d[_e%j],g),$t=D.map(en=>this.un(e,Ue,en,!0));q.push(...this.createRange(ct,ft,$t))}return q}un(e,t,o,u){const d=new gc(e,Ot.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new gc(e,Ot.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new nu(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const D of d)o.We(D)&&(!g||D.fields.length>g.fields.length)&&(g=D);return g})}getIndexType(e,t){let o=2;return We.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(g){let D=new m(Sr.comparator),F=!1;for(const j of g.filters){const q=j;q.field.isKeyField()||("array-contains"===q.op||"array-contains-any"===q.op?F=!0:D=D.add(q.field))}for(const j of g.orderBy)j.field.isKeyField()||(D=D.add(j.field));return D.size+(F?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new yh;for(const u of Cs(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=o.qe(u.kind);Rl.Te.ce(d,g)}return o.$e()}on(e){const t=new yh;return Rl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new yh;return Rl.Te.ce(Ke(this.databaseId,t),o.qe(function(u){const d=Cs(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new yh);let d=0;for(const g of Cs(e)){const D=o[d++];for(const F of u)if(this.ln(t,g.fieldPath)&&Pt(D))u=this.fn(u,g,D);else{const j=F.qe(g.kind);Rl.Te.ce(D,j)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const g of o.arrayValue.values||[])for(const D of u){const F=new yh;F.seed(D.$e()),Rl.Te.ce(g,F.qe(t.kind)),d.push(F)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof Ts&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=_h(e),u=gd(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const g=[];return We.forEach(d,D=>u.get([D.indexId,this.uid]).next(F=>{g.push(function(j,q){const _e=q?new ao(q.sequenceNumber,new ns(Zi(q.readTime),new Ot(Ao(q.documentKey)),q.largestBatchId)):ao.empty(),Ue=j.fields.map(([ct,ft])=>new Yu(Sr.fromServerFormat(ct),ft));return new oo(j.indexId,j.collectionGroup,Ue,_e)}(D,F))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Jt(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=_h(e),d=gd(e);return this._n(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>We.forEach(D,F=>d.put(Jf(F.indexId,this.user,g,o)))))}updateIndexEntries(e,t){const o=new Map;return We.forEach(t,(u,d)=>{const g=o.get(u.collectionGroup);return(g?We.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),We.forEach(D,F=>this.wn(e,u,F).next(j=>{const q=this.mn(d,F);return j.isEqual(q)?We.resolve():this.gn(e,d,F,j,q)}))))})}yn(e,t,o,u){return Ou(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return Ou(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=Ou(e);let d=new m(al);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(g,D)=>{d=d.add(new gc(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}mn(e,t){let o=new m(al);const u=this.an(t,e);if(null==u)return o;const d=Vs(t);if(null!=d){const g=e.data.field(d.fieldPath);if(Pt(g))for(const D of g.arrayValue.values||[])o=o.add(new gc(t.indexId,e.key,this.on(D),u))}else o=o.add(new gc(t.indexId,e.key,vh,u));return o}gn(e,t,o,u,d){wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(D,F,j,q,_e){const Ue=D.getIterator(),ct=F.getIterator();let ft=N(Ue),$t=N(ct);for(;ft||$t;){let en=!1,vr=!1;if(ft&&$t){const Gr=j(ft,$t);Gr<0?vr=!0:Gr>0&&(en=!0)}else null!=ft?vr=!0:en=!0;en?(q($t),$t=N(ct)):vr?(_e(ft),ft=N(Ue)):(ft=N(Ue),$t=N(ct))}}(u,d,al,D=>{g.push(this.yn(e,t,o,D))},D=>{g.push(this.pn(e,t,o,D))}),We.waitFor(g)}_n(e){let t=1;return gd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((g,D)=>al(g,D)).filter((g,D,F)=>!D||0!==al(g,F[D-1]));const u=[];u.push(e);for(const g of o){const D=al(g,e),F=al(g,t);if(0===D)u[0]=e.Ke();else if(D>0&&F<0)u.push(g),u.push(g.Ke());else if(F>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2)d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,vh,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,vh,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Eh)}getMinOffset(e,t){return We.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||qt())).next(Eh)}}function Wg(i){return Bs(i,"collectionParents")}function Ou(i){return Bs(i,"indexEntries")}function _h(i){return Bs(i,"indexConfiguration")}function gd(i){return Bs(i,"indexState")}function Eh(i){fn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Qu(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new ns(e.readTime,e.documentKey,t)}const wh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mo{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qy(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let D=0;const F=o.Z({range:g},(q,_e,Ue)=>(D++,Ue.delete()));d.push(F.next(()=>{fn(1===D)}));const j=[];for(const q of t.mutations){const _e=dh(e,q.key.path,t.batchId);d.push(u.delete(_e)),j.push(q.key)}return We.waitFor(d).next(()=>j)}function Pu(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw qt();e=i.noDocument}return JSON.stringify(e).length}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class mc{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){fn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new mc(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).Z({index:"userMutationsIndex",range:o},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=ll(e),g=ul(e);return g.add({}).next(D=>{fn("number"==typeof D);const F=new Kf(D,t,o,u),j=function(Ue,ct,ft){const $t=ft.baseMutations.map(vr=>c(Ue.re,vr)),en=ft.mutations.map(vr=>c(Ue.re,vr));return{userId:ct,batchId:ft.batchId,localWriteTimeMs:ft.localWriteTime.toMillis(),baseMutations:$t,mutations:en}}(this.It,this.userId,F),q=[];let _e=new m((Ue,ct)=>Jt(Ue.canonicalString(),ct.canonicalString()));for(const Ue of u){const ct=dh(this.userId,Ue.key.path,D);_e=_e.add(Ue.key.path.popLast()),q.push(g.put(j)),q.push(d.put(ct,kg))}return _e.forEach(Ue=>{q.push(this.indexManager.addToCollectionParentIndex(e,Ue))}),e.addOnCommittedListener(()=>{this.In[D]=F.keys()}),We.waitFor(q).next(()=>F)})}lookupMutationBatch(e,t){return ul(e).get(t).next(o=>o?(fn(o.userId===this.userId),ja(this.It,o)):null)}Tn(e,t){return this.In[t]?We.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return ul(e).Z({index:"userMutationsIndex",range:u},(g,D,F)=>{D.userId===this.userId&&(fn(D.batchId>=o),d=ja(this.It,D)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ul(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).W("userMutationsIndex",t).next(o=>o.map(u=>ja(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=xl(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return ll(e).Z({range:u},(g,D,F)=>{const[j,q,_e]=g,Ue=Ao(q);if(j===this.userId&&t.path.isEqual(Ue))return ul(e).get(_e).next(ct=>{if(!ct)throw qt();fn(ct.userId===this.userId),d.push(ja(this.It,ct))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new m(Jt);const u=[];return t.forEach(d=>{const g=xl(this.userId,d.path),D=IDBKeyRange.lowerBound(g),F=ll(e).Z({range:D},(j,q,_e)=>{const[Ue,ct,ft]=j,$t=Ao(ct);Ue===this.userId&&d.path.isEqual($t)?o=o.add(ft):_e.done()});u.push(F)}),We.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=xl(this.userId,o),g=IDBKeyRange.lowerBound(d);let D=new m(Jt);return ll(e).Z({range:g},(F,j,q)=>{const[_e,Ue,ct]=F,ft=Ao(Ue);_e===this.userId&&o.isPrefixOf(ft)?ft.length===u&&(D=D.add(ct)):q.done()}).next(()=>this.En(e,D))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(ul(e).get(d).next(g=>{if(null===g)throw qt();fn(g.userId===this.userId),o.push(ja(this.It,g))}))}),We.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Qy(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),We.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return We.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return ll(e).Z({range:o},(d,g,D)=>{if(d[0]===this.userId){const F=Ao(d[1]);u.push(F)}else D.done()}).next(()=>{fn(0===u.length)})})}containsKey(e,t){return tp(e,this.userId,t)}Rn(e){return qg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tp(i,e,t){const o=xl(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return ll(i).Z({range:d,X:!0},(D,F,j)=>{const[q,_e,Ue]=D;q===e&&_e===u&&(g=!0),j.done()}).next(()=>g)}function ul(i){return Bs(i,"mutations")}function ll(i){return Bs(i,"documentMutations")}function qg(i){return Bs(i,"mutationQueues")}class Ol{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ol(0)}static vn(){return new Ol(-1)}}class Jy{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Ol(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>an.fromTimestamp(new lr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(fn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return yc(e).Z((g,D)=>{const F=pc(D);F.sequenceNumber<=t&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(e,F)))}).next(()=>We.waitFor(d)).next(()=>u)}forEachTarget(e,t){return yc(e).Z((o,u)=>{const d=pc(u);t(d)})}Vn(e){return Kg(e).get("targetGlobalKey").next(t=>(fn(null!==t),t))}Sn(e,t){return Kg(e).put("targetGlobalKey",t)}Dn(e,t){return yc(e).put(Hg(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=ba(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return yc(e).Z({range:u,index:"queryTargetsIndex"},(g,D,F)=>{const j=pc(D);Il(t,j.target)&&(d=j,F.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=cl(e);return t.forEach(g=>{const D=ps(g.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,g))}),We.waitFor(u)}removeMatchingKeys(e,t,o){const u=cl(e);return We.forEach(t,d=>{const g=ps(d.path);return We.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=cl(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=cl(e);let d=Bn();return u.Z({range:o,X:!0},(g,D,F)=>{const j=Ao(g[1]),q=new Ot(j);d=d.add(q)}).next(()=>d)}containsKey(e,t){const o=ps(t.path),u=IDBKeyRange.bound([o],[Bo(o)],!1,!0);let d=0;return cl(e).Z({index:"documentTargetsIndex",X:!0,range:u},([g,D],F,j)=>{0!==g&&(d++,j.done())}).next(()=>d>0)}se(e,t){return yc(e).get(t).next(o=>o?pc(o):null)}}function yc(i){return Bs(i,"targets")}function Kg(i){return Bs(i,"targetGlobal")}function cl(i){return Bs(i,"targetDocuments")}function np([i,e],[t,o]){const u=Jt(i,t);return 0===u?Jt(e,o):u}class rp{constructor(e){this.xn=e,this.buffer=new m(np),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();np(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yg{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;wt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){_i(o)?wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield wa(o)}yield t.Fn(3e5)}))}}class ip{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return We.resolve(Pi.at);const o=new rp(t);return this.$n.forEachTarget(e,u=>o.Mn(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.Mn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(wh)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wh):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,g,D,F,j;const q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_e=>(_e>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_e}`),u=this.params.maximumSequenceNumbersToCollect):u=_e,g=Date.now(),this.nthSequenceNumber(e,u))).next(_e=>(o=_e,D=Date.now(),this.removeTargets(e,o,t))).next(_e=>(d=_e,F=Date.now(),this.removeOrphanedDocuments(e,o))).next(_e=>(j=Date.now(),Ku()<=Be.in.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-q}ms\n\tDetermined least recently used ${u} in `+(D-g)+`ms\n\tRemoved ${d} targets in `+(F-D)+`ms\n\tRemoved ${_e} documents in `+(j-F)+`ms\nTotal Duration: ${j-q}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:_e})))}}class Xy{constructor(e,t){this.db=e,this.garbageCollector=new ip(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Ih(e,o)}removeReference(e,t,o){return Ih(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ih(e,t)}Gn(e,t){return function(o,u){let d=!1;return qg(o).tt(g=>tp(o,g,u).next(D=>(D&&(d=!0),We.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(g,D)=>{if(D<=t){const F=this.Gn(e,g).next(j=>{if(!j)return d++,o.getEntry(e,g).next(()=>(o.removeEntry(g,an.min()),cl(e).delete([0,ps(g.path)])))});u.push(F)}}).next(()=>We.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ih(e,t)}Kn(e,t){const o=cl(e);let u,d=Pi.at;return o.Z({index:"documentTargetsIndex"},([g,D],{path:F,sequenceNumber:j})=>{0===g?(d!==Pi.at&&t(new Ot(Ao(u)),d),d=j,u=F):d=Pi.at}).next(()=>{d!==Pi.at&&t(new Ot(Ao(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ih(i,e){return cl(i).put((o=i.currentSequenceNumber,{targetId:0,path:ps(e.path),sequenceNumber:o}));var o}class sp{constructor(){this.changes=new La(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?We.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Pl(e).put(o)}removeEntry(e,t,o){return Pl(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],hd(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=cr.newInvalidDocument(t);return Pl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Dh(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:cr.newInvalidDocument(t)};return Pl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Dh(t))},(u,d)=>{o={document:this.jn(t,d),size:Pu(d)}}).next(()=>o)}getEntries(e,t){let o=bo();return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);o=o.insert(u,g)}).next(()=>o)}Hn(e,t){let o=bo(),u=new Pr(Ot.comparator);return this.zn(e,t,(d,g)=>{const D=this.jn(d,g);o=o.insert(d,D),u=u.insert(d,Pu(g))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return We.resolve();let u=new m(Xg);t.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(Dh(u.first()),Dh(u.last())),g=u.getIterator();let D=g.getNext();return Pl(e).Z({index:"documentKeyIndex",range:d},(F,j,q)=>{const _e=Ot.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;D&&Xg(D,_e)<0;)o(D,null),D=g.getNext();D&&D.isEqual(_e)&&(o(D,j),D=g.hasNext()?g.getNext():null),D?q.j(Dh(D)):q.done()}).next(()=>{for(;D;)o(D,null),D=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),hd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pl(e).W(IDBKeyRange.bound(u,d,!0)).next(g=>{let D=bo();for(const F of g){const j=this.jn(Ot.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);D=D.insert(j.key,j)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=bo();const g=md(t,o),D=md(t,ns.max());return Pl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,D,!0)},(F,j,q)=>{const _e=this.jn(Ot.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);d=d.insert(_e.key,_e),d.size===u&&q.done()}).next(()=>d)}newChangeBuffer(e){return new Jg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return op(e).get("remoteDocumentGlobalKey").next(t=>(fn(!!t),t))}Qn(e,t){return op(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function So(i,e){let t;if(e.document)t=ah(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ot.fromSegments(e.noDocument.path),u=Zi(e.noDocument.readTime);t=cr.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return qt();{const o=Ot.fromSegments(e.unknownDocument.path),u=Zi(e.unknownDocument.version);t=cr.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new lr(o[0],o[1]);return an.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(an.min()))return o}return cr.newInvalidDocument(e)}}function dl(i){return new Qg(i)}class Jg extends sp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new La(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new m((d,g)=>Jt(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const D=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,D.readTime)),g.isValidDocument()){const F=ph(this.Yn.It,g);u=u.add(d.path.popLast()),o+=Pu(F)-D.size,t.push(this.Yn.addEntry(e,d,F))}else if(o-=D.size,this.trackRemovals){const F=ph(this.Yn.It,g.convertToNoDocument(an.min()));t.push(this.Yn.addEntry(e,d,F))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),We.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,g)=>{this.Xn.set(d,{size:g,readTime:o.get(d).readTime})}),o))}}function op(i){return Bs(i,"remoteDocumentGlobal")}function Pl(i){return Bs(i,"remoteDocumentsV14")}function Dh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function md(i,e){const t=e.documentKey.path.toArray();return[i,hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xg(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=Jt(t[d],o[d]),u)return u;return u=Jt(t.length,o.length),u||(u=Jt(t[t.length-2],o[o.length-2]),u||Jt(t[t.length-1],o[o.length-1]))}class em{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ap{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&Du(o.mutation,u,$.empty(),lr.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Bn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Bn()){const u=To();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let g=Va();return d.forEach((D,F)=>{g=g.insert(D,F.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const o=To();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Bn()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,D)=>{t.set(g,D)})})}computeViews(e,t,o,u){let d=bo();const g=bu(),D=bu();return t.forEach((F,j)=>{const q=o.get(j.key);u.has(j.key)&&(void 0===q||q.mutation instanceof Ho)?d=d.insert(j.key,j):void 0!==q&&(g.set(j.key,q.mutation.getFieldMask()),Du(q.mutation,j,q.mutation.getFieldMask(),lr.now()))}),this.recalculateAndSaveOverlays(e,d).next(F=>(F.forEach((j,q)=>g.set(j,q)),t.forEach((j,q)=>{var _e;return D.set(j,new em(q,null!==(_e=g.get(j))&&void 0!==_e?_e:null))}),D))}recalculateAndSaveOverlays(e,t){const o=bu();let u=new Pr((g,D)=>g-D),d=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const D of g)D.keys().forEach(F=>{const j=t.get(F);if(null===j)return;let q=o.get(F)||$.empty();q=D.applyToLocalView(j,q),o.set(F,q);const _e=(u.get(D.batchId)||Bn()).add(F);u=u.insert(D.batchId,_e)})}).next(()=>{const g=[],D=u.getReverseIterator();for(;D.hasNext();){const F=D.getNext(),j=F.key,q=F.value,_e=Sl();q.forEach(Ue=>{if(!d.has(Ue)){const ct=nh(t.get(Ue),o.get(Ue));null!==ct&&_e.set(Ue,ct),d=d.add(Ue)}}),g.push(this.documentOverlayCache.saveOverlays(e,j,_e))}return We.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Ot.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Wc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):We.resolve(To());let D=-1,F=d;return g.next(j=>We.forEach(j,(q,_e)=>(D<_e.largestBatchId&&(D=_e.largestBatchId),d.get(q)?We.resolve():this.getBaseDocument(e,q,_e).next(Ue=>{F=F.insert(q,Ue)}))).next(()=>this.populateOverlays(e,j,d)).next(()=>this.computeViews(e,F,j,Bn())).next(q=>({batchId:D,changes:Al(q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ot(t)).next(o=>{let u=Va();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=Va();return this.indexManager.getCollectionParents(e,u).next(g=>We.forEach(g,D=>{const F=(j=t,q=D.child(u),new Co(q,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt));var j,q;return this.getDocumentsMatchingCollectionQuery(e,F,o).next(j=>{j.forEach((q,_e)=>{d=d.insert(q,_e)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((D,F)=>{const j=F.getKey();null===u.get(j)&&(u=u.insert(j,cr.newInvalidDocument(j)))});let g=Va();return u.forEach((D,F)=>{const j=d.get(D);void 0!==j&&Du(j.mutation,F,$.empty(),lr.now()),ic(t,F)&&(g=g.insert(D,F))}),g})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):We.resolve(cr.newInvalidDocument(t))}}class tm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return We.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:zi(o.createTime)}),We.resolve()}getNamedQuery(e,t){return We.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Qf(o.bundledQuery),readTime:zi(o.readTime)}),We.resolve();var o}}class up{constructor(){this.overlays=new Pr(Ot.comparator),this.es=new Map}getOverlay(e,t){return We.resolve(this.overlays.get(t))}getOverlays(e,t){const o=To();return We.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),We.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),We.resolve()}getOverlaysForCollection(e,t,o){const u=To(),d=t.length+1,g=new Ot(t.child("")),D=this.overlays.getIteratorFrom(g);for(;D.hasNext();){const F=D.getNext().value,j=F.getKey();if(!t.isPrefixOf(j.path))break;j.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return We.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Pr((j,q)=>j-q);const g=this.overlays.getIterator();for(;g.hasNext();){const j=g.getNext().value;if(j.getKey().getCollectionGroup()===t&&j.largestBatchId>o){let q=d.get(j.largestBatchId);null===q&&(q=To(),d=d.insert(j.largestBatchId,q)),q.set(j.getKey(),j)}}const D=To(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((j,q)=>D.set(j,q)),!(D.size()>=u)););return We.resolve(D)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new fh(t,o));let d=this.es.get(t);void 0===d&&(d=Bn(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class Ch{constructor(){this.ns=new m(is.ss),this.rs=new m(is.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new is(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new is(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Ot(new xn([])),o=new is(t,e),u=new is(t,e+1),d=[];return this.rs.forEachInRange([o,u],g=>{this.cs(g),d.push(g.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ot(new xn([])),o=new is(t,e),u=new is(t,e+1);let d=Bn();return this.rs.forEachInRange([o,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new is(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class is{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ot.comparator(e.key,t.key)||Jt(e._s,t._s)}static os(e,t){return Jt(e._s,t._s)||Ot.comparator(e.key,t.key)}}class bh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new m(is.ss)}checkEmpty(e){return We.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const g=new Kf(d,t,o,u);this.mutationQueue.push(g);for(const D of u)this.gs=this.gs.add(new is(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return We.resolve(g)}lookupMutationBatch(e,t){return We.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return We.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return We.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new is(t,0),u=new is(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],g=>{const D=this.ys(g._s);d.push(D)}),We.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new m(Jt);return t.forEach(u=>{const d=new is(u,0),g=new is(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,g],D=>{o=o.add(D._s)})}),We.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Ot.isDocumentKey(d)||(d=d.child(""));const g=new is(new Ot(d),0);let D=new m(Jt);return this.gs.forEachWhile(F=>{const j=F.key.path;return!!o.isPrefixOf(j)&&(j.length===u&&(D=D.add(F._s)),!0)},g),We.resolve(this.Is(D))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){fn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return We.forEach(t.mutations,u=>{const d=new is(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new is(t,0),u=this.gs.firstAfterOrEqual(o);return We.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return We.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nm{constructor(e){this.Es=e,this.docs=new Pr(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,g=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return We.resolve(o?o.document.mutableCopy():cr.newInvalidDocument(t))}getEntries(e,t){let o=bo();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():cr.newInvalidDocument(u))}),We.resolve(o)}getAllFromCollection(e,t,o){let u=bo();const d=new Ot(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:D,value:{document:F}}=g.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||Qu(Xl(F),o)<=0||(u=u.insert(F.key,F.mutableCopy()))}return We.resolve(u)}getAllFromCollectionGroup(e,t,o,u){qt()}As(e,t){return We.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new lp(this)}getSize(e){return We.resolve(this.size)}}class lp extends sp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),We.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class rm{constructor(e){this.persistence=e,this.Rs=new La(t=>ba(t),Il),this.lastRemoteSnapshotVersion=an.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ch,this.targetCount=0,this.vs=Ol.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),We.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ol(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,We.resolve()}updateTargetData(e,t){return this.Dn(t),We.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((g,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Rs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),We.waitFor(d).next(()=>u)}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return We.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),We.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),We.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),We.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return We.resolve(o)}containsKey(e,t){return We.resolve(this.Ps.containsKey(t))}}class Th{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Pi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rm(this),this.indexManager=new ep,this.remoteDocumentCache=new nm(o=>this.referenceDelegate.xs(o)),this.It=new $g(t),this.Ns=new tm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new up,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new bh(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){wt("MemoryPersistence","Starting transaction:",e);const u=new yd(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Ms(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Os(e,t){return We.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class yd extends wl{constructor(e){super(),this.currentSequenceNumber=e}}class Ah{constructor(e){this.persistence=e,this.Fs=new Ch,this.$s=null}static Bs(e){return new Ah(e)}get Ls(){if(this.$s)return this.$s;throw qt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),We.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),We.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),We.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.Ls,o=>{const u=Ot.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,an.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return We.or([()=>We.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class im{constructor(e){this.It=e}$(e,t,o,u){const d=new wo("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ch,{unique:!0}),D.createObjectStore("documentMutations"),sm(e),function(D){D.createObjectStore("remoteDocuments")}(e));let g=We.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),sm(e)),g=g.next(()=>function(D){const F=D.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:an.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",j)}(d))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(D,F){return F.store("mutations").W().next(j=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ch,{unique:!0});const q=F.store("mutations"),_e=j.map(Ue=>q.put(Ue));return We.waitFor(_e)})}(e,d))),g=g.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.qs(d))),o<6&&u>=6&&(g=g.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(g=g.next(()=>this.Gs(d))),o<8&&u>=8&&(g=g.next(()=>this.Qs(e,d))),o<9&&u>=9&&(g=g.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.js(d))),o<11&&u>=11&&(g=g.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(D){const F=D.createObjectStore("documentOverlays",{keyPath:jy});F.createIndex("collectionPathOverlayIndex",$y,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",Hy,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(D){const F=D.createObjectStore("remoteDocumentsV14",{keyPath:hh});F.createIndex("documentKeyIndex",Gf),F.createIndex("collectionGroupIndex",Fg)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.zs(e,d))),o<15&&u>=15&&(g=g.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Zf}).createIndex("sequenceNumberIndex",By,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Wf}).createIndex("documentKeyIndex",cd,{unique:!1})}(e))),g}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Pu(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>We.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(D=>We.forEach(D,F=>{fn(F.userId===d.userId);const j=ja(this.It,F);return Qy(e,d.userId,j).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((g,D)=>{const F=new xn(g),j=[0,ps(F)];d.push(t.get(j).next(q=>q?We.resolve():t.put({targetId:0,path:ps(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>We.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Ug});const o=t.store("collectionParents"),u=new pd,d=g=>{if(u.add(g)){const D=g.lastSegment(),F=g.popLast();return o.put({collectionId:D,parent:ps(F)})}};return t.store("remoteDocuments").Z({X:!0},(g,D)=>{const F=new xn(g);return d(F.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([g,D,F],j)=>{const q=Ao(D);return d(q.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=pc(u),g=Hg(this.It,d);return t.put(g)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,g)=>{const D=t.store("remoteDocumentsV14"),F=(j=g,j.document?new Ot(xn.fromString(j.document.name).popFirst(5)):j.noDocument?Ot.fromSegments(j.noDocument.path):j.unknownDocument?Ot.fromSegments(j.unknownDocument.path):qt()).path.toArray();var j;const q={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(D.put(q))}).next(()=>We.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=dl(this.It),d=new Th(Ah.Bs,this.It.re);return o.W().next(g=>{const D=new Map;return g.forEach(F=>{var j;let q=null!==(j=D.get(F.userId))&&void 0!==j?j:Bn();ja(this.It,F).keys().forEach(_e=>q=q.add(_e)),D.set(F.userId,q)}),We.forEach(D,(F,j)=>{const q=new Wr(j),_e=mh.oe(this.It,q),Ue=d.getIndexManager(q),ct=mc.oe(q,this.It,Ue,d.referenceDelegate);return new ap(u,ct,_e,Ue).recalculateAndSaveOverlaysForDocumentKeys(new dd(t,Pi.at),F).next()})})}}function sm(i){i.createObjectStore("targetDocuments",{keyPath:Lg}).createIndex("documentTargetsIndex",Vg,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zf,{unique:!0}),i.createObjectStore("targetGlobal")}const cp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sh{constructor(e,t,o,u,d,g,D,F,j,q,_e=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=g,this.document=D,this.Js=j,this.Ys=q,this.Xs=_e,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ue=>Promise.resolve(),!Sh.C())throw new vt(Ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xy(this,u),this.ii=t+"main",this.It=new $g(F),this.ri=new uo(this.ii,this.Xs,new im(this.It)),this.Cs=new Jy(this.referenceDelegate,this.It),this.remoteDocumentCache=dl(this.It),this.Ns=new Zy,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===q&&kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(Ye.FAILED_PRECONDITION,cp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Pi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,ce.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ce.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ce.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(_i(e))return wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return kl(e).get("owner").next(t=>We.resolve(this.mi(t)))}gi(e){return vd(e).delete(this.clientId)}yi(){var e=this;return(0,ce.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Bs(o,"clientMetadata");return u.W().next(d=>{const g=e.Ii(d,18e5),D=d.filter(F=>-1===g.indexOf(F));return We.forEach(D,F=>u.delete(F.clientId)).next(()=>D)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?We.resolve(!0):kl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new vt(Ye.FAILED_PRECONDITION,cp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ce.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new dd(t,Pi.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return mc.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Zg(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return mh.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){wt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(g=this.Xs)?zy:14===g?jg:13===g?Bg:12===g?Gy:11===g?qf:void qt();var g;let D;return this.ri.runTransaction(e,u,d,F=>(D=new dd(F,this.Ss?this.Ss.next():Pi.at),"readwrite-primary"===t?this.fi(D).next(j=>!!j||this.di(D)).next(j=>{if(!j)throw kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new vt(Ye.FAILED_PRECONDITION,na);return o(D)}).next(j=>this.wi(D).next(()=>j)):this.Vi(D).next(()=>o(D)))).then(F=>(D.raiseOnCommittedEvent(),F))}Vi(e){return kl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new vt(Ye.FAILED_PRECONDITION,cp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kl(e).put("owner",t)}static C(){return uo.C()}_i(e){const t=kl(e);return t.get("owner").next(o=>this.mi(o)?(wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):We.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(kn(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ge.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return wt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return kn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){kn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kl(i){return Bs(i,"owner")}function vd(i){return Bs(i,"clientMetadata")}function om(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Mh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=Bn(),u=Bn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Mh(e,t.fromCache,o,u)}}class am{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Mi(e,t,u,o)).next(d=>d||this.Oi(e,t))}ki(e,t){if(Zc(t))return We.resolve(null);let o=lo(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=bl(t,null,"F"),o=lo(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const g=Bn(...d);return this.Ni.getDocuments(e,g).next(D=>this.indexManager.getMinOffset(e,o).next(F=>{const j=this.Fi(t,D);return this.$i(t,j,g,F.readTime)?this.ki(e,bl(t,null,"F")):this.Bi(e,j,t,F)}))})))}Mi(e,t,o,u){return Zc(t)||u.isEqual(an.min())?this.Oi(e,t):this.Ni.getDocuments(e,o).next(d=>{const g=this.Fi(t,d);return this.$i(t,g,o,u)?this.Oi(e,t):(Ku()<=Be.in.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Eu(t)),this.Bi(e,g,t,mu(u,-1)))})}Fi(e,t){let o=new m(kf(e));return t.forEach((u,d)=>{ic(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Oi(e,t){return Ku()<=Be.in.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",Eu(t)),this.Ni.getDocumentsMatchingQuery(e,t,ns.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class um{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new Pr(Jt),this.qi=new La(d=>ba(d),Il),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ap(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function lm(i,e,t,o){return new um(i,e,t,o)}function cm(i,e){return ca.apply(this,arguments)}function ca(){return ca=(0,ce.Z)(function*(i,e){const t=Lt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const g=[],D=[];let F=Bn();for(const j of u){g.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}for(const j of d){D.push(j.batchId);for(const q of j.mutations)F=F.add(q.key)}return t.localDocuments.getDocuments(o,F).next(j=>({ji:j,removedBatchIds:g,addedBatchIds:D}))})})}),ca.apply(this,arguments)}function ev(i,e){const t=Lt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(g,D,F,j){const q=F.batch,_e=q.keys();let Ue=We.resolve();return _e.forEach(ct=>{Ue=Ue.next(()=>j.getEntry(D,ct)).next(ft=>{const $t=F.docVersions.get(ct);fn(null!==$t),ft.version.compareTo($t)<0&&(q.applyToRemoteDocument(ft,F),ft.isValidDocument()&&(ft.setReadTime(F.commitVersion),j.addEntry(ft)))})}),Ue.next(()=>g.mutationQueue.removeMutationBatch(D,q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let D=Bn();for(let F=0;F<g.mutationResults.length;++F)g.mutationResults[F].transformResults.length>0&&(D=D.add(g.batch.mutations[F].key));return D}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function dp(i){const e=Lt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function tv(i,e){const t=Lt(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const D=[];e.targetChanges.forEach((q,_e)=>{const Ue=u.get(_e);if(!Ue)return;D.push(t.Cs.removeMatchingKeys(d,q.removedDocuments,_e).next(()=>t.Cs.addMatchingKeys(d,q.addedDocuments,_e)));let ct=Ue.withSequenceNumber(d.currentSequenceNumber);var ft,$t,en;e.targetMismatches.has(_e)?ct=ct.withResumeToken(oe.EMPTY_BYTE_STRING,an.min()).withLastLimboFreeSnapshotVersion(an.min()):q.resumeToken.approximateByteSize()>0&&(ct=ct.withResumeToken(q.resumeToken,o)),u=u.insert(_e,ct),$t=ct,en=q,(0===(ft=Ue).resumeToken.approximateByteSize()||$t.snapshotVersion.toMicroseconds()-ft.snapshotVersion.toMicroseconds()>=3e8||en.addedDocuments.size+en.modifiedDocuments.size+en.removedDocuments.size>0)&&D.push(t.Cs.updateTargetData(d,ct))});let F=bo(),j=Bn();if(e.documentUpdates.forEach(q=>{e.resolvedLimboDocuments.has(q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,q))}),D.push(dm(d,g,e.documentUpdates).next(q=>{F=q.Wi,j=q.zi})),!o.isEqual(an.min())){const q=t.Cs.getLastRemoteSnapshotVersion(d).next(_e=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(q)}return We.waitFor(D).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,F,j)).next(()=>F)}).then(d=>(t.Ui=u,d))}function dm(i,e,t){let o=Bn(),u=Bn();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let g=bo();return t.forEach((D,F)=>{const j=d.get(D);F.isFoundDocument()!==j.isFoundDocument()&&(u=u.add(D)),F.isNoDocument()&&F.version.isEqual(an.min())?(e.removeEntry(D,F.readTime),g=g.insert(D,F)):!j.isValidDocument()||F.version.compareTo(j.version)>0||0===F.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(F),g=g.insert(D,F)):wt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",j.version," Watch version:",F.version)}),{Wi:g,zi:u}})}function nv(i,e){const t=Lt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function vc(i,e){const t=Lt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,We.resolve(u)):t.Cs.allocateTargetId(o).next(g=>(u=new ol(e,g,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Fl(i,e,t){return hp.apply(this,arguments)}function hp(){return hp=(0,ce.Z)(function*(i,e,t){const o=Lt(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!_i(g))throw g;wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),hp.apply(this,arguments)}function xh(i,e,t){const o=Lt(i);let u=an.min(),d=Bn();return o.persistence.runTransaction("Execute query","readonly",g=>function(D,F,j){const q=Lt(D),_e=q.qi.get(j);return void 0!==_e?We.resolve(q.Ui.get(_e)):q.Cs.getTargetData(F,j)}(o,g,lo(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(g,D.targetId).next(F=>{d=F})}).next(()=>o.Li.getDocumentsMatchingQuery(g,e,t?u:an.min(),t?d:Bn())).next(D=>(fp(o,eh(e),D),{documents:D,Hi:d})))}function hm(i,e){const t=Lt(i),o=Lt(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(g=>g?g.target:null))}function jn(i,e){const t=Lt(i),o=t.Ki.get(e)||an.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,mu(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(fp(t,e,u),u))}function fp(i,e,t){let o=an.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function Rh(){return Rh=(0,ce.Z)(function*(i,e,t,o){const u=Lt(i);let d=Bn(),g=bo();for(const j of t){const q=e.Ji(j.metadata.name);j.document&&(d=d.add(q));const _e=e.Yi(j);_e.setReadTime(e.Xi(j.metadata.readTime)),g=g.insert(q,_e)}const D=u.Gi.newChangeBuffer({trackRemovals:!0}),F=yield vc(u,(j=o,lo(_u(xn.fromString(`__bundle__/docs/${j}`)))));var j;return u.persistence.runTransaction("Apply bundle documents","readwrite",j=>dm(j,D,g).next(q=>(D.apply(j),q)).next(q=>u.Cs.removeMatchingKeysForTargetId(j,F.targetId).next(()=>u.Cs.addMatchingKeys(j,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(j,q.Wi,q.zi)).next(()=>q.Wi)))}),Rh.apply(this,arguments)}function rv(i,e){return pp.apply(this,arguments)}function pp(){return pp=(0,ce.Z)(function*(i,e,t=Bn()){const o=yield vc(i,lo(Qf(e.bundledQuery))),u=Lt(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=zi(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Ns.saveNamedQuery(d,e);const D=o.withResumeToken(oe.EMPTY_BYTE_STRING,g);return u.Ui=u.Ui.insert(D.targetId,D),u.Cs.updateTargetData(d,D).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),pp.apply(this,arguments)}function gp(i,e){return`firestore_clients_${i}_${e}`}function pm(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Nh(i,e){return`firestore_targets_${i}_${e}`}class Oh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new vt(u.error.code,u.error.message))),g?new Oh(e,t,u.state,d):(kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _d{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new vt(o.error.code,o.error.message))),d?new _d(e,o.state,u):(kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=Tu();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=sa(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return u?new mp(e,d):(kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ph{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ph(t.clientId,t.onlineState):(kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kh{constructor(){this.activeTargetIds=Tu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ku{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Pr(Jt),this.started=!1,this.cr=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=gp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new kh),this.lr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(gp(e.persistenceKey,u));if(d){const g=mp.Zi(u,d);g&&(e.ur=e.ur.insert(g.clientId,g))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Nh(this.persistenceKey,e));if(o){const u=_d.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nh(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return wt("SharedClientState","READ",e,t),t}setItem(e,t){wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(wt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ce.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let g=Pi.at;if(null!=d)try{const D=JSON.parse(d);fn("number"==typeof D),g=D}catch(D){kn("SharedClientState","Failed to read sequence number from WebStorage",D)}return g}(o.newValue);u!==Pi.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Mr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Or(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new Oh(this.currentUser,e,t,o),d=pm(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=pm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=Nh(this.persistenceKey,e),d=new _d(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return mp.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return Oh.Zi(new Wr(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return _d.Zi(u,t)}yr(e){return Ph.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),g=[],D=[];return d.forEach(F=>{u.has(F)||g.push(F)}),u.forEach(F=>{d.has(F)||D.push(F)}),this.syncEngine.Br(g,D).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Tu();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class gm{constructor(){this.Lr=new kh,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new kh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yp{qr(e){}shutdown(){}}class Fh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const iv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class z_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Z_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,u,d){const g=this.ao(e,t);wt("RestConnection","Sending: ",g,o);const D={};return this.ho(D,u,d),this.lo(e,g,D,o).then(F=>(wt("RestConnection","Received: ",F),F),F=>{throw vi("RestConnection",`${e} failed with error: `,F,"url: ",g,"request:",o),F})}fo(e,t,o,u,d,g){return this.co(e,t,o,u,d)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ts,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ao(e,t){return`${this.oo}/v1/${t}:${iv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,u){return new Promise((d,g)=>{const D=new Ai;D.listenOnce(ea.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Xo.NO_ERROR:const j=D.getResponseJson();wt("Connection","XHR received:",JSON.stringify(j)),d(j);break;case Xo.TIMEOUT:wt("Connection",'RPC "'+e+'" timed out'),g(new vt(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case Xo.HTTP_ERROR:const q=D.getStatus();if(wt("Connection",'RPC "'+e+'" failed with status:',q,"response text:",D.getResponseText()),q>0){const _e=D.getResponseJson().error;if(_e&&_e.status&&_e.message){const Ue=function(ct){const ft=ct.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(ft)>=0?ft:Ye.UNKNOWN}(_e.status);g(new vt(Ue,_e.message))}else g(new vt(Ye.UNKNOWN,"Server responded with status "+D.getStatus()))}else g(new vt(Ye.UNAVAILABLE,"Connection failed."));break;default:qt()}}finally{wt("Connection",'RPC "'+e+'" completed.')}});const F=JSON.stringify(u);D.send(t,"POST",F,o,15)})}_o(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=qu(),g=Wa(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new fu({})),this.ho(D.initMessageHeaders,t,o),D.encodeInitMessageHeaders=!0;const F=u.join("");wt("Connection","Creating WebChannel: "+F,D);const j=d.createWebChannel(F,D);let q=!1,_e=!1;const Ue=new z_({Hr:ft=>{_e?wt("Connection","Not sending because WebChannel is closed:",ft):(q||(wt("Connection","Opening WebChannel transport."),j.open(),q=!0),wt("Connection","WebChannel sending:",ft),j.send(ft))},Jr:()=>j.close()}),ct=(ft,$t,en)=>{ft.listen($t,vr=>{try{en(vr)}catch(Gr){setTimeout(()=>{throw Gr},0)}})};return ct(j,va.EventType.OPEN,()=>{_e||wt("Connection","WebChannel transport opened.")}),ct(j,va.EventType.CLOSE,()=>{_e||(_e=!0,wt("Connection","WebChannel transport closed"),Ue.io())}),ct(j,va.EventType.ERROR,ft=>{_e||(_e=!0,vi("Connection","WebChannel transport errored:",ft),Ue.io(new vt(Ye.UNAVAILABLE,"The operation could not be completed")))}),ct(j,va.EventType.MESSAGE,ft=>{var $t;if(!_e){const en=ft.data[0];fn(!!en);const vr=en,Gr=vr.error||(null===($t=vr[0])||void 0===$t?void 0:$t.error);if(Gr){wt("Connection","WebChannel received error:",Gr);const Mr=Gr.status;let Vi=function(Cr){const Ms=Li[Cr];if(void 0!==Ms)return ih(Ms)}(Mr),hr=Gr.message;void 0===Vi&&(Vi=Ye.INTERNAL,hr="Unknown error status: "+Mr+" with message "+Gr.message),_e=!0,Ue.io(new vt(Vi,hr)),j.close()}else wt("Connection","WebChannel received:",en),Ue.ro(en)}}),ct(g,qa.STAT_EVENT,ft=>{ft.stat===ya.PROXY?wt("Connection","Detected buffering proxy"):ft.stat===ya.NOPROXY&&wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ue.so()},0),Ue}}function sv(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}function _c(i){return new Mu(i,!0)}class mm{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.wo=o,this.mo=u,this.yo=d,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),u=Math.max(0,t-o);u>0&&wt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class ym{constructor(e,t,o,u,d,g,D,F){this.Hs=e,this.Po=o,this.vo=u,this.Vo=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=D,this.listener=F,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new mm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ce.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ce.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,ce.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(kn(t.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):t&&t.code===Ye.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.So===t&&this.Go(o,u)},o=>{e(()=>{const u=new vt(Ye.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(u)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.Qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ce.Z)(function*(){e.state=0,e.start()}))}Qo(e){return wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ec extends ym{constructor(e,t,o,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,g),this.It=d}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function y(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:qt(),u=e.targetChange.targetIds||[],d=function(F,j){return F.gt?(fn(void 0===j||"string"==typeof j),oe.fromBase64String(j||"")):(fn(void 0===j||j instanceof Uint8Array),oe.fromUint8Array(j||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,D=g&&function(F){const j=void 0===F.code?Ye.UNKNOWN:ih(F.code);return new vt(j,F.message||"")}(g);t=new tu(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=la(i,o.document.name),d=zi(o.document.updateTime),g=new di({mapValue:{fields:o.document.fields}}),D=cr.newFoundDocument(u,d,g);t=new Su(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=la(i,o.document),d=o.readTime?zi(o.readTime):an.min(),g=cr.newNoDocument(u,d);t=new Su([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=la(i,o.document);t=new Su([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return qt();{const o=e.filter,d=new nd(o.count||0);t=new Ml(o.targetId,d)}}var F;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return an.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?an.min():d.readTime?zi(d.readTime):an.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=Ba(this.It),t.addTarget=function(u,d){let g;const D=d.target;return g=tc(D)?{documents:U(u,D)}:{query:W(u,D)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=As(u,d.resumeToken):d.snapshotVersion.compareTo(an.min())>0&&(g.readTime=xu(u,d.snapshotVersion.toTimestamp())),g}(this.It,e);const o=function tt(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=Ba(this.It),t.removeTarget=e,this.Bo(t)}}class ov extends ym{constructor(e,t,o,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,g),this.It=d,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function w(i,e){return i&&i.length>0?(fn(void 0!==e),i.map(t=>function(o,u){let d=zi(o.updateTime?o.updateTime:u);return d.isEqual(an.min())&&(d=zi(u)),new Jc(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=zi(e.commitTime);return this.listener.Zo(o,t)}return fn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Ba(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>c(this.It,o))};this.Bo(t)}}class vm extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=o,this.It=u,this.nu=!1}su(){if(this.nu)throw new vt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.co(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new vt(Ye.UNKNOWN,u.toString())})}fo(e,t,o,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.Vo.fo(e,t,o,d,g,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new vt(Ye.UNKNOWN,d.toString())})}terminate(){this.nu=!0}}class Vh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(kn(t),this.ou=!1):wt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class av{constructor(e,t,o,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=d,this.mu.qr(D=>{o.enqueueAndForget((0,ce.Z)(function*(){var F;ru(g)&&(wt("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,ce.Z)(function*(j){const q=Lt(j);q._u.add(4),yield Ic(q),q.gu.set("Unknown"),q._u.delete(4),yield wc(q)}),function(j){return F.apply(this,arguments)})(g))}))}),this.gu=new Vh(o,u)}}function wc(i){return vp.apply(this,arguments)}function vp(){return vp=(0,ce.Z)(function*(i){if(ru(i))for(const e of i.wu)yield e(!0)}),vp.apply(this,arguments)}function Ic(i){return _p.apply(this,arguments)}function _p(){return _p=(0,ce.Z)(function*(i){for(const e of i.wu)yield e(!1)}),_p.apply(this,arguments)}function Uh(i,e){const t=Lt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),$h(t)?jh(t):bc(t).ko()&&Bh(t,e))}function Ed(i,e){const t=Lt(i),o=bc(t);t.du.delete(e),o.ko()&&_m(t,e),0===t.du.size&&(o.ko()?o.Fo():ru(t)&&t.gu.set("Unknown"))}function Bh(i,e){i.yu.Ot(e.targetId),bc(i).zo(e)}function _m(i,e){i.yu.Ot(e),bc(i).Ho(e)}function jh(i){i.yu=new id({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),bc(i).start(),i.gu.uu()}function $h(i){return ru(i)&&!bc(i).No()&&i.du.size>0}function ru(i){return 0===Lt(i)._u.size}function uv(i){i.yu=void 0}function Ep(i){return wp.apply(this,arguments)}function wp(){return wp=(0,ce.Z)(function*(i){i.du.forEach((e,t)=>{Bh(i,e)})}),wp.apply(this,arguments)}function W_(i,e){return hl.apply(this,arguments)}function hl(){return hl=(0,ce.Z)(function*(i,e){uv(i),$h(i)?(i.gu.hu(e),jh(i)):i.gu.set("Unknown")}),hl.apply(this,arguments)}function Em(i,e,t){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,ce.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof tu&&2===e.state&&e.cause)try{yield(o=(0,ce.Z)(function*(u,d){const g=d.cause;for(const D of d.targetIds)u.du.has(D)&&(yield u.remoteSyncer.rejectListen(D,g),u.du.delete(D),u.yu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Ll(i,o)}else if(e instanceof Su?i.yu.Gt(e):e instanceof Ml?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(an.min()))try{const o=yield dp(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const g=u.yu.te(d);return g.targetChanges.forEach((D,F)=>{if(D.resumeToken.approximateByteSize()>0){const j=u.du.get(F);j&&u.du.set(F,j.withResumeToken(D.resumeToken,d))}}),g.targetMismatches.forEach(D=>{const F=u.du.get(D);if(!F)return;u.du.set(D,F.withResumeToken(oe.EMPTY_BYTE_STRING,F.snapshotVersion)),_m(u,D);const j=new ol(F.target,D,1,F.sequenceNumber);Bh(u,j)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){wt("RemoteStore","Failed to raise snapshot:",o),yield Ll(i,o)}var o}),Hh.apply(this,arguments)}function Ll(i,e,t){return da.apply(this,arguments)}function da(){return da=(0,ce.Z)(function*(i,e,t){if(!_i(e))throw e;i._u.add(1),yield Ic(i),i.gu.set("Offline"),t||(t=()=>dp(i.localStore)),i.asyncQueue.enqueueRetryable((0,ce.Z)(function*(){wt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield wc(i)}))}),da.apply(this,arguments)}function Ip(i,e){return e().catch(t=>Ll(i,t,e))}function Dc(i){return wd.apply(this,arguments)}function wd(){return wd=(0,ce.Z)(function*(i){const e=Lt(i),t=Lu(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Fu(e);)try{const u=yield nv(e.localStore,o);if(null===u){0===e.fu.length&&t.Fo();break}o=u.batchId,Dp(e,u)}catch(u){yield Ll(e,u)}Cp(e)&&Gh(e)}),wd.apply(this,arguments)}function Fu(i){return ru(i)&&i.fu.length<10}function Dp(i,e){i.fu.push(e);const t=Lu(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Cp(i){return ru(i)&&!Lu(i).No()&&i.fu.length>0}function Gh(i){Lu(i).start()}function q_(i){return zh.apply(this,arguments)}function zh(){return zh=(0,ce.Z)(function*(i){Lu(i).eu()}),zh.apply(this,arguments)}function K_(i){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,ce.Z)(function*(i){const e=Lu(i);for(const t of i.fu)e.Xo(t.mutations)}),Cc.apply(this,arguments)}function Zh(i,e,t){return Id.apply(this,arguments)}function Id(){return Id=(0,ce.Z)(function*(i,e,t){const o=i.fu.shift(),u=Yf.from(o,e,t);yield Ip(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Dc(i)}),Id.apply(this,arguments)}function bp(i,e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,ce.Z)(function*(i,e){var t;e&&Lu(i).Yo&&(yield(t=(0,ce.Z)(function*(o,u){if(rl(d=u.code)&&d!==Ye.ABORTED){const g=o.fu.shift();Lu(o).Oo(),yield Ip(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield Dc(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Cp(i)&&Gh(i)}),Dd.apply(this,arguments)}function lv(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,ce.Z)(function*(i,e){const t=Lt(i);t.asyncQueue.verifyOperationInProgress(),wt("RemoteStore","RemoteStore received new credentials");const o=ru(t);t._u.add(3),yield Ic(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield wc(t)}),Tp.apply(this,arguments)}function Ap(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ce.Z)(function*(i,e){const t=Lt(i);e?(t._u.delete(2),yield wc(t)):e||(t._u.add(2),yield Ic(t),t.gu.set("Unknown"))}),Sp.apply(this,arguments)}function bc(i){return i.pu||(i.pu=function(e,t,o){const u=Lt(e);return u.su(),new Ec(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Ep.bind(null,i),Zr:W_.bind(null,i),Wo:Em.bind(null,i)}),i.wu.push(function(){var e=(0,ce.Z)(function*(t){t?(i.pu.Oo(),$h(i)?jh(i):i.gu.set("Unknown")):(yield i.pu.stop(),uv(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Lu(i){return i.Iu||(i.Iu=function(e,t,o){const u=Lt(e);return u.su(),new ov(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:q_.bind(null,i),Zr:bp.bind(null,i),tu:K_.bind(null,i),Zo:Zh.bind(null,i)}),i.wu.push(function(){var e=(0,ce.Z)(function*(t){t?(i.Iu.Oo(),yield Dc(i)):(yield i.Iu.stop(),i.fu.length>0&&(wt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class wm{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,o,u,d){const g=Date.now()+o,D=new wm(e,t,g,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vt(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tc(i,e){if(kn("AsyncQueue",`${e}: ${i}`),_i(i))return new vt(Ye.UNAVAILABLE,`${e}: ${i}`);throw i}class Cd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ot.comparator(t.key,o.key):(t,o)=>Ot.comparator(t.key,o.key),this.keyedMap=Va(),this.sortedSet=new Pr(this.comparator)}static emptySet(e){return new Cd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Cd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Mp{constructor(){this.Tu=new Pr(Ot.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):qt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Vl{constructor(e,t,o,u,d,g,D,F){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=D,this.excludesMetadataChanges=F}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Vl(e,t,Cd.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class cv{constructor(){this.Au=void 0,this.listeners=[]}}class xp{constructor(){this.queries=new La(e=>ua(e),Tl),this.onlineState="Unknown",this.Ru=new Set}}function Im(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,ce.Z)(function*(i,e){const t=Lt(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new cv),u)try{d.Au=yield t.onListen(o)}catch(g){const D=Tc(g,`Initialization of query '${Eu(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.bu(t.onlineState),d.Au&&e.Pu(d.Au)&&Tm(t)}),Dm.apply(this,arguments)}function Cm(i,e){return bm.apply(this,arguments)}function bm(){return bm=(0,ce.Z)(function*(i,e){const t=Lt(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),bm.apply(this,arguments)}function Y_(i,e){const t=Lt(i);let o=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const D of g.listeners)D.Pu(u)&&(o=!0);g.Au=u}}o&&Tm(t)}function Q_(i,e,t){const o=Lt(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function Tm(i){i.Ru.forEach(e=>{e.next()})}class Am{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Vl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class J_{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class dv{constructor(e){this.It=e}Ji(e){return la(this.It,e)}Yi(e){return e.metadata.exists?ah(this.It,e.document,!1):cr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return zi(e)}}class fl{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wh(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=xn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,o=new dv(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const g of u.metadata.queries){const D=(t.get(g)||Bn()).add(d);t.set(g,D)}}return t}complete(){var e=this;return(0,ce.Z)(function*(){const t=yield function fm(i,e,t,o){return Rh.apply(this,arguments)}(e.localStore,new dv(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const u of e.queries)yield rv(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Wh(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Sm{constructor(e){this.key=e}}class Rp{constructor(e){this.key=e}}class qh{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Bn(),this.mutatedKeys=Bn(),this.Ku=kf(e),this.Gu=new Cd(this.Ku)}get Qu(){return this.Lu}ju(e,t){const o=t?t.Wu:new Mp,u=t?t.Gu:this.Gu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,D=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,j="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((q,_e)=>{const Ue=u.get(q),ct=ic(this.query,_e)?_e:null,ft=!!Ue&&this.mutatedKeys.has(Ue.key),$t=!!ct&&(ct.hasLocalMutations||this.mutatedKeys.has(ct.key)&&ct.hasCommittedMutations);let en=!1;Ue&&ct?Ue.data.isEqual(ct.data)?ft!==$t&&(o.track({type:3,doc:ct}),en=!0):this.zu(Ue,ct)||(o.track({type:2,doc:ct}),en=!0,(F&&this.Ku(ct,F)>0||j&&this.Ku(ct,j)<0)&&(D=!0)):!Ue&&ct?(o.track({type:0,doc:ct}),en=!0):Ue&&!ct&&(o.track({type:1,doc:Ue}),en=!0,(F||j)&&(D=!0)),en&&(ct?(g=g.add(ct),d=$t?d.add(q):d.delete(q)):(g=g.delete(q),d=d.delete(q)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const q="F"===this.query.limitType?g.last():g.first();g=g.delete(q.key),d=d.delete(q.key),o.track({type:1,doc:q})}return{Gu:g,Wu:o,$i:D,mutatedKeys:d}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const d=e.Wu.Eu();d.sort((j,q)=>function(_e,Ue){const ct=ft=>{switch(ft){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt()}};return ct(_e)-ct(Ue)}(j.type,q.type)||this.Ku(j.doc,q.doc)),this.Hu(o);const g=t?this.Ju():[],D=0===this.qu.size&&this.current?1:0,F=D!==this.Uu;return this.Uu=D,0!==d.length||F?{snapshot:new Vl(this.query,e.Gu,u,d,e.mutatedKeys,0===D,F,!1),Yu:g}:{Yu:g}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Mp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Bn(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const t=[];return e.forEach(o=>{this.qu.has(o)||t.push(new Rp(o))}),this.qu.forEach(o=>{e.has(o)||t.push(new Sm(o))}),t}Zu(e){this.Lu=e.Hi,this.qu=Bn();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Vl.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Mm{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Np{constructor(e){this.key=e,this.ec=!1}}class hv{constructor(e,t,o,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.nc={},this.sc=new La(D=>ua(D),Tl),this.ic=new Map,this.rc=new Set,this.oc=new Pr(Ot.comparator),this.uc=new Map,this.cc=new Ch,this.ac={},this.hc=new Map,this.lc=Ol.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function pl(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,ce.Z)(function*(i,e){const t=qp(i);let o,u;const d=t.sc.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.tc();else{const g=yield vc(t.localStore,lo(e));t.isPrimaryClient&&Uh(t.remoteStore,g);const D=t.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield Op(t,e,o,"current"===D)}return u}),Kh.apply(this,arguments)}function Op(i,e,t,o){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,ce.Z)(function*(i,e,t,o){i.dc=(q,_e,Ue)=>{return(ct=(0,ce.Z)(function*(ft,$t,en,vr){let Gr=$t.view.ju(en);Gr.$i&&(Gr=yield xh(ft.localStore,$t.query,!1).then(({documents:hr})=>$t.view.ju(hr,Gr)));const Mr=vr&&vr.targetChanges.get($t.targetId),Vi=$t.view.applyChanges(Gr,ft.isPrimaryClient,Mr);return Bp(ft,$t.targetId,Vi.Yu),Vi.snapshot}),function(ft,$t,en,vr){return ct.apply(this,arguments)})(i,q,_e,Ue);var ct};const u=yield xh(i.localStore,e,!0),d=new qh(e,u.Hi),g=d.ju(u.documents),D=Au.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),F=d.applyChanges(g,i.isPrimaryClient,D);Bp(i,t,F.Yu);const j=new Mm(e,t,d);return i.sc.set(e,j),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),F.snapshot}),Pp.apply(this,arguments)}function xm(i,e){return kp.apply(this,arguments)}function kp(){return kp=(0,ce.Z)(function*(i,e){const t=Lt(i),o=t.sc.get(e),u=t.ic.get(o.targetId);if(u.length>1)return t.ic.set(o.targetId,u.filter(d=>!Tl(d,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Fl(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ed(t.remoteStore,o.targetId),Mc(t,o.targetId)}).catch(wa))):(Mc(t,o.targetId),yield Fl(t.localStore,o.targetId,!0))}),kp.apply(this,arguments)}function Ac(){return Ac=(0,ce.Z)(function*(i,e,t){const o=Kp(i);try{const u=yield function(d,g){const D=Lt(d),F=lr.now(),j=g.reduce((Ue,ct)=>Ue.add(ct.key),Bn());let q,_e;return D.persistence.runTransaction("Locally write mutations","readwrite",Ue=>{let ct=bo(),ft=Bn();return D.Gi.getEntries(Ue,j).next($t=>{ct=$t,ct.forEach((en,vr)=>{vr.isValidDocument()||(ft=ft.add(en))})}).next(()=>D.localDocuments.getOverlayedDocuments(Ue,ct)).next($t=>{q=$t;const en=[];for(const vr of g){const Gr=Xc(vr,q.get(vr.key).overlayedDocument);null!=Gr&&en.push(new Ho(vr.key,Gr,oa(Gr.value.mapValue),Ei.exists(!0)))}return D.mutationQueue.addMutationBatch(Ue,F,en,g)}).next($t=>{_e=$t;const en=$t.applyToLocalDocumentSet(q,ft);return D.documentOverlayCache.saveOverlays(Ue,$t.batchId,en)})}).then(()=>({batchId:_e.batchId,changes:Al(q)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,g,D){let F=d.ac[d.currentUser.toKey()];F||(F=new Pr(Jt)),F=F.insert(g,D),d.ac[d.currentUser.toKey()]=F}(o,u.batchId,t),yield Vu(o,u.changes),yield Dc(o.remoteStore)}catch(u){const d=Tc(u,"Failed to persist write");t.reject(d)}}),Ac.apply(this,arguments)}function Ul(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,ce.Z)(function*(i,e){const t=Lt(i);try{const o=yield tv(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.uc.get(d);g&&(fn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.ec=!0:u.modifiedDocuments.size>0?fn(g.ec):u.removedDocuments.size>0&&(fn(g.ec),g.ec=!1))}),yield Vu(t,o,e)}catch(o){yield wa(o)}}),bd.apply(this,arguments)}function Bl(i,e,t){const o=Lt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.sc.forEach((d,g)=>{const D=g.view.bu(e);D.snapshot&&u.push(D.snapshot)}),function(d,g){const D=Lt(d);D.onlineState=g;let F=!1;D.queries.forEach((j,q)=>{for(const _e of q.listeners)_e.bu(g)&&(F=!0)}),F&&Tm(D)}(o.eventManager,e),u.length&&o.nc.Wo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Fp(i,e,t){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,ce.Z)(function*(i,e,t){const o=Lt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.uc.get(e),d=u&&u.key;if(d){let g=new Pr(Ot.comparator);g=g.insert(d,cr.newNoDocument(d,an.min()));const D=Bn().add(d),F=new il(an.min(),new Map,new m(Jt),g,D);yield Ul(o,F),o.oc=o.oc.remove(d),o.uc.delete(e),Qh(o)}else yield Fl(o.localStore,e,!1).then(()=>Mc(o,e,t)).catch(wa)}),Sc.apply(this,arguments)}function Rm(i,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,ce.Z)(function*(i,e){const t=Lt(i),o=e.batch.batchId;try{const u=yield ev(t.localStore,e);Om(t,o,null),Vp(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Vu(t,u)}catch(u){yield wa(u)}}),Yh.apply(this,arguments)}function Lp(i,e,t){return Td.apply(this,arguments)}function Td(){return Td=(0,ce.Z)(function*(i,e,t){const o=Lt(i);try{const u=yield function(d,g){const D=Lt(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let j;return D.mutationQueue.lookupMutationBatch(F,g).next(q=>(fn(null!==q),j=q.keys(),D.mutationQueue.removeMutationBatch(F,q))).next(()=>D.mutationQueue.performConsistencyCheck(F)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(F,j,g)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,j)).next(()=>D.localDocuments.getDocuments(F,j))})}(o.localStore,e);Om(o,e,t),Vp(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Vu(o,u)}catch(u){yield wa(u)}}),Td.apply(this,arguments)}function Ad(){return Ad=(0,ce.Z)(function*(i,e){const t=Lt(i);ru(t.remoteStore)||wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=Lt(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>g.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.hc.get(o)||[];u.push(e),t.hc.set(o,u)}catch(o){const u=Tc(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Ad.apply(this,arguments)}function Vp(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function Om(i,e,t){const o=Lt(i);let u=o.ac[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ac[o.currentUser.toKey()]=u}}function Mc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),t&&i.nc._c(o,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||Up(i,o)})}function Up(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(Ed(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),Qh(i))}function Bp(i,e,t){for(const o of t)o instanceof Sm?(i.cc.addReference(o.key,e),Pm(i,o)):o instanceof Rp?(wt("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||Up(i,o.key)):qt()}function Pm(i,e){const t=e.key,o=t.path.canonicalString();i.oc.get(t)||i.rc.has(o)||(wt("SyncEngine","New document in limbo: "+t),i.rc.add(o),Qh(i))}function Qh(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new Ot(xn.fromString(e)),o=i.lc.next();i.uc.set(o,new Np(t)),i.oc=i.oc.insert(t,o),Uh(i.remoteStore,new ol(lo(_u(t.path)),o,2,Pi.at))}}function Vu(i,e,t){return xo.apply(this,arguments)}function xo(){return xo=(0,ce.Z)(function*(i,e,t){const o=Lt(i),u=[],d=[],g=[];var D;o.sc.isEmpty()||(o.sc.forEach((D,F)=>{g.push(o.dc(F,e,t).then(j=>{if(j){o.isPrimaryClient&&o.sharedClientState.updateQueryState(F.targetId,j.fromCache?"not-current":"current"),u.push(j);const q=Mh.Ci(F.targetId,j);d.push(q)}}))}),yield Promise.all(g),o.nc.Wo(u),yield(D=(0,ce.Z)(function*(F,j){const q=Lt(F);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",_e=>We.forEach(j,Ue=>We.forEach(Ue.Si,ct=>q.persistence.referenceDelegate.addReference(_e,Ue.targetId,ct)).next(()=>We.forEach(Ue.Di,ct=>q.persistence.referenceDelegate.removeReference(_e,Ue.targetId,ct)))))}catch(_e){if(!_i(_e))throw _e;wt("LocalStore","Failed to update sequence numbers: "+_e)}for(const _e of j){const Ue=_e.targetId;if(!_e.fromCache){const ct=q.Ui.get(Ue),$t=ct.withLastLimboFreeSnapshotVersion(ct.snapshotVersion);q.Ui=q.Ui.insert(Ue,$t)}}}),function(F,j){return D.apply(this,arguments)})(o.localStore,d))}),xo.apply(this,arguments)}function km(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,ce.Z)(function*(i,e){const t=Lt(i);if(!t.currentUser.isEqual(e)){wt("SyncEngine","User change. New user:",e.toKey());const o=yield cm(t.localStore,e);t.currentUser=e,(u=t).hc.forEach(g=>{g.forEach(D=>{D.reject(new vt(Ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Vu(t,o.ji)}var u}),jp.apply(this,arguments)}function X_(i,e){const t=Lt(i),o=t.uc.get(e);if(o&&o.ec)return Bn().add(o.key);{let u=Bn();const d=t.ic.get(e);if(!d)return u;for(const g of d){const D=t.sc.get(g);u=u.unionWith(D.view.Qu)}return u}}function pv(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,ce.Z)(function*(i,e){const t=Lt(i),o=yield xh(t.localStore,e.query,!0),u=e.view.Zu(o);return t.isPrimaryClient&&Bp(t,e.targetId,u.Yu),u}),Sd.apply(this,arguments)}function Fm(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,ce.Z)(function*(i,e){const t=Lt(i);return jn(t.localStore,e).then(o=>Vu(t,o))}),$p.apply(this,arguments)}function gv(i,e,t,o){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,ce.Z)(function*(i,e,t,o){const u=Lt(i),d=yield function(g,D){const F=Lt(g),j=Lt(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",q=>j.Tn(q,D).next(_e=>_e?F.localDocuments.getDocuments(q,_e):We.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Dc(u.remoteStore):"acknowledged"===t||"rejected"===t?(Om(u,e,o||null),Vp(u,e),D=e,Lt(Lt(u.localStore).mutationQueue).An(D)):qt(),yield Vu(u,d)):wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Hp.apply(this,arguments)}function Gp(){return Gp=(0,ce.Z)(function*(i,e){const t=Lt(i);if(qp(t),Kp(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield zp(t,o.toArray());t.fc=!0,yield Ap(t.remoteStore,!0);for(const d of u)Uh(t.remoteStore,d)}else if(!1===e&&!1!==t.fc){const o=[];let u=Promise.resolve();t.ic.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Mc(t,g),Fl(t.localStore,g,!0))),Ed(t.remoteStore,g)}),yield u,yield zp(t,o),function(d){const g=Lt(d);g.uc.forEach((D,F)=>{Ed(g.remoteStore,F)}),g.cc.fs(),g.uc=new Map,g.oc=new Pr(Ot.comparator)}(t),t.fc=!1,yield Ap(t.remoteStore,!1)}}),Gp.apply(this,arguments)}function zp(i,e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,ce.Z)(function*(i,e,t){const o=Lt(i),u=[],d=[];for(const g of e){let D;const F=o.ic.get(g);if(F&&0!==F.length){D=yield vc(o.localStore,lo(F[0]));for(const j of F){const q=o.sc.get(j),_e=yield pv(o,q);_e.snapshot&&d.push(_e.snapshot)}}else{const j=yield hm(o.localStore,g);D=yield vc(o.localStore,j),yield Op(o,Vm(j),g,!1)}u.push(D)}return o.nc.Wo(d),u}),Zp.apply(this,arguments)}function Vm(i){return nc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Um(i){const e=Lt(i);return Lt(Lt(e.localStore).persistence).vi()}function Bm(i,e,t,o){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,ce.Z)(function*(i,e,t,o){const u=Lt(i);if(u.fc)return void wt("SyncEngine","Ignoring unexpected query state notification.");const d=u.ic.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield jn(u.localStore,eh(d[0])),D=il.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Vu(u,g,D);break}case"rejected":yield Fl(u.localStore,e,!0),Mc(u,e,o);break;default:qt()}}),Wp.apply(this,arguments)}function iu(i,e,t){return Md.apply(this,arguments)}function Md(){return Md=(0,ce.Z)(function*(i,e,t){const o=qp(i);if(o.fc){for(const u of e){if(o.ic.has(u)){wt("SyncEngine","Adding an already active target "+u);continue}const d=yield hm(o.localStore,u),g=yield vc(o.localStore,d);yield Op(o,Vm(d),g.targetId,!1),Uh(o.remoteStore,g)}for(const u of t)o.ic.has(u)&&(yield Fl(o.localStore,u,!1).then(()=>{Ed(o.remoteStore,u),Mc(o,u)}).catch(wa))}}),Md.apply(this,arguments)}function qp(i){const e=Lt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ul.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fp.bind(null,e),e.nc.Wo=Y_.bind(null,e.eventManager),e.nc._c=Q_.bind(null,e.eventManager),e}function Kp(i){const e=Lt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lp.bind(null,e),e}class Yp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ce.Z)(function*(){t.It=_c(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return lm(this.persistence,new am,e.initialUser,this.It)}gc(e){return new Th(Ah.Bs,this.It)}mc(e){return new gm}terminate(){var e=this;return(0,ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jm extends Yp{constructor(e,t,o){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield t().call(o,e),yield o.Ec.initialize(o,e),yield Kp(o.Ec.syncEngine),yield Dc(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return lm(this.persistence,new am,e.initialUser,this.It)}Ic(e,t){return new Yg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const o=new yu(t,this.persistence);return new ec(e.asyncQueue,o)}gc(e){const t=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new Sh(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,sv(),Lh(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new gm}}class mv extends jm{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield t().call(o,e);const u=o.Ec.syncEngine;o.sharedClientState instanceof ku&&(o.sharedClientState.syncEngine={Fr:gv.bind(null,u),$r:Bm.bind(null,u),Br:iu.bind(null,u),vi:Um.bind(null,u),Or:Fm.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,ce.Z)(function*(g){yield function Lm(i,e){return Gp.apply(this,arguments)}(o.Ec.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}mc(e){const t=sv();if(!ku.C(t))throw new vt(Ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ku(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Qp{initialize(e,t){var o=this;return(0,ce.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Bl(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=km.bind(null,o.syncEngine),yield Ap(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xp}createDatastore(e){const t=_c(e.databaseInfo.databaseId),o=new Z_(e.databaseInfo);return new vm(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>Bl(this.syncEngine,D,0),g=Fh.C()?new Fh:new yp,new av(t,o,u,d,g);var t,o,u,d,g}createSyncEngine(e,t){return function(o,u,d,g,D,F,j){const q=new hv(o,u,d,g,D,F);return j&&(q.fc=!0),q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ce.Z)(function*(t){const o=Lt(t);wt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield Ic(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Jh(i,e=10240){let t=0;return{read:()=>(0,ce.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class yv{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ce.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ce.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const o=e.Pc.decode(t),u=Number(o);isNaN(u)&&e.Sc(`length string (${o}) is not valid number`);const d=yield e.Dc(u);return new J_(JSON.parse(d),t.length+u)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ce.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Dc(e){var t=this;return(0,ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const o=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ce.Z)(function*(){const t=yield e.bc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class ef{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new vt(Ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,ce.Z)(function*(d,g){const D=Lt(d),F=Ba(D.It)+"/documents",j={documents:g.map(ct=>Ua(D.It,ct))},q=yield D.fo("BatchGetDocuments",F,j,g.length),_e=new Map;q.forEach(ct=>{const ft=function uh(i,e){return"found"in e?function(t,o){fn(!!o.found);const u=la(t,o.found.name),d=zi(o.found.updateTime),g=new di({mapValue:{fields:o.found.fields}});return cr.newFoundDocument(u,d,g)}(i,e):"missing"in e?function(t,o){fn(!!o.missing),fn(!!o.readTime);const u=la(t,o.missing),d=zi(o.readTime);return cr.newNoDocument(u,d)}(i,e):qt()}(D.It,ct);_e.set(ft.key.toString(),ft)});const Ue=[];return g.forEach(ct=>{const ft=_e.get(ct.toString());fn(!!ft),Ue.push(ft)}),Ue}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Ot.fromPath(u);e.mutations.push(new td(d,e.precondition(d)))}),yield(o=(0,ce.Z)(function*(u,d){const g=Lt(u),D=Ba(g.It)+"/documents",F={writes:d.map(j=>c(g.It,j))};yield g.co("Commit",D,F)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qt();t=an.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new vt(Ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(an.min())?Ei.exists(!1):Ei.updateTime(t):Ei.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(an.min()))throw new vt(Ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ei.updateTime(t)}return Ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jp{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.Nc=o.maxAttempts,this.xo=new mm(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ce.Z)(function*(){const t=new ef(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Oc(d)}))}).catch(u=>{e.Oc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!hs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!rl(t)}return!1}}class tf{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Wr.UNAUTHENTICATED,this.clientId=Qa.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,ce.Z)(function*(D){wt("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(wt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Tc(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function vv(i,e){return xd.apply(this,arguments)}function xd(){return xd=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,ce.Z)(function*(d){o.isEqual(d)||(yield cm(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),xd.apply(this,arguments)}function _v(i,e){return nf.apply(this,arguments)}function nf(){return nf=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield rf(i);wt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>lv(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>lv(e.remoteStore,d)),i.onlineComponents=e}),nf.apply(this,arguments)}function rf(i){return sf.apply(this,arguments)}function sf(){return sf=(0,ce.Z)(function*(i){return i.offlineComponents||(wt("FirestoreClient","Using default OfflineComponentProvider"),yield vv(i,new Yp)),i.offlineComponents}),sf.apply(this,arguments)}function Rd(i){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,ce.Z)(function*(i){return i.onlineComponents||(wt("FirestoreClient","Using default OnlineComponentProvider"),yield _v(i,new Qp)),i.onlineComponents}),Nd.apply(this,arguments)}function su(i){return rf(i).then(e=>e.persistence)}function jl(i){return rf(i).then(e=>e.localStore)}function Od(i){return Rd(i).then(e=>e.remoteStore)}function $l(i){return Rd(i).then(e=>e.syncEngine)}function xc(i){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,ce.Z)(function*(i){const e=yield Rd(i),t=e.eventManager;return t.onListen=pl.bind(null,e.syncEngine),t.onUnlisten=xm.bind(null,e.syncEngine),t}),Pd.apply(this,arguments)}function Rc(i,e,t={}){const o=new Or;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(u,d,g,D,F){const j=new Xh({next:_e=>{d.enqueueAndForget(()=>Cm(u,q));const Ue=_e.docs.has(g);!Ue&&_e.fromCache?F.reject(new vt(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):Ue&&_e.fromCache&&D&&"server"===D.source?F.reject(new vt(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(_e)},error:_e=>F.reject(_e)}),q=new Am(_u(g.path),j,{includeMetadataChanges:!0,Nu:!0});return Im(u,q)}(yield xc(i),i.asyncQueue,e,t,o)})),o.promise}function Dv(i,e,t={}){const o=new Or;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(u,d,g,D,F){const j=new Xh({next:_e=>{d.enqueueAndForget(()=>Cm(u,q)),_e.fromCache&&"server"===D.source?F.reject(new vt(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(_e)},error:_e=>F.reject(_e)}),q=new Am(g,j,{includeMetadataChanges:!0,Nu:!0});return Im(u,q)}(yield xc(i),i.asyncQueue,e,t,o)})),o.promise}const Hm=new Map;function af(i,e,t){if(!t)throw new vt(Ye.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function uf(i,e,t,o){if(!0===e&&!0===o)throw new vt(Ye.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Gm(i){if(!Ot.isDocumentKey(i))throw new vt(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function lf(i){if(Ot.isDocumentKey(i))throw new vt(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function cf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":qt()}function yr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new vt(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cf(i);throw new vt(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function zm(i,e){if(e<=0)throw new vt(Ye.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Zm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new vt(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vt(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vt(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new so;switch(t.type){case"gapi":return new Vo(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new vt(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Hm.get(e);t&&(wt("ComponentProvider","Removing Datastore"),Hm.delete(e),t.terminate())}(this),Promise.resolve()}}class qr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qr(this.firestore,e,this._key)}}class Wi{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class Uu extends Wi{constructor(e,t,o){super(e,t,_u(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qr(this.firestore,null,new Ot(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function Nc(i,e,...t){if(i=(0,Ge.m9)(i),af("collection","path",e),i instanceof kd){const o=xn.fromString(e,...t);return lf(o),new Uu(i,null,o)}{if(!(i instanceof qr||i instanceof Uu))throw new vt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(xn.fromString(e,...t));return lf(o),new Uu(i.firestore,null,o)}}function df(i,e,...t){if(i=(0,Ge.m9)(i),1===arguments.length&&(e=Qa.R()),af("doc","path",e),i instanceof kd){const o=xn.fromString(e,...t);return Gm(o),new qr(i,null,new Ot(o))}{if(!(i instanceof qr||i instanceof Uu))throw new vt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(xn.fromString(e,...t));return Gm(o),new qr(i.firestore,i instanceof Uu?i.converter:null,new Ot(o))}}function hf(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),(i instanceof qr||i instanceof Uu)&&(e instanceof qr||e instanceof Uu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Wm(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),i instanceof Wi&&e instanceof Wi&&i.firestore===e.firestore&&Tl(i._query,e._query)&&i.converter===e.converter}class ou{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new mm(this,"async_queue_retry"),this.jc=()=>{const t=Lh();t&&wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Lh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Lh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Or;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ce.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!_i(t))throw t;wt("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,kn("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=t,t}enqueueAfterDelay(e,t,o){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const u=wm.createAndSchedule(this,e,t,o,d=>this.Jc(d));return this.Uc.push(u),u}Wc(){this.qc&&qt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ce.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Hl(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class co{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ei extends kd{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new ou,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zl(this),this._firestoreClient.terminate()}}function wi(i){return i._firestoreClient||zl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function zl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new rs(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new tf(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Zl(i,e,t){const o=new Or;return i.asyncQueue.enqueue((0,ce.Z)(function*(){try{yield vv(i,t),yield _v(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(g=d).name?g.code===Ye.FAILED_PRECONDITION||g.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;vi("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var g})).then(()=>o.promise)}function Xp(i){if(i._initialized||i._terminated)throw new vt(Ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class au{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new vt(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ha(oe.fromBase64String(e))}catch(t){throw new vt(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ha(oe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gl{constructor(e){this._methodName=e}}class Fd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vt(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vt(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const Rv=/^__.*__$/;class Nv{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ho(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fa(e,this.data,t,this.fieldTransforms)}}class eg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ho(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt()}}class ff{constructor(e,t,o,u,d,g){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.ea(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new ff(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.oa(e),u}ua(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.ea(),u}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Bd(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(Qm(this.na)&&Rv.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class tg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||_c(e)}fa(e,t,o,u=!1){return new ff({na:e,methodName:t,la:o,path:Sr.emptyPath(),ra:!1,ha:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Bu(i){const e=i._freezeSettings(),t=_c(i._databaseId);return new tg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function pf(i,e,t,o,u,d={}){const g=i.fa(d.merge||d.mergeFields?2:0,e,t,u);_f("Data must be an object, but it was:",g,o);const D=ig(o,g);let F,j;if(d.merge)F=new $(g.fieldMask),j=g.fieldTransforms;else if(d.mergeFields){const q=[];for(const _e of d.mergeFields){const Ue=sg(e,_e,t);if(!g.contains(Ue))throw new vt(Ye.INVALID_ARGUMENT,`Field '${Ue}' is specified in your field mask but missing from your input data.`);og(q,Ue)||q.push(Ue)}F=new $(q),j=g.fieldTransforms.filter(_e=>F.covers(_e.field))}else F=null,j=g.fieldTransforms;return new Nv(new di(D),F,j)}class ml extends gl{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ml}}function Ld(i,e,t){return new ff({na:3,la:e.settings.la,methodName:i._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Vd extends gl{_toFieldTransform(e){return new oc(e.path,new Aa)}isEqual(e){return e instanceof Vd}}class Ov extends gl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Ld(this,e,!0),o=this.da.map(d=>yl(d,t)),u=new qs(o);return new oc(e.path,u)}isEqual(e){return this===e}}class ng extends gl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Ld(this,e,!0),o=this.da.map(d=>yl(d,t)),u=new Sa(o);return new oc(e.path,u)}isEqual(e){return this===e}}class rg extends gl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new wu(e.It,ka(e.It,this._a));return new oc(e.path,t)}isEqual(e){return this===e}}function gf(i,e,t,o){const u=i.fa(1,e,t);_f("Data must be an object, but it was:",u,o);const d=[],g=di.empty();Ws(o,(F,j)=>{const q=Ud(e,F,t);j=(0,Ge.m9)(j);const _e=u.ua(q);if(j instanceof ml)d.push(q);else{const Ue=yl(j,_e);null!=Ue&&(d.push(q),g.set(q,Ue))}});const D=new $(d);return new eg(g,D,u.fieldTransforms)}function mf(i,e,t,o,u,d){const g=i.fa(1,e,t),D=[sg(e,o,t)],F=[u];if(d.length%2!=0)throw new vt(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ue=0;Ue<d.length;Ue+=2)D.push(sg(e,d[Ue])),F.push(d[Ue+1]);const j=[],q=di.empty();for(let Ue=D.length-1;Ue>=0;--Ue)if(!og(j,D[Ue])){const ct=D[Ue];let ft=F[Ue];ft=(0,Ge.m9)(ft);const $t=g.ua(ct);if(ft instanceof ml)j.push(ct);else{const en=yl(ft,$t);null!=en&&(j.push(ct),q.set(ct,en))}}const _e=new $(j);return new eg(q,_e,g.fieldTransforms)}function yf(i,e,t,o=!1){return yl(t,i.fa(o?4:3,e))}function yl(i,e){if(vf(i=(0,Ge.m9)(i)))return _f("Unsupported field value:",e,i),ig(i,e);if(i instanceof gl)return function(t,o){if(!Qm(o.na))throw o.aa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const g of t){let D=yl(g,o.ca(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Ge.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ka(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=lr.fromDate(t);return{timestampValue:xu(o.It,u)}}if(t instanceof lr){const u=new lr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xu(o.It,u)}}if(t instanceof Fd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ha)return{bytesValue:As(o.It,t._byteString)};if(t instanceof qr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.aa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:dc(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.aa(`Unsupported field value: ${cf(t)}`)}(i,e)}function ig(i,e){const t={};return ds(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(i,(o,u)=>{const d=yl(u,e.ia(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function vf(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof lr||i instanceof Fd||i instanceof Ha||i instanceof qr||i instanceof gl)}function _f(i,e,t){if(!vf(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=cf(t);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function sg(i,e,t){if((e=(0,Ge.m9)(e))instanceof au)return e._internalPath;if("string"==typeof e)return Ud(i,e);throw Bd("Field path arguments must be of type string or ",i,!1,void 0,t)}const Jm=new RegExp("[~\\*/\\[\\]]");function Ud(i,e,t){if(e.search(Jm)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new au(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Bd(i,e,t,o,u){const d=o&&!o.isEmpty(),g=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let F="";return(d||g)&&(F+=" (found",d&&(F+=` in field ${o}`),g&&(F+=` in document ${u}`),F+=")"),new vt(Ye.INVALID_ARGUMENT,D+i+F)}function og(i,e){return i.some(t=>t.isEqual(e))}class jd{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new qr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pv extends jd{data(){return super.data()}}function Ef(i,e){return"string"==typeof e?Ud(i,e):e instanceof au?e._internalPath:e._delegate._internalPath}class ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ga extends jd{constructor(e,t,o,u,d,g){super(e,t,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Uc extends Ga{data(e={}){return super.data(e)}}class $u{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new ju(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Uc(this._firestore,this._userDataWriter,o.key,o,new ju(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new vt(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Uc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ju(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const D=new Uc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ju(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let F=-1,j=-1;return 0!==g.type&&(F=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),j=d.indexOf(g.doc.key)),{type:Xm(g.type),doc:D,oldIndex:F,newIndex:j}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt()}}function ag(i,e){return i instanceof Ga&&e instanceof Ga?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof $u&&e instanceof $u&&i._firestore===e._firestore&&Wm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ug(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new vt(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bc{}function Hu(i,...e){for(const t of e)i=t._apply(i);return i}class ey extends Bc{constructor(e,t,o){super(),this.wa=e,this.ma=t,this.ga=o,this.type="where"}_apply(e){const t=Bu(e.firestore),o=function(u,d,g,D,F,j,q){let _e;if(F.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new vt(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){ny(q,j);const ct=[];for(const ft of q)ct.push(Wl(D,u,ft));_e={arrayValue:{values:ct}}}else _e=Wl(D,u,q)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||ny(q,j),_e=yf(g,"where",q,"in"===j||"not-in"===j);const Ue=Ts.create(F,j,_e);return function(ct,ft){if(ft.dt()){const en=tl(ct);if(null!==en&&!en.isEqual(ft.field))throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${en.toString()}' and '${ft.field.toString()}'`);const vr=rc(ct);null!==vr&&ry(0,ft.field,vr)}const $t=function(en,vr){for(const Gr of en.filters)if(vr.indexOf(Gr.op)>=0)return Gr.op;return null}(ct,function(en){switch(en){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ft.op));if(null!==$t)throw new vt(Ye.INVALID_ARGUMENT,$t===ft.op?`Invalid query. You cannot use more than one '${ft.op.toString()}' filter.`:`Invalid query. You cannot use '${ft.op.toString()}' filters with '${$t.toString()}' filters.`)}(u,Ue),Ue}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Wi(e.firestore,e.converter,function(u,d){const g=u.filters.concat([d]);return new Co(u.path,u.collectionGroup,u.explicitOrderBy.slice(),g,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class kv extends Bc{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new vt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new vt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new aa(u,d);return function(D,F){if(null===rc(D)){const j=tl(D);null!==j&&ry(0,j,F.field)}}(o,g),g}(e._query,this.wa,this.ya);return new Wi(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Co(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class lg extends Bc{constructor(e,t,o){super(),this.type=e,this.pa=t,this.Ia=o}_apply(e){return new Wi(e.firestore,e.converter,bl(e._query,this.pa,this.Ia))}}class cg extends Bc{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=hg(e,this.type,this.Ta,this.Ea);return new Wi(e.firestore,e.converter,(u=t,new Co((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class dg extends Bc{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=hg(e,this.type,this.Ta,this.Ea);return new Wi(e.firestore,e.converter,(u=t,new Co((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function hg(i,e,t,o){if(t[0]=(0,Ge.m9)(t[0]),t[0]instanceof jd)return function(u,d,g,D,F){if(!D)throw new vt(Ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const j=[];for(const q of eu(u))if(q.field.isKeyField())j.push(Ke(d,D.key));else{const _e=D.data.field(q.field);if(Vn(_e))throw new vt(Ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_e){const Ue=q.field.canonicalString();throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ue}' (used as the orderBy) does not exist.`)}j.push(_e)}return new Ta(j,F)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Bu(i.firestore);return function(d,g,D,F,j,q){const _e=d.explicitOrderBy;if(j.length>_e.length)throw new vt(Ye.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ue=[];for(let ct=0;ct<j.length;ct++){const ft=j[ct];if(_e[ct].field.isKeyField()){if("string"!=typeof ft)throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof ft}`);if(!Wc(d)&&-1!==ft.indexOf("/"))throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${ft}' contains a slash.`);const $t=d.path.child(xn.fromString(ft));if(!Ot.isDocumentKey($t))throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${$t}' is not because it contains an odd number of segments.`);const en=new Ot($t);Ue.push(Ke(g,en))}else{const $t=yf(D,F,ft);Ue.push($t)}}return new Ta(Ue,q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function Wl(i,e,t){if("string"==typeof(t=(0,Ge.m9)(t))){if(""===t)throw new vt(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(e)&&-1!==t.indexOf("/"))throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(xn.fromString(t));if(!Ot.isDocumentKey(o))throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ke(i,new Ot(o))}if(t instanceof qr)return Ke(i,t._key);throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cf(t)}.`)}function ny(i,e){if(!Array.isArray(i)||0===i.length)throw new vt(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new vt(Ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ry(i,e,t){if(!t.isEqual(e))throw new vt(Ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const iy={maxAttempts:5};class fg{convertValue(e,t="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ut(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qt()}}convertObject(e,t){const o={};return Ws(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Fd(Kt(e.latitude),Kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=ki(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Gi(e));default:return null}}convertTimestamp(e){const t=bt(e);return new lr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=xn.fromString(e);fn(fc(o));const u=new ci(o.get(1),o.get(3)),d=new Ot(o.popFirst(5));return u.isEqual(t)||kn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function $d(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class r0 extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qr(this.firestore,null,t)}}class pg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,t,o){this._verifyNotCommitted();const u=uu(e,this._firestore),d=$d(u.converter,t,o),g=pf(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,Ei.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=uu(e,this._firestore);let g;return g="string"==typeof(t=(0,Ge.m9)(t))||t instanceof au?mf(this._dataReader,"WriteBatch.update",d._key,t,o,u):gf(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,Ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uu(e,this._firestore);return this._mutations=this._mutations.concat(new Cu(t._key,Ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(Ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uu(i,e){if((i=(0,Ge.m9)(i)).firestore!==e)throw new vt(Ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class ql extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qr(this.firestore,null,t)}}function gg(i,e,t){i=yr(i,qr);const o=yr(i.firestore,ei),u=$d(i.converter,e,t);return du(o,[pf(Bu(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Ei.none())])}function oy(i,e,t,...o){i=yr(i,qr);const u=yr(i.firestore,ei),d=Bu(u);let g;return g="string"==typeof(e=(0,Ge.m9)(e))||e instanceof au?mf(d,"updateDoc",i._key,e,t,o):gf(d,"updateDoc",i._key,e),du(u,[g.toMutation(i._key,Ei.exists(!0))])}function ay(i,...e){var t,o,u;i=(0,Ge.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||Hl(e[g])||(d=e[g],g++);const D={includeMetadataChanges:d.includeMetadataChanges};if(Hl(e[g])){const _e=e[g];e[g]=null===(t=_e.next)||void 0===t?void 0:t.bind(_e),e[g+1]=null===(o=_e.error)||void 0===o?void 0:o.bind(_e),e[g+2]=null===(u=_e.complete)||void 0===u?void 0:u.bind(_e)}let F,j,q;if(i instanceof qr)j=yr(i.firestore,ei),q=_u(i._key.path),F={next:_e=>{e[g]&&e[g](yg(j,i,_e))},error:e[g+1],complete:e[g+2]};else{const _e=yr(i,Wi);j=yr(_e.firestore,ei),q=_e._query;const Ue=new ql(j);F={next:ct=>{e[g]&&e[g](new $u(j,Ue,_e,ct))},error:e[g+1],complete:e[g+2]},ug(i._query)}return function(_e,Ue,ct,ft){const $t=new Xh(ft),en=new Am(Ue,$t,ct);return _e.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return Im(yield xc(_e),en)})),()=>{$t.Rc(),_e.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return Cm(yield xc(_e),en)}))}}(wi(j),q,D,F)}function du(i,e){return function(t,o){const u=new Or;return t.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function fv(i,e,t){return Ac.apply(this,arguments)}(yield $l(t),o,u)})),u.promise}(wi(i),e)}function yg(i,e,t){const o=t.docs.get(e._key),u=new ql(i);return new Ga(i,u,e._key,o,new ju(t.hasPendingWrites,t.fromCache),e.converter)}class uy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bu(e)}get(e){const t=uu(e,this._firestore),o=new r0(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return qt();const d=u[0];if(d.isFoundDocument())return new jd(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new jd(this._firestore,o,t._key,null,t.converter);throw qt()})}set(e,t,o){const u=uu(e,this._firestore),d=$d(u.converter,t,o),g=pf(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,g),this}update(e,t,o,...u){const d=uu(e,this._firestore);let g;return g="string"==typeof(t=(0,Ge.m9)(t))||t instanceof au?mf(this._dataReader,"Transaction.update",d._key,t,o,u):gf(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=uu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uu(e,this._firestore),o=new ql(this._firestore);return super.get(e).then(u=>new Ga(this._firestore,o,t._key,u._document,new ju(!1,!1),t.converter))}}function If(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new vt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function vg(){if(typeof Uint8Array>"u")throw new vt("unimplemented","Uint8Arrays are not available in this environment.")}function _g(){if(!function ie(){return typeof atob<"u"}())throw new vt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ts=Je.SDK_VERSION,(0,Je._registerComponent)(new Qe.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),g=new ei(new gu(t.getProvider("auth-internal")),new Ya(t.getProvider("app-check-internal")),function(D,F){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new vt(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ci(D.options.projectId,F)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,Je.registerVersion)(Ra,"3.5.0",i),(0,Je.registerVersion)(Ra,"3.5.0","esm2017")}();class jc{constructor(e){this._delegate=e}static fromBase64String(e){return _g(),new jc(Ha.fromBase64String(e))}static fromUint8Array(e){return vg(),new jc(Ha.fromUint8Array(e))}toBase64(){return _g(),this._delegate.toBase64()}toUint8Array(){return vg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Df(i){return function gy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class Wv{enableIndexedDbPersistence(e,t){return function Oc(i,e){Xp(i=yr(i,ei));const t=wi(i),o=i._freezeSettings(),u=new Qp;return Zl(t,u,new jm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Pc(i){Xp(i=yr(i,ei));const e=wi(i),t=i._freezeSettings(),o=new Qp;return Zl(e,o,new mv(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kc(i){if(i._initialized&&!i._terminated)throw new vt(Ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{yield(t=(0,ce.Z)(function*(o){if(!uo.C())return Promise.resolve();const u=o+"main";yield uo.delete(u)}),function(o){return t.apply(this,arguments)})(om(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class my{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ci||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Av(i,e,t,o={}){var u;const d=(i=yr(i,kd))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&vi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let g,D;if("string"==typeof o.mockUserToken)g=o.mockUserToken,D=Wr.MOCK_USER;else{g=(0,Ge.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const F=o.mockUserToken.sub||o.mockUserToken.user_id;if(!F)throw new vt(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Wr(F)}i._authCredentials=new Na(new Ea(g,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Lc(i){return function $m(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield su(i),t=yield Od(i);return e.setNetworkEnabled(!0),function(o){const u=Lt(o);return u._u.delete(0),wc(u)}(t)}))}(wi(i=yr(i,ei)))}(this._delegate)}disableNetwork(){return function Vc(i){return function Ev(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield su(i),t=yield Od(i);return e.setNetworkEnabled(!1),(o=(0,ce.Z)(function*(u){const d=Lt(u);d._u.add(0),yield Ic(d),d.gu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(wi(i=yr(i,ei)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,uf("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Fc(i){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function Nm(i,e){return Ad.apply(this,arguments)}(yield $l(e),t)})),t.promise}(wi(i=yr(i,ei)))}(this._delegate)}onSnapshotsInSync(e){return function mg(i,e){return function Cv(i,e){const t=new Xh(e);return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return o=yield xc(i),u=t,Lt(o).Ru.add(u),void u.next();var o,u})),()=>{t.Rc(),i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return o=yield xc(i),u=t,void Lt(o).Ru.delete(u);var o,u}))}}(wi(i=yr(i,ei)),Hl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new vt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $c(this,Nc(this._delegate,e))}catch(t){throw Ro(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,df(this._delegate,e))}catch(t){throw Ro(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new No(this,function Sv(i,e){if(i=yr(i,kd),af("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vt(Ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wi(i,null,(t=e,new Co(xn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ro(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Gv(i,e,t){i=yr(i,ei);const o=Object.assign(Object.assign({},iy),t);return function(u){if(u.maxAttempts<1)throw new vt(Ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function t0(i,e,t){const o=new Or;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){const u=yield(d=i,Rd(d).then(g=>g.datastore));var d;new Jp(i.asyncQueue,u,t,e,o).run()})),o.promise}(wi(i),u=>e(new uy(i,u)),o)}(this._delegate,t=>e(new yy(this,t)))}batch(){return wi(this._delegate),new vy(new pg(this._delegate,e=>du(this._delegate,e)))}loadBundle(e){return function Km(i,e){const t=wi(i=yr(i,ei)),o=new co;return function bv(i,e,t,o){const u=function(d,g){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,F=function(F,j){if(F instanceof Uint8Array)return Jh(F,j);if(F instanceof ArrayBuffer)return Jh(new Uint8Array(F),j);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new yv(F,g);var F}(t,_c(e));i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){!function e0(i,e,t){const o=Lt(i);var u;(u=(0,ce.Z)(function*(d,g,D){try{const F=yield g.getMetadata();if(yield function(Ue,ct){const ft=Lt(Ue),$t=zi(ct.createTime);return ft.persistence.runTransaction("hasNewerBundle","readonly",en=>ft.Ns.getBundleMetadata(en,ct.id)).then(en=>!!en&&en.createTime.compareTo($t)>=0)}(d.localStore,F))return yield g.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ue=F).totalDocuments,bytesLoaded:Ue.totalBytes,totalDocuments:Ue.totalDocuments,totalBytes:Ue.totalBytes}),Promise.resolve(new Set);D._updateProgress(Wh(F));const j=new fl(F,d.localStore,g.It);let q=yield g.wc();for(;q;){const Ue=yield j.Ou(q);Ue&&D._updateProgress(Ue),q=yield g.wc()}const _e=yield j.complete();return yield Vu(d,_e.Bu,void 0),yield function(Ue,ct){const ft=Lt(Ue);return ft.persistence.runTransaction("Save bundle","readwrite",$t=>ft.Ns.saveBundleMetadata($t,ct))}(d.localStore,F),D._completeWith(_e.progress),Promise.resolve(_e.$u)}catch(F){return vi("SyncEngine",`Loading bundle failed with ${F}`),D._failWith(F),Promise.resolve(new Set)}var Ue}),function(d,g,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield $l(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Ym(i,e){return function Tv(i,e){return i.asyncQueue.enqueue((0,ce.Z)(function*(){return function(t,o){const u=Lt(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield jl(i),e)}))}(wi(i=yr(i,ei)),e).then(t=>t?new Wi(i,null,t.query):null)}(this._delegate,e).then(t=>t?new No(this,t):null)}}class Cf extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(new Ha(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class yy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cf(e)}get(e){const t=Yl(e);return this._delegate.get(t).then(o=>new Gd(this._firestore,new Ga(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Yl(e);return o?(If("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}}class vy{constructor(e){this._delegate=e}set(e,t,o){const u=Yl(e);return o?(If("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=Yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=Yl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kl{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zd(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Kl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Kl(e,new Cf(e),t),u.set(t,d)),d}}Kl.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cf(e)}static forPath(e,t,o){if(e.length%2!=0)throw new vt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new qr(t._delegate,o,new Ot(e)))}static forKey(e,t,o){return new Ma(t,new qr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new $c(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $c(this.firestore,Nc(this._delegate,e))}catch(t){throw Ro(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ge.m9)(e))instanceof qr&&hf(this._delegate,e)}set(e,t){t=If("DocumentReference.set",t);try{return t?gg(this._delegate,e,t):gg(this._delegate,e)}catch(o){throw Ro(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?oy(this._delegate,e):oy(this._delegate,e,t,...o)}catch(u){throw Ro(u,"updateDoc()","DocumentReference.update()")}}delete(){return function $v(i){return du(yr(i.firestore,ei),[new Cu(i._key,Ei.none())])}(this._delegate)}onSnapshot(...e){const t=_y(e),o=Ey(e,u=>new Gd(this.firestore,new Ga(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return ay(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function jv(i){i=yr(i,qr);const e=yr(i.firestore,ei),t=wi(e),o=new ql(e);return function wv(i,e){const t=new Or;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(u,d,g){try{const D=yield function(F,j){const q=Lt(F);return q.persistence.runTransaction("read document","readonly",_e=>q.localDocuments.getDocument(_e,j))}(u,d);D.isFoundDocument()?g.resolve(D):D.isNoDocument()?g.resolve(null):g.reject(new vt(Ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const F=Tc(D,`Failed to get document '${d} from cache`);g.reject(F)}}),function(u,d,g){return o.apply(this,arguments)})(yield jl(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Ga(e,o,i._key,u,new ju(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function cu(i){i=yr(i,qr);const e=yr(i.firestore,ei);return Rc(wi(e),i._key,{source:"server"}).then(t=>yg(e,i,t))}(this._delegate):function lu(i){i=yr(i,qr);const e=yr(i.firestore,ei);return Rc(wi(e),i._key).then(t=>yg(e,i,t))}(this._delegate),t.then(o=>new Gd(this.firestore,new Ga(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?Kl.getInstance(this.firestore,e):null))}}function Ro(i,e,t){return i.message=i.message.replace(e,t),i}function _y(i){for(const e of i)if("object"==typeof e&&!Df(e))return e;return{}}function Ey(i,e){var t,o;let u;return u=Df(i[0])?i[0]:Df(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Gd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ag(this._delegate,e._delegate)}}class zd extends Gd{data(e){const t=this._delegate.data(e);return function pu(i,e){i||qt()}(void 0!==t),t}}class No{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cf(e)}where(e,t,o){try{return new No(this.firestore,Hu(this._delegate,function n0(i,e,t){const o=e,u=Ef("where",i);return new ey(u,o,t)}(e,t,o)))}catch(u){throw Ro(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new No(this.firestore,Hu(this._delegate,function Fv(i,e="asc"){const t=e,o=Ef("orderBy",i);return new kv(o,t)}(e,t)))}catch(o){throw Ro(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new No(this.firestore,Hu(this._delegate,function Lv(i){return zm("limit",i),new lg("limit",i,"F")}(e)))}catch(t){throw Ro(t,"limit()","Query.limit()")}}limitToLast(e){try{return new No(this.firestore,Hu(this._delegate,function Ss(i){return zm("limitToLast",i),new lg("limitToLast",i,"L")}(e)))}catch(t){throw Ro(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new No(this.firestore,Hu(this._delegate,function Vv(...i){return new cg("startAt",i,!0)}(...e)))}catch(t){throw Ro(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new No(this.firestore,Hu(this._delegate,function Uv(...i){return new cg("startAfter",i,!1)}(...e)))}catch(t){throw Ro(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new No(this.firestore,Hu(this._delegate,function Bv(...i){return new dg("endBefore",i,!1)}(...e)))}catch(t){throw Ro(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new No(this.firestore,Hu(this._delegate,function ty(...i){return new dg("endAt",i,!0)}(...e)))}catch(t){throw Ro(t,"endAt()","Query.endAt()")}}isEqual(e){return Wm(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Za(i){i=yr(i,Wi);const e=yr(i.firestore,ei),t=wi(e),o=new ql(e);return function Iv(i,e){const t=new Or;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(u,d,g){try{const D=yield xh(u,d,!0),F=new qh(d,D.Hi),j=F.ju(D.documents),q=F.applyChanges(j,!1);g.resolve(q.snapshot)}catch(D){const F=Tc(D,`Failed to execute query '${d} against cache`);g.reject(F)}}),function(u,d,g){return o.apply(this,arguments)})(yield jl(i),e,t);var o})),t.promise}(t,i._query).then(u=>new $u(e,o,i,u))}(this._delegate):"server"===e?.source?function sy(i){i=yr(i,Wi);const e=yr(i.firestore,ei),t=wi(e),o=new ql(e);return Dv(t,i._query,{source:"server"}).then(u=>new $u(e,o,i,u))}(this._delegate):function za(i){i=yr(i,Wi);const e=yr(i.firestore,ei),t=wi(e),o=new ql(e);return ug(i._query),Dv(t,i._query).then(u=>new $u(e,o,i,u))}(this._delegate),t.then(o=>new Eg(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=_y(e),o=Ey(e,u=>new Eg(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return ay(this._delegate,t,o)}withConverter(e){return new No(this.firestore,this._delegate.withConverter(e?Kl.getInstance(this.firestore,e):null))}}class Kv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Eg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new No(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Kv(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new zd(this._firestore,o))})}isEqual(e){return ag(this._delegate,e._delegate)}}class $c extends No{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?df(this._delegate):df(this._delegate,e))}catch(t){throw Ro(t,"doc()","CollectionReference.doc()")}}add(e){return function Hv(i,e){const t=yr(i.firestore,ei),o=df(i),u=$d(i.converter,e);return du(t,[pf(Bu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Ei.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return hf(this._delegate,e._delegate)}withConverter(e){return new $c(this.firestore,this._delegate.withConverter(e?Kl.getInstance(this.firestore,e):null))}}function Yl(i){return yr(i,qr)}class bf{constructor(...e){this._delegate=new au(...e)}static documentId(){return new bf(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,Ge.m9)(e))instanceof au&&this._delegate._internalPath.isEqual(e._internalPath)}}class vl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cy(){return new Vd("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vl(e)}static delete(){const e=function ly(){return new ml("deleteField")}();return e._methodName="FieldValue.delete",new vl(e)}static arrayUnion(...e){const t=function wf(...i){return new Ov("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new vl(t)}static arrayRemove(...e){const t=function zv(...i){return new ng("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new vl(t)}static increment(e){const t=function dy(i){return new rg("increment",i)}(e);return t._methodName="FieldValue.increment",new vl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wy={Firestore:my,GeoPoint:Fd,Timestamp:lr,Blob:jc,Transaction:yy,WriteBatch:vy,DocumentReference:Ma,DocumentSnapshot:Gd,Query:No,QueryDocumentSnapshot:zd,QuerySnapshot:Eg,CollectionReference:$c,FieldPath:bf,FieldValue:vl,setLogLevel:function qv(i){!function _a(i){Ls.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Dy(i){(function Iy(i,e){i.INTERNAL.registerComponent(new Qe.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},wy)))})(i,(e,t)=>new my(e,t,new Wv)),i.registerVersion("@firebase/firestore-compat","0.1.25")}(Et.Z);var Gu=L(1205),Cy=L(440);function wg(i,e){return function by(i,e=k.z){return new C.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function zu(i,e){return wg(i,e).pipe((0,ne.U)(t=>({payload:t,type:"query"})))}function Tf(i,e){return zu(i,e).pipe((0,Y.O)(void 0),K(),(0,ne.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,D)=>{const F=u.find(q=>q.doc.ref.isEqual(g.ref)),j=t?.payload.docs.find(q=>q.ref.isEqual(g.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(g.metadata)||!F&&j&&JSON.stringify(j.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:g}})}),d}))}function Ay(i,e,t){return Tf(i,t).pipe((0,re.R)((o,u)=>function Hc(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Ig(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sy(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sy(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sy(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function et(i,e=nt.y){return i=i??Ve,(0,Ae.e)((t,o)=>{let u,d=!0;t.subscribe((0,be.x)(o,g=>{const D=e(g);(d||!i(u,D))&&(d=!1,u=D,o.next(g))}))})}(),(0,ne.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Sy(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Qv(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}L(127);class Dg{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Tf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ne.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Y.O)(void 0),K(),(0,Tt.h)(([o,u])=>u.length>0||!o),(0,ne.U)(([o,u])=>u),we.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,re.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Qv(e);return Ay(this.query,t,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return zu(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),we.iC)}get(e){return(0,ge.D)(this.query.get(e)).pipe(we.iC)}add(e){return this.ref.add(e)}doc(e){return new Cg(this.ref.doc(e),this.afs)}}class Cg{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Ql(o,t);return new Dg(u,d,this.afs)}snapshotChanges(){return function Ty(i,e){return wg(i,e).pipe((0,Y.O)(void 0),K(),(0,ne.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ne.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ge.D)(this.ref.get(e)).pipe(we.iC)}}class s0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Tf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Tt.h)(t=>t.length>0),we.iC):Tf(this.query,this.afs.schedulers.outsideAngular).pipe(we.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,re.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Qv(e);return Ay(this.query,t,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return zu(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),we.iC)}get(e){return(0,ge.D)(this.query.get(e)).pipe(we.iC)}}const Cn=new p.OlP("angularfire2.enableFirestorePersistence"),Jv=new p.OlP("angularfire2.firestore.persistenceSettings"),Xv=new p.OlP("angularfire2.firestore.settings"),e_=new p.OlP("angularfire2.firestore.use-emulator");function Ql(i,e=(t=>t)){return{query:e(i),ref:i}}let t_=(()=>{class i{constructor(t,o,u,d,g,D,F,j,q,_e,Ue,ct,ft,$t,en,vr,Gr){this.schedulers=F;const Mr=(0,ze.on)(t,D,o),Vi=q;_e&&(0,Gu.nw)(Mr,D,Ue,ft,$t,en,ct,vr),[this.firestore,this.persistenceEnabled$]=(0,ze.cc)(`${Mr.name}.firestore`,"AngularFirestore",Mr.name,()=>{const hr=D.runOutsideAngular(()=>Mr.firestore());if(d&&hr.settings(d),Vi&&hr.useEmulator(...Vi),u&&!(0,De.PM)(g)){const Cr=()=>{try{return(0,ge.D)(hr.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(Ms){return typeof console<"u"&&console.warn(Ms),(0,le.of)(!1)}};return[hr,D.runOutsideAngular(Cr)]}return[hr,(0,le.of)(!1)]},[d,Vi,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=Ql(u,o),D=this.schedulers.ngZone.run(()=>d);return new Dg(D,g,this)}collectionGroup(t,o){const u=o||(g=>g),d=this.firestore.collectionGroup(t);return new s0(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Cg(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(ze.Dh),p.LFG(ze.xv,8),p.LFG(Cn,8),p.LFG(Xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(we.HU),p.LFG(Jv,8),p.LFG(e_,8),p.LFG(Gu.zQ,8),p.LFG(Gu.Qv,8),p.LFG(Gu.L6,8),p.LFG(Gu._Q,8),p.LFG(Gu.rT,8),p.LFG(Gu.lh,8),p.LFG(Gu.f7,8),p.LFG(Cy.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Af=(()=>{class i{constructor(t){this._db=t,this.peliculasLista=t.collection("pelicula"),this.listaActor=t.collection("actor")}crearPelicula(t){return this.peliculasLista.add({...t})}trearTodasLasPelis(){return this.peliculasLista}Modificar(t,o){return this.peliculasLista.doc(t).update(o)}delete(t){return this.peliculasLista.doc(t).delete()}crearActor(t){return this.listaActor.add({...t})}trearActores(){return this.listaActor}traerPeliculasPorActor(t){return this._db.collection("pelicula",o=>o.where("Actor.id","==",t))}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(t_))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5806:(Rt,ke,L)=>{var p=L(1481),k=L(4650),C=L(7001);let ge=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(Et){return new(Et||De)},De.\u0275cmp=k.Xpm({type:De,selectors:[["app-bienvenido"]],decls:21,vars:0,consts:[[1,"p-5","mb-4","bg-light","rounded-3"],[1,"container-fluid","py-10"],[1,"display-5","fw-bold"],[1,"col-md-8","fs-4"],["type","button","routerLink","actores/actorpelicula",1,"btn","btn-primary","btn-lg"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["href","#",1,"card-link"]],template:function(Et,ce){1&Et&&(k._UZ(0,"hr"),k.TgZ(1,"div",0)(2,"div",1)(3,"h1",2),k._uU(4,"Bienvenidos "),k.qZA(),k.TgZ(5,"p",3),k._uU(6," Este es un Simulacro de un parcial"),k.qZA(),k.TgZ(7,"button",4),k._uU(8,"Actor y peliculas"),k.qZA()()(),k.TgZ(9,"div",5)(10,"div",6)(11,"h5",7),k._uU(12,"Card title"),k.qZA(),k.TgZ(13,"h6",8),k._uU(14,"Card subtitle"),k.qZA(),k.TgZ(15,"p",9),k._uU(16,"Some quick example text to build on the card title and make up the bulk of the card's content."),k.qZA(),k.TgZ(17,"a",10),k._uU(18,"Card link"),k.qZA(),k.TgZ(19,"a",10),k._uU(20,"Another link"),k.qZA()()())},dependencies:[C.rH]}),De})();var le=L(6054);const Y=[{path:"bienvenido",component:ge},{path:"busqueda",component:(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(Et){return new(Et||De)},De.\u0275cmp=k.Xpm({type:De,selectors:[["app-busqueda"]],decls:1,vars:0,template:function(Et,ce){1&Et&&k._UZ(0,"app-listado")},dependencies:[le.W]}),De})()},{path:"peliculas",loadChildren:()=>Promise.resolve().then(L.bind(L,1884)).then(De=>De.PeliculasModule)},{path:"actores",loadChildren:()=>Promise.resolve().then(L.bind(L,3565)).then(De=>De.ActoresModule)},{path:"compartidos",loadChildren:()=>Promise.resolve().then(L.bind(L,5215)).then(De=>De.CompartidosModule)},{path:"**",component:ge}];let Ae=(()=>{class De{}return De.\u0275fac=function(Et){return new(Et||De)},De.\u0275mod=k.oAB({type:De}),De.\u0275inj=k.cJS({imports:[C.Bz.forRoot(Y),C.Bz]}),De})(),be=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(Et){return new(Et||De)},De.\u0275cmp=k.Xpm({type:De,selectors:[["app-nav"]],decls:15,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["routerLink","",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item","active"],["routerLink","peliculas",1,"nav-link"],[1,"sr-only"],["routerLink","actores",1,"nav-link"]],template:function(Et,ce){1&Et&&(k.TgZ(0,"nav",0)(1,"a",1),k._uU(2,"Simulacro de parcial"),k.qZA(),k.TgZ(3,"button",2),k._UZ(4,"span",3),k.qZA(),k.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),k._uU(9,"Pelicula "),k._UZ(10,"span",8),k.qZA()(),k.TgZ(11,"li",6)(12,"a",9),k._uU(13,"Actores "),k._UZ(14,"span",8),k.qZA()()()()())},dependencies:[C.yS]}),De})(),K=(()=>{class De{constructor(){this.title="simulacroparcial"}}return De.\u0275fac=function(Et){return new(Et||De)},De.\u0275cmp=k.Xpm({type:De,selectors:[["app-root"]],decls:2,vars:0,template:function(Et,ce){1&Et&&k._UZ(0,"app-nav")(1,"router-outlet")},dependencies:[C.lC,be]}),De})();var ne=L(1884),re=L(433),nt=L(1205),et=L(2011);const Ve_firebaseConfig={apiKey:"AIzaSyAxtRS_SVAht0Lq47d32FogzTKvJJFw_tA",authDomain:"simulacroparcial-ff130.firebaseapp.com",projectId:"simulacroparcial-ff130",storageBucket:"simulacroparcial-ff130.appspot.com",messagingSenderId:"23894037329",appId:"1:23894037329:web:baf316af30d2feb0a13970"};var Tt=L(529);let ze=(()=>{class De{}return De.\u0275fac=function(Et){return new(Et||De)},De.\u0275mod=k.oAB({type:De,bootstrap:[K]}),De.\u0275inj=k.cJS({imports:[p.b2,Ae,ne.PeliculasModule,re.u5,nt.ww,et.hO.initializeApp(Ve_firebaseConfig),Tt.JF]}),De})();(0,k.G48)(),p.q6().bootstrapModule(ze).catch(De=>console.error(De))},5867:(Rt,ke,L)=>{L.d(ke,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=L(9681);(0,p.registerVersion)("firebase","9.10.0","app")},127:(Rt,ke,L)=>{L.d(ke,{Z:()=>p.Z});var p=L(3942);p.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(Rt,ke,L)=>{L.r(ke);var p=L(5861),k=L(3942),C=L(2090),ge=L(9681),le=L(655),we=L(1877),Y=L(4859);const Ve=function nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Tt=function et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new C.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dt=new we.Yd("@firebase/auth");function Et(y,...c){Dt.logLevel<=we.in.ERROR&&Dt.error(`Auth (${ge.SDK_VERSION}): ${y}`,...c)}function ce(y,...c){throw Ge(y,...c)}function Je(y,...c){return Ge(y,...c)}function Qe(y,c,f){const w=Object.assign(Object.assign({},Tt()),{[c]:f});return new C.LL("auth","Firebase",w).create(c,{appName:y.name})}function Be(y,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&ce(y,"argument-error"),Qe(y,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(y,...c){if("string"!=typeof y){const f=c[0],w=[...c.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(f,...w)}return ze.create(y,...c)}function X(y,c,...f){if(!y)throw Ge(c,...f)}function Me(y){const c="INTERNAL ASSERTION FAILED: "+y;throw Et(c),new Error(c)}function ee(y,c){y||Me(c)}const Ie=new Map;function he(y){ee(y instanceof Function,"Expected a class definition");let c=Ie.get(y);return c?(ee(c instanceof y,"Instance stored in cache mismatched with class"),c):(c=new y,Ie.set(y,c),c)}function pt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function _t(){return"http:"===Pe()||"https:"===Pe()}function Pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class at{constructor(c,f){this.shortDelay=c,this.longDelay=f,ee(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,C.uI)()||(0,C.b$)()}get(){return function dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,C.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vt(y,c){ee(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Ht{static initialize(c,f,w){this.fetchImpl=c,f&&(this.headersImpl=f),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},yn=new at(3e4,6e4);function tn(y,c){return y.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:y.tenantId}):c}function Tn(y,c,f,w){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,p.Z)(function*(y,c,f,w,U={}){return rr(y,U,(0,p.Z)(function*(){let W={},Re={};w&&("GET"===c?Re=w:W={body:JSON.stringify(w)});const tt=(0,C.xO)(Object.assign({key:y.config.apiKey},Re)).slice(1),Mt=yield y._getAdditionalHeaders();return Mt["Content-Type"]="application/json",y.languageCode&&(Mt["X-Firebase-Locale"]=y.languageCode),Ht.fetch()(zt(y,y.config.apiHost,f,tt),Object.assign({method:c,headers:Mt,referrerPolicy:"no-referrer"},W))}))})).apply(this,arguments)}function rr(y,c,f){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(y,c,f){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Nt),c);try{const U=new Hn(y),W=yield Promise.race([f(),U.promise]);U.clearNetworkTimeout();const Re=yield W.json();if("needConfirmation"in Re)throw or(y,"account-exists-with-different-credential",Re);if(W.ok&&!("errorMessage"in Re))return Re;{const tt=W.ok?Re.errorMessage:Re.error.message,[Mt,Qt]=tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Mt)throw or(y,"credential-already-in-use",Re);if("EMAIL_EXISTS"===Mt)throw or(y,"email-already-in-use",Re);if("USER_DISABLED"===Mt)throw or(y,"user-disabled",Re);const wn=w[Mt]||Mt.toLowerCase().replace(/[_\s]+/g,"-");if(Qt)throw Qe(y,wn,Qt);ce(y,wn)}}catch(U){if(U instanceof C.ZR)throw U;ce(y,"network-request-failed")}})).apply(this,arguments)}function In(y,c,f,w){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(y,c,f,w,U={}){const W=yield Tn(y,c,f,w,U);return"mfaPendingCredential"in W&&ce(y,"multi-factor-auth-required",{_serverResponse:W}),W})).apply(this,arguments)}function zt(y,c,f,w){const U=`${c}${f}?${w}`;return y.config.emulator?Vt(y.config,U):`${y.config.apiScheme}://${U}`}class Hn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,w)=>{this.timer=setTimeout(()=>w(Je(this.auth,"network-request-failed")),yn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(y,c,f){const w={appName:y.name};f.email&&(w.email=f.email),f.phoneNumber&&(w.phoneNumber=f.phoneNumber);const U=Je(y,c,w);return U.customData._tokenResponse=f,U}function mt(){return(mt=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Un(y,c){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Gn(y,c){return _r.apply(this,arguments)}function _r(){return(_r=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Yr(y){if(y)try{const c=new Date(Number(y));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ye(){return(ye=(0,p.Z)(function*(y,c=!1){const f=(0,C.m9)(y),w=yield f.getIdToken(c),U=$e(w);X(U&&U.exp&&U.auth_time&&U.iat,f.auth,"internal-error");const W="object"==typeof U.firebase?U.firebase:void 0,Re=W?.sign_in_provider;return{claims:U,token:w,authTime:Yr(ae(U.auth_time)),issuedAtTime:Yr(ae(U.iat)),expirationTime:Yr(ae(U.exp)),signInProvider:Re||null,signInSecondFactor:W?.sign_in_second_factor||null}})).apply(this,arguments)}function ae(y){return 1e3*Number(y)}function $e(y){var c;const[f,w,U]=y.split(".");if(void 0===f||void 0===w||void 0===U)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,C.tV)(w);return W?JSON.parse(W):(Et("Failed to decode base64 JWT payload"),null)}catch(W){return Et("Caught error parsing JWT payload as JSON",null===(c=W)||void 0===c?void 0:c.toString()),null}}function Ft(y,c){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(y,c,f=!1){if(f)return c;try{return yield c}catch(w){throw w instanceof C.ZR&&An(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function An({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class At{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const U=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const w=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),w)}iteration(){var c=this;return(0,p.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(f=w)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class Zn{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vn(y){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,p.Z)(function*(y){var c;const f=y.auth,w=yield y.getIdToken(),U=yield Ft(y,Gn(f,{idToken:w}));X(U?.users.length,f,"internal-error");const W=U.users[0];y._notifyReloadListener(W);const Re=null!==(c=W.providerUserInfo)&&void 0!==c&&c.length?ue(W.providerUserInfo):[],tt=Q(y.providerData,Re),wn=!!y.isAnonymous&&!(y.email&&W.passwordHash||tt?.length),sn={uid:W.localId,displayName:W.displayName||null,photoURL:W.photoUrl||null,email:W.email||null,emailVerified:W.emailVerified||!1,phoneNumber:W.phoneNumber||null,tenantId:W.tenantId||null,providerData:tt,metadata:new Zn(W.createdAt,W.lastLoginAt),isAnonymous:wn};Object.assign(y,sn)})).apply(this,arguments)}function me(){return(me=(0,p.Z)(function*(y){const c=(0,C.m9)(y);yield vn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Q(y,c){return[...y.filter(w=>!c.some(U=>U.providerId===w.providerId)),...c]}function ue(y){return y.map(c=>{var{providerId:f}=c,w=(0,le._T)(c,["providerId"]);return{providerId:f,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function fe(){return(fe=(0,p.Z)(function*(y,c){const f=yield rr(y,{},(0,p.Z)(function*(){const w=(0,C.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:U,apiKey:W}=y.config,Re=zt(y,U,"/v1/token",`key=${W}`),tt=yield y._getAdditionalHeaders();return tt["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(Re,{method:"POST",headers:tt,body:w})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){X(c.idToken,"internal-error"),X(typeof c.idToken<"u","internal-error"),X(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function it(y){const c=$e(y);return X(c,"internal-error"),X(typeof c.exp<"u","internal-error"),X(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var w=this;return(0,p.Z)(function*(){return X(!w.accessToken||w.refreshToken,c,"user-token-expired"),f||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(c,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var w=this;return(0,p.Z)(function*(){const{accessToken:U,refreshToken:W,expiresIn:Re}=yield function Ee(y,c){return fe.apply(this,arguments)}(c,f);w.updateTokensAndExpiration(U,W,Number(Re))})()}updateTokensAndExpiration(c,f,w){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(c,f){const{refreshToken:w,accessToken:U,expirationTime:W}=f,Re=new ot;return w&&(X("string"==typeof w,"internal-error",{appName:c}),Re.refreshToken=w),U&&(X("string"==typeof U,"internal-error",{appName:c}),Re.accessToken=U),W&&(X("number"==typeof W,"internal-error",{appName:c}),Re.expirationTime=W),Re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ot,this.toJSON())}_performRefresh(){return Me("not implemented")}}function Ct(y,c){X("string"==typeof y||typeof y>"u","internal-error",{appName:c})}class Bt{constructor(c){var{uid:f,auth:w,stsTokenManager:U}=c,W=(0,le._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new At(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=w,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=W.displayName||null,this.email=W.email||null,this.emailVerified=W.emailVerified||!1,this.phoneNumber=W.phoneNumber||null,this.photoURL=W.photoURL||null,this.isAnonymous=W.isAnonymous||!1,this.tenantId=W.tenantId||null,this.providerData=W.providerData?[...W.providerData]:[],this.metadata=new Zn(W.createdAt||void 0,W.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const w=yield Ft(f,f.stsTokenManager.getToken(f.auth,c));return X(w,f.auth,"internal-error"),f.accessToken!==w&&(f.accessToken=w,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),w})()}getIdTokenResult(c){return function Ze(y){return ye.apply(this,arguments)}(this,c)}reload(){return function nn(y){return me.apply(this,arguments)}(this)}_assign(c){this!==c&&(X(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new Bt(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var w=this;return(0,p.Z)(function*(){let U=!1;c.idToken&&c.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(c),U=!0),f&&(yield vn(w)),yield w.auth._persistUserIfCurrent(w),U&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield Ft(c,function zn(y,c){return mt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var w,U,W,Re,tt,Mt,Qt,wn;const sn=null!==(w=f.displayName)&&void 0!==w?w:void 0,Xr=null!==(U=f.email)&&void 0!==U?U:void 0,zo=null!==(W=f.phoneNumber)&&void 0!==W?W:void 0,sl=null!==(Re=f.photoURL)&&void 0!==Re?Re:void 0,lh=null!==(tt=f.tenantId)&&void 0!==tt?tt:void 0,fc=null!==(Mt=f._redirectEventId)&&void 0!==Mt?Mt:void 0,ps=null!==(Qt=f.createdAt)&&void 0!==Qt?Qt:void 0,Hf=null!==(wn=f.lastLoginAt)&&void 0!==wn?wn:void 0,{uid:ld,emailVerified:Ao,isAnonymous:ch,providerData:xl,stsTokenManager:dh}=f;X(ld&&dh,c,"internal-error");const kg=ot.fromJSON(this.name,dh);X("string"==typeof ld,c,"internal-error"),Ct(sn,c.name),Ct(Xr,c.name),X("boolean"==typeof Ao,c,"internal-error"),X("boolean"==typeof ch,c,"internal-error"),Ct(zo,c.name),Ct(sl,c.name),Ct(lh,c.name),Ct(fc,c.name),Ct(ps,c.name),Ct(Hf,c.name);const hh=new Bt({uid:ld,auth:c,email:Xr,emailVerified:Ao,displayName:sn,isAnonymous:ch,photoURL:sl,phoneNumber:zo,tenantId:lh,stsTokenManager:kg,createdAt:ps,lastLoginAt:Hf});return xl&&Array.isArray(xl)&&(hh.providerData=xl.map(Gf=>Object.assign({},Gf))),fc&&(hh._redirectEventId=fc),hh}static _fromIdTokenResponse(c,f,w=!1){return(0,p.Z)(function*(){const U=new ot;U.updateFromServerResponse(f);const W=new Bt({uid:f.localId,auth:c,stsTokenManager:U,isAnonymous:w});return yield vn(W),W})()}}const _n=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,w){var U=this;return(0,p.Z)(function*(){U.storage[f]=w})()}_get(f){var w=this;return(0,p.Z)(function*(){const U=w.storage[f];return void 0===U?null:U})()}_remove(f){var w=this;return(0,p.Z)(function*(){delete w.storage[f]})()}_addListener(f,w){}_removeListener(f,w){}}return y.type="NONE",y})();function Wn(y,c,f){return`firebase:${y}:${c}:${f}`}class pn{constructor(c,f,w){this.persistence=c,this.auth=f,this.userKey=w;const{config:U,name:W}=this.auth;this.fullUserKey=Wn(this.userKey,U.apiKey,W),this.fullPersistenceKey=Wn("persistence",U.apiKey,W),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?Bt._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const w=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,w?f.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,w="authUser"){return(0,p.Z)(function*(){if(!f.length)return new pn(he(_n),c,w);const U=(yield Promise.all(f.map(function(){var Qt=(0,p.Z)(function*(wn){if(yield wn._isAvailable())return wn});return function(wn){return Qt.apply(this,arguments)}}()))).filter(Qt=>Qt);let W=U[0]||he(_n);const Re=Wn(w,c.config.apiKey,c.name);let tt=null;for(const Qt of f)try{const wn=yield Qt._get(Re);if(wn){const sn=Bt._fromJSON(c,wn);Qt!==W&&(tt=sn),W=Qt;break}}catch{}const Mt=U.filter(Qt=>Qt._shouldAllowMigration);return W._shouldAllowMigration&&Mt.length?(W=Mt[0],tt&&(yield W._set(Re,tt.toJSON())),yield Promise.all(f.map(function(){var Qt=(0,p.Z)(function*(wn){if(wn!==W)try{yield wn._remove(Re)}catch{}});return function(wn){return Qt.apply(this,arguments)}}())),new pn(W,c,w)):new pn(W,c,w)})()}}function dn(y){const c=y.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Fr(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Qn(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ve(c))return"Blackberry";if(de(c))return"Webos";if(ar(c))return"Safari";if((c.includes("chrome/")||kr(c))&&!c.includes("edge/"))return"Chrome";if(pr(c))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Qn(y=(0,C.z$)()){return/firefox\//i.test(y)}function ar(y=(0,C.z$)()){const c=y.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function kr(y=(0,C.z$)()){return/crios\//i.test(y)}function Fr(y=(0,C.z$)()){return/iemobile/i.test(y)}function pr(y=(0,C.z$)()){return/android/i.test(y)}function ve(y=(0,C.z$)()){return/blackberry/i.test(y)}function de(y=(0,C.z$)()){return/webos/i.test(y)}function te(y=(0,C.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function ln(y=(0,C.z$)()){return te(y)||pr(y)||de(y)||ve(y)||/windows phone/i.test(y)||Fr(y)}function Dn(y,c=[]){let f;switch(y){case"Browser":f=dn((0,C.z$)());break;case"Worker":f=`${dn((0,C.z$)())}-${y}`;break;default:f=y}const w=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${ge.SDK_VERSION}/${w}`}class jr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const w=W=>new Promise((Re,tt)=>{try{Re(c(W))}catch(Mt){tt(Mt)}});w.onAbort=f,this.queue.push(w);const U=this.queue.length-1;return()=>{this.queue[U]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,p.Z)(function*(){var w;if(f.auth.currentUser===c)return;const U=[];try{for(const W of f.queue)yield W(c),W.onAbort&&U.push(W.onAbort)}catch(W){U.reverse();for(const Re of U)try{Re()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=W)||void 0===w?void 0:w.message})}})()}}class cn{constructor(c,f,w){this.app=c,this.heartbeatServiceProvider=f,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new jr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(c,f){var w=this;return f&&(this._popupRedirectResolver=he(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var U,W;if(!w._deleted&&(w.persistenceManager=yield pn.create(w,c),!w._deleted)){if(null!==(U=w._popupRedirectResolver)&&void 0!==U&&U._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(f),w.lastNotifiedUid=(null===(W=w.currentUser)||void 0===W?void 0:W.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var w;const U=yield f.assertedPersistence.getCurrentUser();let W=U,Re=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const tt=null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId,Mt=W?._redirectEventId,Qt=yield f.tryRedirectSignIn(c);(!tt||tt===Mt)&&Qt?.user&&(W=Qt.user,Re=!0)}if(!W)return f.directlySetCurrentUser(null);if(!W._redirectEventId){if(Re)try{yield f.beforeStateQueue.runMiddleware(W)}catch(tt){W=U,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(tt))}return W?f.reloadAndSetCurrentUserOrClear(W):f.directlySetCurrentUser(null)}return X(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===W._redirectEventId?f.directlySetCurrentUser(W):f.reloadAndSetCurrentUserOrClear(W)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let w=null;try{w=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){var w;try{yield vn(c)}catch(U){if("auth/network-request-failed"!==(null===(w=U)||void 0===w?void 0:w.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Se(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const w=c?(0,C.m9)(c):null;return w&&X(w.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(w&&w._clone(f))})()}_updateCurrentUser(c,f=!1){var w=this;return(0,p.Z)(function*(){if(!w._deleted)return c&&X(w.tenantId===c.tenantId,w,"tenant-id-mismatch"),f||(yield w.beforeStateQueue.runMiddleware(c)),w.queue((0,p.Z)(function*(){yield w.directlySetCurrentUser(c),w.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(he(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new C.LL("auth","Firebase",c())}onAuthStateChanged(c,f,w){return this.registerStateListener(this.authStateSubscription,c,f,w)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,w){return this.registerStateListener(this.idTokenSubscription,c,f,w)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var w=this;return(0,p.Z)(function*(){const U=yield w.getOrInitRedirectPersistenceManager(f);return null===c?U.removeCurrentUser():U.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const w=c&&he(c)||f._popupRedirectResolver;X(w,f,"argument-error"),f.redirectPersistenceManager=yield pn.create(f,[he(w._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var w,U;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(w=f._currentUser)||void 0===w?void 0:w._redirectEventId)===c?f._currentUser:(null===(U=f.redirectUser)||void 0===U?void 0:U._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,w,U){if(this._deleted)return()=>{};const W="function"==typeof f?f:f.next.bind(f),Re=this._isInitialized?Promise.resolve():this._initializationPromise;return X(Re,this,"internal-error"),Re.then(()=>W(this.currentUser)),"function"==typeof f?c.addObserver(f,w,U):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Dn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const w={"X-Client-Version":c.clientVersion};c.app.options.appId&&(w["X-Firebase-gmpid"]=c.app.options.appId);const U=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return U&&(w["X-Firebase-Client"]=U),w})()}}function nr(y){return(0,C.m9)(y)}class $r{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,C.ne)(f=>this.observer=f)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ui(y){const c=y.indexOf(":");return c<0?"":y.substr(0,c+1)}function ss(y){if(!y)return null;const c=Number(y);return isNaN(c)?null:c}class xr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Me("not implemented")}_getIdTokenResponse(c){return Me("not implemented")}_linkToIdToken(c,f){return Me("not implemented")}_getReauthenticationResolver(c){return Me("not implemented")}}function gr(y,c){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:resetPassword",tn(y,c))})).apply(this,arguments)}function Jn(y,c){return xs.apply(this,arguments)}function xs(){return(xs=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ki(y,c){return ti.apply(this,arguments)}function ti(){return(ti=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:update",tn(y,c))})).apply(this,arguments)}function xi(){return(xi=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signInWithPassword",tn(y,c))})).apply(this,arguments)}function ni(y,c){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:sendOobCode",tn(y,c))})).apply(this,arguments)}function Er(y,c){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(y,c){return ni(y,c)})).apply(this,arguments)}function wr(y,c){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(y,c){return ni(y,c)})).apply(this,arguments)}function js(y,c){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(y,c){return ni(y,c)})).apply(this,arguments)}function Oo(y,c){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(y,c){return ni(y,c)})).apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signInWithEmailLink",tn(y,c))})).apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signInWithEmailLink",tn(y,c))})).apply(this,arguments)}class Hs extends xr{constructor(c,f,w,U=null){super("password",w),this._email=c,this._password=f,this._tenantId=U}static _fromEmailAndPassword(c,f){return new Hs(c,f,"password")}static _fromEmailAndCode(c,f,w=null){return new Hs(c,f,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function os(y,c){return xi.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function ji(y,c){return ms.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:ce(c,"internal-error")}})()}_linkToIdToken(c,f){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return Jn(c,{idToken:f,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function $s(y,c){return ho.apply(this,arguments)}(c,{idToken:f,email:w._email,oobCode:w._password});default:ce(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Lr(y,c){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signInWithIdp",tn(y,c))})).apply(this,arguments)}class Fe extends xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Fe(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):ce("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:U}=f,W=(0,le._T)(f,["providerId","signInMethod"]);if(!w||!U)return null;const Re=new Fe(w,U);return Re.idToken=W.idToken||void 0,Re.accessToken=W.accessToken||void 0,Re.secret=W.secret,Re.nonce=W.nonce,Re.pendingToken=W.pendingToken||null,Re}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,Lr(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Lr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,C.xO)(f)}return c}}function ut(y,c){return St.apply(this,arguments)}function St(){return(St=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:sendVerificationCode",tn(y,c))})).apply(this,arguments)}function mn(){return(mn=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,c))})).apply(this,arguments)}function Fn(){return(Fn=(0,p.Z)(function*(y,c){const f=yield In(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,c));if(f.temporaryProof)throw or(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const hi={USER_NOT_FOUND:"user-not-found"};function Rs(){return(Rs=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,Object.assign(Object.assign({},c),{operation:"REAUTH"})),hi)})).apply(this,arguments)}class ii extends xr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new ii({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new ii({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Zt(y,c){return mn.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function ri(y,c){return Fn.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Gs(y,c){return Rs.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:w,verificationCode:U}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:w,code:U}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:w,phoneNumber:U,temporaryProof:W}=c;return w||f||U||W?new ii({verificationId:f,verificationCode:w,phoneNumber:U,temporaryProof:W}):null}}class ys{constructor(c){var f,w,U,W,Re,tt;const Mt=(0,C.zd)((0,C.pd)(c)),Qt=null!==(f=Mt.apiKey)&&void 0!==f?f:null,wn=null!==(w=Mt.oobCode)&&void 0!==w?w:null,sn=function si(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=Mt.mode)&&void 0!==U?U:null);X(Qt&&wn&&sn,"argument-error"),this.apiKey=Qt,this.operation=sn,this.code=wn,this.continueUrl=null!==(W=Mt.continueUrl)&&void 0!==W?W:null,this.languageCode=null!==(Re=Mt.languageCode)&&void 0!==Re?Re:null,this.tenantId=null!==(tt=Mt.tenantId)&&void 0!==tt?tt:null}static parseLink(c){const f=function Ni(y){const c=(0,C.zd)((0,C.pd)(y)).link,f=c?(0,C.zd)((0,C.pd)(c)).deep_link_id:null,w=(0,C.zd)((0,C.pd)(y)).deep_link_id;return(w?(0,C.zd)((0,C.pd)(w)).link:null)||w||f||c||y}(c);try{return new ys(f)}catch{return null}}}let Di=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,w){return Hs._fromEmailAndPassword(f,w)}static credentialWithLink(f,w){const U=ys.parseLink(w);return X(U,"argument-error"),Hs._fromEmailAndCode(f,U.code,U.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ci{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class oi extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Yi extends oi{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return X("providerId"in f&&"signInMethod"in f,"argument-error"),Fe._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return X(c.idToken||c.accessToken,"argument-error"),Fe._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Yi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Yi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:w,oauthTokenSecret:U,pendingToken:W,nonce:Re,providerId:tt}=c;if(!w&&!U&&!f&&!W||!tt)return null;try{return new Yi(tt)._credential({idToken:f,accessToken:w,nonce:Re,pendingToken:W})}catch{return null}}}let Qs=(()=>{class y extends oi{constructor(){super("facebook.com")}static credential(f){return Fe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),vs=(()=>{class y extends oi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,w){return Fe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:w,oauthAccessToken:U}=f;if(!w&&!U)return null;try{return y.credential(w,U)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),_s=(()=>{class y extends oi{constructor(){super("github.com")}static credential(f){return Fe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qi extends xr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Lr(c,this.buildRequest())}_linkToIdToken(c,f){const w=this.buildRequest();return w.idToken=f,Lr(c,w)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Lr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:w,signInMethod:U,pendingToken:W}=f;return w&&U&&W&&w===U?new Qi(w,W):null}static _create(c,f){return new Qi(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Rr extends Ci{constructor(c){X(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Rr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Rr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Qi.fromJSON(c);return X(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:w}=c;if(!f||!w)return null;try{return Qi._create(w,f)}catch{return null}}}let pi=(()=>{class y extends oi{constructor(){super("twitter.com")}static credential(f,w){return Fe._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:w,oauthTokenSecret:U}=f;if(!w||!U)return null;try{return y.credential(w,U)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Oi(y,c){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signUp",tn(y,c))})).apply(this,arguments)}class ai{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,w,U=!1){return(0,p.Z)(function*(){const W=yield Bt._fromIdTokenResponse(c,w,U),Re=po(w);return new ai({user:W,providerId:Re,_tokenResponse:w,operationType:f})})()}static _forOperation(c,f,w){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(w,!0);const U=po(w);return new ai({user:c,providerId:U,_tokenResponse:w,operationType:f})})()}}function po(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ir(){return(ir=(0,p.Z)(function*(y){var c;const f=nr(y);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new ai({user:f.currentUser,providerId:null,operationType:"signIn"});const w=yield Oi(f,{returnSecureToken:!0}),U=yield ai._fromIdTokenResponse(f,"signIn",w,!0);return yield f._updateCurrentUser(U.user),U})).apply(this,arguments)}class gi extends C.ZR{constructor(c,f,w,U){var W;super(f.code,f.message),this.operationType=w,this.user=U,Object.setPrototypeOf(this,gi.prototype),this.customData={appName:c.name,tenantId:null!==(W=c.tenantId)&&void 0!==W?W:void 0,_serverResponse:f.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(c,f,w,U){return new gi(c,f,w,U)}}function Js(y,c,f,w){return("reauthenticate"===c?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(W=>{throw"auth/multi-factor-auth-required"===W.code?gi._fromErrorAndOperation(y,W,c,w):W})}function ui(y){return new Set(y.map(({providerId:c})=>c).filter(c=>!!c))}function Ln(){return(Ln=(0,p.Z)(function*(y,c){const f=(0,C.m9)(y);yield On(!0,f,c);const{providerUserInfo:w}=yield Un(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),U=ui(w||[]);return f.providerData=f.providerData.filter(W=>U.has(W.providerId)),U.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Ji(y,c){return bi.apply(this,arguments)}function bi(){return(bi=(0,p.Z)(function*(y,c,f=!1){const w=yield Ft(y,c._linkToIdToken(y.auth,yield y.getIdToken()),f);return ai._forOperation(y,"link",w)})).apply(this,arguments)}function On(y,c,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(y,c,f){yield vn(c);const U=!1===y?"provider-already-linked":"no-such-provider";X(ui(c.providerData).has(f)===y,c.auth,U)})).apply(this,arguments)}function Es(y,c){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(y,c,f=!1){var w;const{auth:U}=y,W="reauthenticate";try{const Re=yield Ft(y,Js(U,W,c,y),f);X(Re.idToken,U,"internal-error");const tt=$e(Re.idToken);X(tt,U,"internal-error");const{sub:Mt}=tt;return X(y.uid===Mt,U,"user-mismatch"),ai._forOperation(y,W,Re)}catch(Re){throw"auth/user-not-found"===(null===(w=Re)||void 0===w?void 0:w.code)&&ce(U,"user-mismatch"),Re}})).apply(this,arguments)}function $i(y,c){return ko.apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(y,c,f=!1){const w="signIn",U=yield Js(y,w,c),W=yield ai._fromIdTokenResponse(y,w,U);return f||(yield y._updateCurrentUser(W.user)),W})).apply(this,arguments)}function Nr(y,c){return rn.apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(y,c){return $i(nr(y),c)})).apply(this,arguments)}function Xi(y,c){return qo.apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(y,c){const f=(0,C.m9)(y);return yield On(!1,f,c.providerId),Ji(f,c)})).apply(this,arguments)}function go(y,c){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(y,c){return Es((0,C.m9)(y),c)})).apply(this,arguments)}function Hr(y,c){return es.apply(this,arguments)}function es(){return(es=(0,p.Z)(function*(y,c){return In(y,"POST","/v1/accounts:signInWithCustomToken",tn(y,c))})).apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(y,c){const f=nr(y),w=yield Hr(f,{token:c,returnSecureToken:!0}),U=yield ai._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(U.user),U})).apply(this,arguments)}class gt{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Sn._fromServerResponse(c,f):ce(c,"internal-error")}}class Sn extends gt{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Sn(f)}}function Os(y,c,f){var w;X((null===(w=f.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),X(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(X(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(X(f.android.packageName.length>0,y,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Dr(){return(Dr=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y),U={requestType:"PASSWORD_RESET",email:c};f&&Os(w,U,f),yield wr(w,U)})).apply(this,arguments)}function as(){return(as=(0,p.Z)(function*(y,c,f){yield gr((0,C.m9)(y),{oobCode:c,newPassword:f})})).apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(y,c){yield Ki((0,C.m9)(y),{oobCode:c})})).apply(this,arguments)}function Ps(y,c){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(y,c){const f=(0,C.m9)(y),w=yield gr(f,{oobCode:c}),U=w.requestType;switch(X(U,f,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(w.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(w.mfaInfo,f,"internal-error");default:X(w.email,f,"internal-error")}let W=null;return w.mfaInfo&&(W=gt._fromServerResponse(nr(f),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:W},operation:U}})).apply(this,arguments)}function P(){return(P=(0,p.Z)(function*(y,c){const{data:f}=yield Ps((0,C.m9)(y),c);return f.email})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(y,c,f){const w=nr(y),U=yield Oi(w,{returnSecureToken:!0,email:c,password:f}),W=yield ai._fromIdTokenResponse(w,"signIn",U);return yield w._updateCurrentUser(W.user),W})).apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y),U={requestType:"EMAIL_SIGNIN",email:c};X(f.handleCodeInApp,w,"argument-error"),f&&Os(w,U,f),yield js(w,U)})).apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y),U=Di.credentialWithLink(c,f||pt());return X(U._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Nr(w,U)})).apply(this,arguments)}function us(y,c){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:createAuthUri",tn(y,c))})).apply(this,arguments)}function ro(){return(ro=(0,p.Z)(function*(y,c){const w={identifier:c,continueUri:_t()?pt():"http://localhost"},{signinMethods:U}=yield us((0,C.m9)(y),w);return U||[]})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(y,c){const f=(0,C.m9)(y),U={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};c&&Os(f.auth,U,c);const{email:W}=yield Er(f.auth,U);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ko(){return(Ko=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y),W={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:c};f&&Os(w.auth,W,f);const{email:Re}=yield Oo(w.auth,W);Re!==y.email&&(yield y.reload())})).apply(this,arguments)}function ls(y,c){return ga.apply(this,arguments)}function ga(){return(ga=(0,p.Z)(function*(y,c){return Tn(y,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(y,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const w=(0,C.m9)(y),W={idToken:yield w.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Re=yield Ft(w,ls(w.auth,W));w.displayName=Re.displayName||null,w.photoURL=Re.photoUrl||null;const tt=w.providerData.find(({providerId:Mt})=>"password"===Mt);tt&&(tt.displayName=w.displayName,tt.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Re)})).apply(this,arguments)}function x(y,c,f){return G.apply(this,arguments)}function G(){return(G=(0,p.Z)(function*(y,c,f){const{auth:w}=y,W={idToken:yield y.getIdToken(),returnSecureToken:!0};c&&(W.email=c),f&&(W.password=f);const Re=yield Ft(y,Jn(w,W));yield y._updateTokensIfNecessary(Re,!0)})).apply(this,arguments)}class He{constructor(c,f,w={}){this.isNewUser=c,this.providerId=f,this.profile=w}}class rt extends He{constructor(c,f,w,U){super(c,f,w),this.username=U}}class Wt extends He{constructor(c,f){super(c,"facebook.com",f)}}class Pn extends rt{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Xn extends He{constructor(c,f){super(c,"google.com",f)}}class Yn extends rt{constructor(c,f,w){super(c,"twitter.com",f,w)}}function Mn(y){const{user:c,_tokenResponse:f}=y;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function pe(y){var c,f;if(!y)return null;const{providerId:w}=y,U=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},W=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const Re=null===(f=null===(c=$e(y.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Re)return new He(W,"anonymous"!==Re&&"custom"!==Re?Re:null)}if(!w)return null;switch(w){case"facebook.com":return new Wt(W,U);case"github.com":return new Pn(W,U);case"google.com":return new Xn(W,U);case"twitter.com":return new Yn(W,U,y.screenName||null);case"custom":case"anonymous":return new He(W,null);default:return new He(W,w,U)}}(f)}class cs{constructor(c,f,w){this.type=c,this.credential=f,this.auth=w}static _fromIdtoken(c,f){return new cs("enroll",c,f)}static _fromMfaPendingCredential(c){return new cs("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,w;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return cs._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(w=c.multiFactorSession)&&void 0!==w&&w.idToken)return cs._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Jo{constructor(c,f,w){this.session=c,this.hints=f,this.signInResolver=w}static _fromError(c,f){const w=nr(c),U=f.customData._serverResponse,W=(U.mfaInfo||[]).map(tt=>gt._fromServerResponse(w,tt));X(U.mfaPendingCredential,w,"internal-error");const Re=cs._fromMfaPendingCredential(U.mfaPendingCredential);return new Jo(Re,W,function(){var tt=(0,p.Z)(function*(Mt){const Qt=yield Mt._process(w,Re);delete U.mfaInfo,delete U.mfaPendingCredential;const wn=Object.assign(Object.assign({},U),{idToken:Qt.idToken,refreshToken:Qt.refreshToken});switch(f.operationType){case"signIn":const sn=yield ai._fromIdTokenResponse(w,f.operationType,wn);return yield w._updateCurrentUser(sn.user),sn;case"reauthenticate":return X(f.user,w,"internal-error"),ai._forOperation(f.user,f.operationType,wn);default:ce(w,"internal-error")}});return function(Mt){return tt.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function xa(y,c){return Tn(y,"POST","/v2/accounts/mfaEnrollment:start",tn(y,c))}class qu{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(w=>gt._fromServerResponse(c.auth,w)))})}static _fromUser(c){return new qu(c)}getSession(){var c=this;return(0,p.Z)(function*(){return cs._fromIdtoken(yield c.user.getIdToken(),c.user.auth)})()}enroll(c,f){var w=this;return(0,p.Z)(function*(){const U=c,W=yield w.getSession(),Re=yield Ft(w.user,U._process(w.user.auth,W,f));return yield w.user._updateTokensIfNecessary(Re),w.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){var w;const U="string"==typeof c?c:c.uid,W=yield f.user.getIdToken(),Re=yield Ft(f.user,function ma(y,c){return Tn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(y,c))}(f.user.auth,{idToken:W,mfaEnrollmentId:U}));f.enrolledFactors=f.enrolledFactors.filter(({uid:tt})=>tt!==U),yield f.user._updateTokensIfNecessary(Re);try{yield f.user.reload()}catch(tt){if("auth/user-token-expired"!==(null===(w=tt)||void 0===w?void 0:w.code))throw tt}})()}}const Wa=new WeakMap,ea="__sak";class qa{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ea,"1"),this.storage.removeItem(ea),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ra=(()=>{class y extends qa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,w)=>this.onStorageEvent(f,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ya(){const y=(0,C.z$)();return ar(y)||te(y)}()&&function Yt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ln(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const w of Object.keys(this.listeners)){const U=this.storage.getItem(w),W=this.localCache[w];U!==W&&f(w,W,U)}}onStorageEvent(f,w=!1){if(!f.key)return void this.forAllChangedKeys((tt,Mt,Qt)=>{this.notifyListeners(tt,Qt)});const U=f.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const tt=this.storage.getItem(U);if(f.newValue!==tt)null!==f.newValue?this.storage.setItem(U,f.newValue):this.storage.removeItem(U);else if(this.localCache[U]===f.newValue&&!w)return}const W=()=>{const tt=this.storage.getItem(U);!w&&this.localCache[U]===tt||this.notifyListeners(U,tt)},Re=this.storage.getItem(U);!function jt(){return(0,C.w1)()&&10===document.documentMode}()||Re===f.newValue||f.newValue===f.oldValue?W():setTimeout(W,10)}notifyListeners(f,w){this.localCache[f]=w;const U=this.listeners[f];if(U)for(const W of Array.from(U))W(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,w,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:w,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,w){var U=()=>super._set,W=this;return(0,p.Z)(function*(){yield U().call(W,f,w),W.localCache[f]=JSON.stringify(w)})()}_get(f){var w=()=>super._get,U=this;return(0,p.Z)(function*(){const W=yield w().call(U,f);return U.localCache[f]=JSON.stringify(W),W})()}_remove(f){var w=()=>super._remove,U=this;return(0,p.Z)(function*(){yield w().call(U,f),delete U.localCache[f]})()}}return y.type="LOCAL",y})(),ts=(()=>{class y extends qa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,w){}_removeListener(f,w){}}return y.type="SESSION",y})();let Ku=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const w=this.receivers.find(W=>W.isListeningto(f));if(w)return w;const U=new y(f);return this.receivers.push(U),U}isListeningto(f){return this.eventTarget===f}handleEvent(f){var w=this;return(0,p.Z)(function*(){const U=f,{eventId:W,eventType:Re,data:tt}=U.data,Mt=w.handlersMap[Re];if(!Mt?.size)return;U.ports[0].postMessage({status:"ack",eventId:W,eventType:Re});const Qt=Array.from(Mt).map(function(){var sn=(0,p.Z)(function*(Xr){return Xr(U.origin,tt)});return function(Xr){return sn.apply(this,arguments)}}()),wn=yield function Ls(y){return Promise.all(y.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(w){return{fulfilled:!1,reason:w}}});return function(f){return c.apply(this,arguments)}}()))}(Qt);U.ports[0].postMessage({status:"done",eventId:W,eventType:Re,response:wn})})()}_subscribe(f,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(w)}_unsubscribe(f,w){this.handlersMap[f]&&w&&this.handlersMap[f].delete(w),(!w||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function _a(y="",c=10){let f="";for(let w=0;w<c;w++)f+=Math.floor(10*Math.random());return y+f}class wt{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,w=50){var U=this;return(0,p.Z)(function*(){const W=typeof MessageChannel<"u"?new MessageChannel:null;if(!W)throw new Error("connection_unavailable");let Re,tt;return new Promise((Mt,Qt)=>{const wn=_a("",20);W.port1.start();const sn=setTimeout(()=>{Qt(new Error("unsupported_event"))},w);tt={messageChannel:W,onMessage(Xr){const zo=Xr;if(zo.data.eventId===wn)switch(zo.data.status){case"ack":clearTimeout(sn),Re=setTimeout(()=>{Qt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Re),Mt(zo.data.response);break;default:clearTimeout(sn),clearTimeout(Re),Qt(new Error("invalid_response"))}}},U.handlers.add(tt),W.port1.addEventListener("message",tt.onMessage),U.target.postMessage({eventType:c,eventId:wn,data:f},[W.port2])}).finally(()=>{tt&&U.removeMessageHandler(tt)})})()}}function kn(){return window}function ta(){return typeof kn().WorkerGlobalScope<"u"&&"function"==typeof kn().importScripts}function fn(){return(fn=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ye="firebaseLocalStorageDb",Or="firebaseLocalStorage",Ea="fbase_key";class so{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Na(y,c){return y.transaction([Or],c?"readwrite":"readonly").objectStore(Or)}function _o(){const y=indexedDB.open(Ye,1);return new Promise((c,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Or,{keyPath:Ea})}catch(U){f(U)}}),y.addEventListener("success",(0,p.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Or)?c(w):(w.close(),yield function gu(){const y=indexedDB.deleteDatabase(Ye);return new so(y).toPromise()}(),c(yield _o()))}))})}function Vo(y,c,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(y,c,f){const w=Na(y,!0).put({[Ea]:c,value:f});return new so(w).toPromise()})).apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(y,c){const f=Na(y,!1).get(c),w=yield new so(f).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Uo(y,c){const f=Na(y,!0).delete(c);return new so(f).toPromise()}const Bo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield _o()),f.db})()}_withRetries(f){var w=this;return(0,p.Z)(function*(){let U=0;for(;;)try{const W=yield w._openDb();return yield f(W)}catch(W){if(U++>3)throw W;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return ta()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Ku._getInstance(function Lt(){return ta()?self:null}()),f.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(U,W){return{keyProcessed:(yield f._poll()).includes(W.key)}});return function(U,W){return w.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(U,W){return["keyChanged"]});return function(U,W){return w.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var w,U;if(f.activeServiceWorker=yield function qt(){return fn.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new wt(f.activeServiceWorker);const W=yield f.sender._send("ping",{},800);!W||(null===(w=W[0])||void 0===w?void 0:w.fulfilled)&&(null===(U=W[0])||void 0===U?void 0:U.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function pu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:f},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield _o();return yield Vo(f,ea,"1"),yield Uo(f,ea),!0}catch{}return!1})()}_withPendingWrite(f){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield f()}finally{w.pendingWrites--}})()}_set(f,w){var U=this;return(0,p.Z)(function*(){return U._withPendingWrite((0,p.Z)(function*(){return yield U._withRetries(W=>Vo(W,f,w)),U.localCache[f]=w,U.notifyServiceWorker(f)}))})()}_get(f){var w=this;return(0,p.Z)(function*(){const U=yield w._withRetries(W=>function Ya(y,c){return Oa.apply(this,arguments)}(W,f));return w.localCache[f]=U,U})()}_remove(f){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(U=>Uo(U,f)),delete w.localCache[f],w.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const w=yield f._withRetries(Re=>{const tt=Na(Re,!1).getAll();return new so(tt).toPromise()});if(!w)return[];if(0!==f.pendingWrites)return[];const U=[],W=new Set;for(const{fbase_key:Re,value:tt}of w)W.add(Re),JSON.stringify(f.localCache[Re])!==JSON.stringify(tt)&&(f.notifyListeners(Re,tt),U.push(Re));for(const Re of Object.keys(f.localCache))f.localCache[Re]&&!W.has(Re)&&(f.notifyListeners(Re,null),U.push(Re));return U})()}notifyListeners(f,w){this.localCache[f]=w;const U=this.listeners[f];if(U)for(const W of Array.from(U))W(w)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function lr(y,c){return Tn(y,"POST","/v2/accounts/mfaSignIn:start",tn(y,c))}function xn(){return(xn=(0,p.Z)(function*(y){return(yield Tn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Sr(y){return new Promise((c,f)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=c,w.onerror=U=>{const W=Je("internal-error");W.customData=U,f(W)},w.type="text/javascript",w.charset="UTF-8",function jo(){var y,c;return null!==(c=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==c?c:document}().appendChild(w)})}function Ot(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Cs=1e12;class mr{constructor(c){this.auth=c,this.counter=Cs,this._widgets=new Map}render(c,f){const w=this.counter;return this._widgets.set(w,new Yu(c,this.auth.name,f||{})),this.counter++,w}reset(c){var f;const w=c||Cs;null===(f=this._widgets.get(w))||void 0===f||f.delete(),this._widgets.delete(w)}getResponse(c){var f;return(null===(f=this._widgets.get(c||Cs))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var w;return null===(w=f._widgets.get(c||Cs))||void 0===w||w.execute(),""})()}}class Yu{constructor(c,f,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof c?document.getElementById(c):c;X(U,"argument-error",{appName:f}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function El(y){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ao=Ot("rcb"),mu=new at(3e4,6e4);class ns{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=kn().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return X(function Qu(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(kn().grecaptcha):new Promise((w,U)=>{const W=kn().setTimeout(()=>{U(Je(c,"network-request-failed"))},mu.get());kn()[ao]=()=>{kn().clearTimeout(W),delete kn()[ao];const tt=kn().grecaptcha;if(!tt)return void U(Je(c,"internal-error"));const Mt=tt.render;tt.render=(Qt,wn)=>{const sn=Mt(Qt,wn);return this.counter++,sn},this.hostLanguage=f,w(tt)},Sr(`https://www.google.com/recaptcha/api.js??${(0,C.xO)({onload:ao,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(W),U(Je(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=kn().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class na{load(c){return(0,p.Z)(function*(){return new mr(c)})()}clearedOneInstance(){}}const wl="recaptcha",wa={theme:"light",type:"image"};class li{constructor(c,f=Object.assign({},wa),w){this.parameters=f,this.type=wl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(w),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof c?document.getElementById(c):c;X(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new na:new ns,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),w=c.getAssertedRecaptcha();return w.getResponse(f)||new Promise(W=>{const Re=tt=>{!tt||(c.tokenChangeListeners.delete(Re),W(tt))};c.tokenChangeListeners.add(Re),c.isInvisible&&w.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(w=>w(f)),"function"==typeof c)c(f);else if("string"==typeof c){const w=kn()[c];"function"==typeof w&&w(f)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const w=document.createElement("div");f.appendChild(w),f=w}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){X(_t()&&!ta(),c.auth,"internal-error"),yield function We(){let y=null;return new Promise(c=>{"complete"!==document.readyState?(y=()=>c(),window.addEventListener("load",y)):c()}).catch(c=>{throw y&&window.removeEventListener("load",y),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Si(y){return xn.apply(this,arguments)}(c.auth);X(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wo{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=ii._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function ra(){return(ra=(0,p.Z)(function*(y,c,f){const w=nr(y),U=yield Io(w,c,(0,C.m9)(f));return new wo(U,W=>Nr(w,W))})).apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y);yield On(!1,w,"phone");const U=yield Io(w.auth,c,(0,C.m9)(f));return new wo(U,W=>Xi(w,W))})).apply(this,arguments)}function Us(){return(Us=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y),U=yield Io(w.auth,c,(0,C.m9)(f));return new wo(U,W=>go(w,W))})).apply(this,arguments)}function Io(y,c,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,p.Z)(function*(y,c,f){var w;const U=yield f.verify();try{let W;if(X("string"==typeof U,y,"argument-error"),X(f.type===wl,y,"argument-error"),W="string"==typeof c?{phoneNumber:c}:c,"session"in W){const Re=W.session;if("phoneNumber"in W)return X("enroll"===Re.type,y,"internal-error"),(yield xa(y,{idToken:Re.credential,phoneEnrollmentInfo:{phoneNumber:W.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{X("signin"===Re.type,y,"internal-error");const tt=(null===(w=W.multiFactorHint)||void 0===w?void 0:w.uid)||W.multiFactorUid;return X(tt,y,"missing-multi-factor-info"),(yield lr(y,{mfaPendingCredential:Re.credential,mfaEnrollmentId:tt,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Re}=yield ut(y,{phoneNumber:W.phoneNumber,recaptchaToken:U});return Re}}finally{f._reset()}})).apply(this,arguments)}function yu(){return(yu=(0,p.Z)(function*(y,c){yield Ji((0,C.m9)(y),c)})).apply(this,arguments)}let Pi=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=nr(f)}verifyPhoneNumber(f,w){return Io(this.auth,f,(0,C.m9)(w))}static credential(f,w){return ii._fromVerification(f,w)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:w,temporaryProof:U}=f;return w&&U?ii._fromTokenResponse(w,U):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ia(y,c){return c?he(c):(X(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ws extends xr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Lr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Lr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Lr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function ds(y){return $i(y.auth,new Ws(y),y.bypassAuthState)}function Pr(y){const{auth:c,user:f}=y;return X(f,c,"internal-error"),Es(f,new Ws(y),y.bypassAuthState)}function _(y){return E.apply(this,arguments)}function E(){return(E=(0,p.Z)(function*(y){const{auth:c,user:f}=y;return X(f,c,"internal-error"),Ji(f,new Ws(y),y.bypassAuthState)})).apply(this,arguments)}class m{constructor(c,f,w,U,W=!1){this.auth=c,this.resolver=w,this.user=U,this.bypassAuthState=W,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(w,U){c.pendingPromise={resolve:w,reject:U};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(W){c.reject(W)}});return function(w,U){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:U,postBody:W,tenantId:Re,error:tt,type:Mt}=c;if(tt)return void f.reject(tt);const Qt={auth:f.auth,requestUri:w,sessionId:U,tenantId:Re||void 0,postBody:W||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Mt)(Qt))}catch(wn){f.reject(wn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return ds;case"linkViaPopup":case"linkViaRedirect":return _;case"reauthViaPopup":case"reauthViaRedirect":return Pr;default:ce(this.auth,"internal-error")}}resolve(c){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b=new at(2e3,1e4);function $(){return($=(0,p.Z)(function*(y,c,f){const w=nr(y);Be(y,c,Ci);const U=ia(w,f);return new Kt(w,"signInViaPopup",c,U).executeNotNull()})).apply(this,arguments)}function oe(){return(oe=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y);Be(w.auth,c,Ci);const U=ia(w.auth,f);return new Kt(w.auth,"reauthViaPopup",c,U,w).executeNotNull()})).apply(this,arguments)}function bt(){return(bt=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y);Be(w.auth,c,Ci);const U=ia(w.auth,f);return new Kt(w.auth,"linkViaPopup",c,U,w).executeNotNull()})).apply(this,arguments)}let Kt=(()=>{class y extends m{constructor(f,w,U,W,Re){super(f,w,W,Re),this.provider=U,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const w=yield f.execute();return X(w,f.auth,"internal-error"),w})()}onExecution(){var f=this;return(0,p.Z)(function*(){ee(1===f.filter.length,"Popup operations only handle one event");const w=_a();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],w),f.authWindow.associatedEvent=w,f.resolver._originValidation(f.auth).catch(U=>{f.reject(U)}),f.resolver._isIframeWebStorageSupported(f.auth,U=>{U||f.reject(Je(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var w,U;this.pollId=null!==(U=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==U&&U.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Je(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,b.get())};f()}}return y.currentPopupAction=null,y})();const Vn=new Map;class ki extends m{constructor(c,f,w=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,w),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let w=Vn.get(f.auth._key());if(!w){try{const W=(yield function Gi(y,c){return rs.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;w=()=>Promise.resolve(W)}catch(U){w=()=>Promise.reject(U)}Vn.set(f.auth._key(),w)}return f.bypassAuthState||Vn.set(f.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(w,c);if("unknown"!==c.type){if(c.eventId){const U=yield w.auth._redirectUserForId(c.eventId);if(U)return w.user=U,f().call(w,c);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function rs(){return(rs=(0,p.Z)(function*(y,c){const f=vu(c),w=bs(y);if(!(yield w._isAvailable()))return!1;const U="true"===(yield w._get(f));return yield w._remove(f),U})).apply(this,arguments)}function ci(y,c){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(y,c){return bs(y)._set(vu(c),"true")})).apply(this,arguments)}function sa(y,c){Vn.set(y._key(),c)}function bs(y){return he(y._redirectPersistence)}function vu(y){return Wn("pendingRedirect",y.config.apiKey,y.name)}function M(){return(M=(0,p.Z)(function*(y,c,f){const w=nr(y);Be(y,c,Ci);const U=ia(w,f);return yield ci(U,w),U._openRedirect(w,c,"signInViaRedirect")})).apply(this,arguments)}function se(){return(se=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y);Be(w.auth,c,Ci);const U=ia(w.auth,f);yield ci(U,w.auth);const W=yield un(w);return U._openRedirect(w.auth,c,"reauthViaRedirect",W)})).apply(this,arguments)}function yt(){return(yt=(0,p.Z)(function*(y,c,f){const w=(0,C.m9)(y);Be(w.auth,c,Ci);const U=ia(w.auth,f);yield On(!1,w,c.providerId),yield ci(U,w.auth);const W=yield un(w);return U._openRedirect(w.auth,c,"linkViaRedirect",W)})).apply(this,arguments)}function hn(){return(hn=(0,p.Z)(function*(y,c){return yield nr(y)._initializationPromise,En(y,c,!1)})).apply(this,arguments)}function En(y,c){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(y,c,f=!1){const w=nr(y),U=ia(w,c),Re=yield new ki(w,U,f).execute();return Re&&!f&&(delete Re.user._redirectEventId,yield w._persistUserIfCurrent(Re.user),yield w._setRedirectUser(null,c)),Re})).apply(this,arguments)}function un(y){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,p.Z)(function*(y){const c=_a(`${y.uid}:::`);return y._redirectEventId=c,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),c})).apply(this,arguments)}class Ja{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(c,w)&&(f=!0,this.sendToConsumer(c,w),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function di(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Da(y);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var w;if(c.error&&!Da(c)){const U=(null===(w=c.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";f.onError(Je(this.auth,U))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const w=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&w}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pa(c))}saveEventToCache(c){this.cachedEventUids.add(Pa(c)),this.lastProcessedEventTime=Date.now()}}function Pa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(c=>c).join("-")}function Da({type:y,error:c}){return"unknown"===y&&"auth/no-auth-event"===c?.code}function oa(y){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(y,c={}){return Tn(y,"GET","/v1/projects",c)})).apply(this,arguments)}const Xa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ca=/^https?/;function Kd(){return(Kd=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:c}=yield oa(y);for(const f of c)try{if(Il(f))return}catch{}ce(y,"unauthorized-domain")})).apply(this,arguments)}function Il(y){const c=pt(),{protocol:f,hostname:w}=new URL(c);if(y.startsWith("chrome-extension://")){const Re=new URL(y);return""===Re.hostname&&""===w?"chrome-extension:"===f&&y.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Re.hostname===w}if(!Ca.test(f))return!1;if(Xa.test(y))return w===y;const U=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(w)}const tc=new at(3e4,6e4);function Dl(){const y=kn().___jsl;if(y?.H)for(const c of Object.keys(y.H))if(y.H[c].r=y.H[c].r||[],y.H[c].L=y.H[c].L||[],y.H[c].r=[...y.H[c].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let Xu=null;function Ts(y){return Xu=Xu||function Cl(y){return new Promise((c,f)=>{var w,U,W;function Re(){Dl(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Dl(),f(Je(y,"network-request-failed"))},timeout:tc.get()})}if(null!==(U=null===(w=kn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==U&&U.Iframe)c(gapi.iframes.getContext());else{if(null===(W=kn().gapi)||void 0===W||!W.load){const tt=Ot("iframefcb");return kn()[tt]=()=>{gapi.load?Re():f(Je(y,"network-request-failed"))},Sr(`https://apis.google.com/js/api.js?onload=${tt}`).catch(Mt=>f(Mt))}Re()}}).catch(c=>{throw Xu=null,c})}(y),Xu}const Yd=new at(5e3,15e3),Rf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nf(y){const c=y.config;X(c.authDomain,y,"auth-domain-config-required");const f=c.emulator?Vt(c,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:c.apiKey,appName:y.name,v:ge.SDK_VERSION},U=zc.get(y.config.apiHost);U&&(w.eid=U);const W=y._getFrameworks();return W.length&&(w.fw=W.join(",")),`${f}?${(0,C.xO)(w).slice(1)}`}function el(){return el=(0,p.Z)(function*(y){const c=yield Ts(y),f=kn().gapi;return X(f,y,"internal-error"),c.open({where:document.body,url:Nf(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rf,dontclear:!0},w=>new Promise(function(){var U=(0,p.Z)(function*(W,Re){yield w.restyle({setHideOnLeave:!1});const tt=Je(y,"network-request-failed"),Mt=kn().setTimeout(()=>{Re(tt)},Yd.get());function Qt(){kn().clearTimeout(Mt),W(w)}w.ping(Qt).then(Qt,()=>{Re(tt)})});return function(W,Re){return U.apply(this,arguments)}}()))}),el.apply(this,arguments)}const Ta={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Co{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tl(y,c,f,w,U,W){X(y.config.authDomain,y,"auth-domain-config-required"),X(y.config.apiKey,y,"invalid-api-key");const Re={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:w,v:ge.SDK_VERSION,eventId:U};if(c instanceof Ci){c.setDefaultLanguage(y.languageCode),Re.providerId=c.providerId||"",(0,C.xb)(c.getCustomParameters())||(Re.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Mt,Qt]of Object.entries(W||{}))Re[Mt]=Qt}if(c instanceof oi){const Mt=c.getScopes().filter(Qt=>""!==Qt);Mt.length>0&&(Re.scopes=Mt.join(","))}y.tenantId&&(Re.tid=y.tenantId);const tt=Re;for(const Mt of Object.keys(tt))void 0===tt[Mt]&&delete tt[Mt];return`${function Wc({config:y}){return y.emulator?Vt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,C.xO)(tt).slice(1)}`}const eu="webStorageSupport";class ua extends class Tl{constructor(c){this.factorId=c}_process(c,f,w){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,w);case"signin":return this._finalizeSignIn(c,f.credential);default:return Me("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new ua(c)}_finalizeEnroll(c,f,w){return function Wu(y,c){return Tn(y,"POST","/v2/accounts/mfaEnrollment:finalize",tn(y,c))}(c,{idToken:f,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function an(y,c){return Tn(y,"POST","/v2/accounts/mfaSignIn:finalize",tn(y,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Eu=(()=>{class y{constructor(){}static assertion(f){return ua._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var ic="@firebase/auth";class kf{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(w=>{var U;c((null===(U=w)||void 0===U?void 0:U.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ka(){return window}function qc(){return(qc=(0,p.Z)(function*(y,c,f){var w;const{BuildInfo:U}=ka();ee(c.sessionId,"AuthEvent did not contain a session ID");const W=yield wu(c.sessionId),Re={};return te()?Re.ibi=U.packageName:pr()?Re.apn=U.packageName:ce(y,"operation-not-supported-in-this-environment"),U.displayName&&(Re.appDisplayName=U.displayName),Re.sessionId=W,tl(y,f,c.type,void 0,null!==(w=c.eventId)&&void 0!==w?w:void 0,Re)})).apply(this,arguments)}function Aa(){return(Aa=(0,p.Z)(function*(y){const{BuildInfo:c}=ka(),f={};te()?f.iosBundleId=c.packageName:pr()?f.androidPackageName=c.packageName:ce(y,"operation-not-supported-in-this-environment"),yield oa(y,f)})).apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(y,c,f){const{cordova:w}=ka();let U=()=>{};try{yield new Promise((W,Re)=>{let tt=null;function Mt(){var sn;W();const Xr=null===(sn=w.plugins.browsertab)||void 0===sn?void 0:sn.close;"function"==typeof Xr&&Xr(),"function"==typeof f?.close&&f.close()}function Qt(){tt||(tt=window.setTimeout(()=>{Re(Je(y,"redirect-cancelled-by-user"))},2e3))}function wn(){"visible"===document?.visibilityState&&Qt()}c.addPassiveListener(Mt),document.addEventListener("resume",Qt,!1),pr()&&document.addEventListener("visibilitychange",wn,!1),U=()=>{c.removePassiveListener(Mt),document.removeEventListener("resume",Qt,!1),document.removeEventListener("visibilitychange",wn,!1),tt&&window.clearTimeout(tt)}})}finally{U()}})).apply(this,arguments)}function wu(y){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,p.Z)(function*(y){const c=Vf(y),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(U=>U.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Vf(y){if(ee(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const c=new ArrayBuffer(y.length),f=new Uint8Array(c);for(let w=0;w<y.length;w++)f[w]=y.charCodeAt(w);return f}!function Ff(y){(0,ge._registerComponent)(new Y.wA("auth",(c,{options:f})=>{const w=c.getProvider("app").getImmediate(),U=c.getProvider("heartbeat"),{apiKey:W,authDomain:Re}=w.options;return((tt,Mt)=>{X(W&&!W.includes(":"),"invalid-api-key",{appName:tt.name}),X(!Re?.includes(":"),"argument-error",{appName:tt.name});const Qt={apiKey:W,authDomain:Re,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dn(y)},wn=new cn(tt,Mt,Qt);return function lt(y,c){const f=c?.persistence||[],w=(Array.isArray(f)?f:[f]).map(he);c?.errorMap&&y._updateErrorMap(c.errorMap),y._initializeWithPersistence(w,c?.popupRedirectResolver)}(wn,f),wn})(w,U)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,w)=>{c.getProvider("auth-internal").initialize()})),(0,ge._registerComponent)(new Y.wA("auth-internal",c=>{const f=nr(c.getProvider("auth").getImmediate());return new kf(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ge.registerVersion)(ic,"0.20.7",function Og(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ge.registerVersion)(ic,"0.20.7","esm2017")}("Browser");class Qc extends Ja{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function ac(y){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,p.Z)(function*(y){const c=yield Du()._get(Xc(y));return c&&(yield Du()._remove(Xc(y))),c})).apply(this,arguments)}function Uf(){const y=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const w=Math.floor(Math.random()*c.length);y.push(c.charAt(w))}return y.join("")}function Du(){return he(Ra)}function Xc(y){return Wn("authEvent",y.config.apiKey,y.name)}function Ho(y){if(!y?.includes("?"))return{};const[c,...f]=y.split("?");return(0,C.zd)(f.join("?"))}function Cu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Je("no-auth-event")}}function rl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function La(y=(0,C.z$)()){return!("file:"!==rl()&&"ionic:"!==rl()&&"capacitor:"!==rl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Al(){try{const y=self.localStorage,c=_a();if(y)return y.setItem(c,"1"),y.removeItem(c),!function Va(y=(0,C.z$)()){return function bo(){return(0,C.w1)()&&11===document?.documentMode}()||function jf(y=(0,C.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,C.hl)()}catch{return To()&&(0,C.hl)()}return!1}function To(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sl(){return(function ih(){return"http:"===rl()||"https:"===rl()}()||(0,C.ru)()||La())&&!function Bf(){return(0,C.b$)()||(0,C.UG)()}()&&Al()&&!To()}function bu(){return La()&&typeof document<"u"}function lc(){return(lc=(0,p.Z)(function*(){return!!bu()&&new Promise(y=>{const c=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),y(!0)})})})).apply(this,arguments)}const Ks={LOCAL:"local",NONE:"none",SESSION:"session"},Tu=X,il="persistence";function Su(y){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,p.Z)(function*(y){yield y._initializationPromise;const c=rd(),f=Wn(il,y.config.apiKey,y.name);c&&c.setItem(f,y._getPersistence())})).apply(this,arguments)}function rd(){var y;try{return(null===(y=function Bn(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const id=X;class Go{constructor(){this.browserResolver=he(class lo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ts,this._completeRedirectFn=En,this._overrideRedirectResult=sa}_openPopup(c,f,w,U){var W=this;return(0,p.Z)(function*(){var Re;ee(null===(Re=W.eventManagers[c._key()])||void 0===Re?void 0:Re.manager,"_initialize() not called before _openPopup()");const tt=tl(c,f,w,pt(),U);return function nc(y,c,f,w=500,U=600){const W=Math.max((window.screen.availHeight-U)/2,0).toString(),Re=Math.max((window.screen.availWidth-w)/2,0).toString();let tt="";const Mt=Object.assign(Object.assign({},Ta),{width:w.toString(),height:U.toString(),top:W,left:Re}),Qt=(0,C.z$)().toLowerCase();f&&(tt=kr(Qt)?"_blank":f),Qn(Qt)&&(c=c||"http://localhost",Mt.scrollbars="yes");const wn=Object.entries(Mt).reduce((Xr,[zo,sl])=>`${Xr}${zo}=${sl},`,"");if(function st(y=(0,C.z$)()){var c;return te(y)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Qt)&&"_self"!==tt)return function _u(y,c){const f=document.createElement("a");f.href=y,f.target=c;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(w)}(c||"",tt),new Co(null);const sn=window.open(c||"",tt,wn);X(sn,y,"popup-blocked");try{sn.focus()}catch{}return new Co(sn)}(c,tt,_a())})()}_openRedirect(c,f,w,U){var W=this;return(0,p.Z)(function*(){return yield W._originValidation(c),function vi(y){kn().location.href=y}(tl(c,f,w,pt(),U)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:U,promise:W}=this.eventManagers[f];return U?Promise.resolve(U):(ee(W,"If manager is not set, promise should be"),W)}const w=this.initAndGetManager(c);return this.eventManagers[f]={promise:w},w.catch(()=>{delete this.eventManagers[f]}),w}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const w=yield function Jd(y){return el.apply(this,arguments)}(c),U=new Ja(c);return w.register("authEvent",W=>(X(W?.authEvent,c,"invalid-auth-event"),{status:U.onEvent(W.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:U},f.iframes[c._key()]=w,U})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(eu,{type:eu},U=>{var W;const Re=null===(W=U?.[0])||void 0===W?void 0:W[eu];void 0!==Re&&f(!!Re),ce(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ba(y){return Kd.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return ln()||ar()||te()}}),this.cordovaResolver=he(class rh{constructor(){this._redirectPersistence=ts,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=En,this._overrideRedirectResult=sa}_initialize(c){var f=this;return(0,p.Z)(function*(){const w=c._key();let U=f.eventManagers.get(w);return U||(U=new Qc(c),f.eventManagers.set(w,U),f.attachCallbackListeners(c,U)),U})()}_openPopup(c){ce(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,w,U){var W=this;return(0,p.Z)(function*(){!function Kc(y){var c,f,w,U,W,Re,tt,Mt,Qt,wn;const sn=ka();X("function"==typeof(null===(c=sn?.universalLinks)||void 0===c?void 0:c.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof(null===(f=sn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(W=null===(U=null===(w=sn?.cordova)||void 0===w?void 0:w.plugins)||void 0===U?void 0:U.browsertab)||void 0===W?void 0:W.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Mt=null===(tt=null===(Re=sn?.cordova)||void 0===Re?void 0:Re.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===Mt?void 0:Mt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(wn=null===(Qt=sn?.cordova)||void 0===Qt?void 0:Qt.InAppBrowser)||void 0===wn?void 0:wn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Re=yield W._initialize(c);yield Re.initialized(),Re.resetRedirect(),function Do(){Vn.clear()}(),yield W._originValidation(c);const tt=function Jc(y,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:Uf(),postBody:null,tenantId:y.tenantId,error:Je(y,"no-auth-event")}}(c,w,U);yield function Ei(y,c){return Du()._set(Xc(y),c)}(c,tt);const Mt=yield function Lf(y,c,f){return qc.apply(this,arguments)}(c,tt,f),Qt=yield function qs(y){const{cordova:c}=ka();return new Promise(f=>{c.plugins.browsertab.isAvailable(w=>{let U=null;w?c.plugins.browsertab.openUrl(y):U=c.InAppBrowser.open(y,function Le(y=(0,C.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(U)})})}(Mt);return function nl(y,c,f){return Sa.apply(this,arguments)}(c,Re,Qt)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function th(y){return Aa.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:w,handleOpenURL:U,BuildInfo:W}=ka(),Re=setTimeout((0,p.Z)(function*(){yield ac(c),f.onEvent(Cu())}),500),tt=function(){var wn=(0,p.Z)(function*(sn){clearTimeout(Re);const Xr=yield ac(c);let zo=null;Xr&&sn?.url&&(zo=function nh(y,c){var f,w;const U=function Fa(y){const c=Ho(y),f=c.link?decodeURIComponent(c.link):void 0,w=Ho(f).link,U=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Ho(U).link||U||w||f||y}(c);if(U.includes("/__/auth/callback")){const W=Ho(U),Re=W.firebaseError?function ed(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(W.firebaseError)):null,tt=null===(w=null===(f=Re?.code)||void 0===f?void 0:f.split("auth/"))||void 0===w?void 0:w[1],Mt=tt?Je(tt):null;return Mt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Mt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:U,postBody:null}}return null}(Xr,sn.url)),f.onEvent(zo||Cu())});return function(Xr){return wn.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,tt);const Mt=U,Qt=`${W.packageName.toLowerCase()}://`;ka().handleOpenURL=function(){var wn=(0,p.Z)(function*(sn){if(sn.toLowerCase().startsWith(Qt)&&tt({url:sn}),"function"==typeof Mt)try{Mt(sn)}catch(Xr){console.error(Xr)}});return function(sn){return wn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ts,this._completeRedirectFn=En,this._overrideRedirectResult=sa}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,w,U){var W=this;return(0,p.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._openPopup(c,f,w,U)})()}_openRedirect(c,f,w,U){var W=this;return(0,p.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._openRedirect(c,f,w,U)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return bu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return id(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function $f(){return lc.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function sd(y){return y.unwrap()}function cc(y){return xu(y)}function xu(y){const{_tokenResponse:c}=y instanceof C.ZR?y.customData:y;if(!c)return null;if(!(y instanceof C.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Pi.credentialFromResult(y);const f=c.providerId;if(!f||"password"===f)return null;let w;switch(f){case"google.com":w=vs;break;case"facebook.com":w=Qs;break;case"github.com":w=_s;break;case"twitter.com":w=pi;break;default:const{oauthIdToken:U,oauthAccessToken:W,oauthTokenSecret:Re,pendingToken:tt,nonce:Mt}=c;return W||Re||U||tt?tt?f.startsWith("saml.")?Qi._create(f,tt):Fe._fromParams({providerId:f,signInMethod:f,pendingToken:tt,idToken:U,accessToken:W}):new Yi(f).credential({idToken:U,accessToken:W,rawNonce:Mt}):null}return y instanceof C.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function As(y,c){return c.catch(f=>{throw f instanceof C.ZR&&function Mu(y,c){var f,w;const U=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=c)||void 0===w?void 0:w.code))c.resolver=new dc(y,function er(y,c){var f;const w=(0,C.m9)(y),U=c;return X(c.customData.operationType,w,"argument-error"),X(null===(f=U.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,w,"argument-error"),Jo._fromError(w,U)}(y,c));else if(U){const W=xu(c),Re=c;W&&(Re.credential=W,Re.tenantId=U.tenantId||void 0,Re.email=U.email||void 0,Re.phoneNumber=U.phoneNumber||void 0)}}(y,f),f}).then(f=>{const U=f.user;return{operationType:f.operationType,credential:cc(f),additionalUserInfo:Mn(f),user:Ys.getOrCreate(U)}})}function ad(y,c){return zi.apply(this,arguments)}function zi(){return(zi=(0,p.Z)(function*(y,c){const f=yield c;return{verificationId:f.verificationId,confirm:w=>As(y,f.confirm(w))}})).apply(this,arguments)}class dc{constructor(c,f){this.resolver=f,this.auth=function od(y){return y.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return As(sd(this.auth),this.resolver.resolveSignIn(c))}}class Ys{constructor(c){this._delegate=c,this.multiFactor=function Xo(y){const c=(0,C.m9)(y);return Wa.has(c)||Wa.set(c,qu._fromUser(c)),Wa.get(c)}(c)}static getOrCreate(c){return Ys.USER_MAP.has(c)||Ys.USER_MAP.set(c,new Ys(c)),Ys.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return As(f.auth,Xi(f._delegate,c))})()}linkWithPhoneNumber(c,f){var w=this;return(0,p.Z)(function*(){return ad(w.auth,function Hi(y,c,f){return _i.apply(this,arguments)}(w._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return As(f.auth,function Xe(y,c,f){return bt.apply(this,arguments)}(f._delegate,c,Go))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Su(nr(f.auth)),function Oe(y,c,f){return function Ke(y,c,f){return yt.apply(this,arguments)}(y,c,f)}(f._delegate,c,Go)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return As(f.auth,go(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return ad(this.auth,function Ju(y,c,f){return Us.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return As(this.auth,function ie(y,c,f){return oe.apply(this,arguments)}(this._delegate,c,Go))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield Su(nr(f.auth)),function O(y,c,f){return function H(y,c,f){return se.apply(this,arguments)}(y,c,f)}(f._delegate,c,Go)})()}sendEmailVerification(c){return function pa(y,c){return Fo.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function Vr(y,c){return Ln.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function T(y,c){return x((0,C.m9)(y),c,null)}(this._delegate,c)}updatePassword(c){return function B(y,c){return x((0,C.m9)(y),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function ec(y,c){return yu.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Yo(y,c){return Qo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Lo(y,c,f){return Ko.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ys.USER_MAP=new WeakMap;const Ua=X;let la=(()=>{class y{constructor(f,w){if(this.app=f,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:U}=f.options;Ua(U,"invalid-api-key",{appName:f.name}),Ua(U,"invalid-api-key",{appName:f.name});const W=typeof window<"u"?Go:void 0;this._delegate=w.initialize({options:{persistence:sh(U,f.name),popupRedirectResolver:W}}),this._delegate._updateErrorMap(Ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,w){!function gs(y,c,f){const w=nr(y);X(w._canInitEmulator,w,"emulator-config-failed"),X(/^https?:\/\//.test(c),w,"invalid-emulator-scheme");const U=!!f?.disableWarnings,W=Ui(c),{host:Re,port:tt}=function Ar(y){const c=Ui(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(c.length));if(!f)return{host:"",port:null};const w=f[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(w);if(U){const W=U[1];return{host:W,port:ss(w.substr(W.length+1))}}{const[W,Re]=w.split(":");return{host:W,port:ss(Re)}}}(c);w.config.emulator={url:`${W}//${Re}${null===tt?"":`:${tt}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Re,port:tt,protocol:W.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function Mi(){function y(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,w)}applyActionCode(f){return function mi(y,c){return yo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ps(this._delegate,f)}confirmPasswordReset(f,w){return function ws(y,c,f){return as.apply(this,arguments)}(this._delegate,f,w)}createUserWithEmailAndPassword(f,w){var U=this;return(0,p.Z)(function*(){return As(U._delegate,function R(y,c,f){return A.apply(this,arguments)}(U._delegate,f,w))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function no(y,c){return ro.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function qn(y,c){return"EMAIL_SIGNIN"===ys.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Ua(Sl(),f._delegate,"operation-not-supported-in-this-environment");const w=yield function Pt(y,c){return hn.apply(this,arguments)}(f._delegate,Go);return w?As(f._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function td(y,c){nr(y)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,w,U){const{next:W,error:Re,complete:tt}=hc(f,w,U);return this._delegate.onAuthStateChanged(W,Re,tt)}onIdTokenChanged(f,w,U){const{next:W,error:Re,complete:tt}=hc(f,w,U);return this._delegate.onIdTokenChanged(W,Re,tt)}sendSignInLinkToEmail(f,w){return function qe(y,c,f){return kt.apply(this,arguments)}(this._delegate,f,w)}sendPasswordResetEmail(f,w){return function Zs(y,c,f){return Dr.apply(this,arguments)}(this._delegate,f,w||void 0)}setPersistence(f){var w=this;return(0,p.Z)(function*(){let U;switch(function Au(y,c){Tu(Object.values(Ks).includes(c),y,"invalid-persistence-type"),(0,C.b$)()?Tu(c!==Ks.SESSION,y,"unsupported-persistence-type"):(0,C.UG)()?Tu(c===Ks.NONE,y,"unsupported-persistence-type"):To()?Tu(c===Ks.NONE||c===Ks.LOCAL&&(0,C.hl)(),y,"unsupported-persistence-type"):Tu(c===Ks.NONE||Al(),y,"unsupported-persistence-type")}(w._delegate,f),f){case Ks.SESSION:U=ts;break;case Ks.LOCAL:U=(yield he(Bo)._isAvailable())?Bo:Ra;break;case Ks.NONE:U=_n;break;default:return ce("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(U)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return As(this._delegate,function fa(y){return ir.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return As(this._delegate,Nr(this._delegate,f))}signInWithCustomToken(f){return As(this._delegate,function Xs(y,c){return mo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,w){return As(this._delegate,function z(y,c,f){return Nr((0,C.m9)(y),Di.credential(c,f))}(this._delegate,f,w))}signInWithEmailLink(f,w){return As(this._delegate,function Kn(y,c,f){return yi.apply(this,arguments)}(this._delegate,f,w))}signInWithPhoneNumber(f,w){return ad(this._delegate,function uo(y,c,f){return ra.apply(this,arguments)}(this._delegate,f,w))}signInWithPopup(f){var w=this;return(0,p.Z)(function*(){return Ua(Sl(),w._delegate,"operation-not-supported-in-this-environment"),As(w._delegate,function N(y,c,f){return $.apply(this,arguments)}(w._delegate,f,Go))})()}signInWithRedirect(f){var w=this;return(0,p.Z)(function*(){return Ua(Sl(),w._delegate,"operation-not-supported-in-this-environment"),yield Su(w._delegate),function Br(y,c,f){return function $o(y,c,f){return M.apply(this,arguments)}(y,c,f)}(w._delegate,f,Go)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function vo(y,c){return P.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ks,y})();function hc(y,c,f){let w=y;"function"!=typeof y&&({next:w,error:c,complete:f}=y);const U=w;return{next:Re=>U(Re&&Ys.getOrCreate(Re)),error:c,complete:f}}function sh(y,c){const f=function tu(y,c){const f=rd();if(!f)return[];const w=Wn(il,y,c);switch(f.getItem(w)){case Ks.NONE:return[_n];case Ks.LOCAL:return[Bo,ts];case Ks.SESSION:return[ts];default:return[]}}(y,c);if(typeof self<"u"&&!f.includes(Bo)&&f.push(Bo),typeof window<"u")for(const w of[Ra,ts])f.includes(w)||f.push(w);return f.includes(_n)||f.push(_n),f}class Ba{constructor(){this.providerId="phone",this._delegate=new Pi(sd(k.Z.auth()))}static credential(c,f){return Pi.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}Ba.PHONE_SIGN_IN_METHOD=Pi.PHONE_SIGN_IN_METHOD,Ba.PROVIDER_ID=Pi.PROVIDER_ID;const oh=X;class ud{constructor(c,f,w=k.Z.app()){var U;oh(null===(U=w.options)||void 0===U?void 0:U.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new li(c,f,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function uh(y){y.INTERNAL.registerComponent(new Y.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),w=c.getProvider("auth");return new la(f,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Di,FacebookAuthProvider:Qs,GithubAuthProvider:_s,GoogleAuthProvider:vs,OAuthProvider:Yi,SAMLAuthProvider:Rr,PhoneAuthProvider:Ba,PhoneMultiFactorGenerator:Eu,RecaptchaVerifier:ud,TwitterAuthProvider:pi,Auth:la,AuthCredential:xr,Error:C.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.20")}(k.Z)},3189:(Rt,ke,L)=>{L.d(ke,{Z:()=>k,h:()=>C});var p=L(4650);let k=(()=>{class ge{transform(we,Y){return Y&&we?ge.filter(we,Y):we}static filter(we,Y){const Ae=Y.toLowerCase();function be(K,ne){for(let re in K)if(null!==K[re]&&null!=K[re]&&("object"==typeof K[re]&&be(K[re],ne)||K[re].toString().toLowerCase().includes(Ae)))return!0;return!1}return we.filter(function(K){return be(K,Y)})}}return ge.\u0275fac=function(we){return new(we||ge)},ge.\u0275pipe=p.Yjl({name:"filter",type:ge,pure:!1}),ge.\u0275prov=p.Yz7({token:ge,factory:ge.\u0275fac}),ge})(),C=(()=>{class ge{}return ge.\u0275fac=function(we){return new(we||ge)},ge.\u0275mod=p.oAB({type:ge}),ge.\u0275inj=p.cJS({}),ge})()},9751:(Rt,ke,L)=>{L.d(ke,{y:()=>Ae});var p=L(2961),k=L(727),C=L(8822),ge=L(9635),le=L(2416),we=L(576),Y=L(2806);let Ae=(()=>{class re{constructor(et){et&&(this._subscribe=et)}lift(et){const Ve=new re;return Ve.source=this,Ve.operator=et,Ve}subscribe(et,Ve,Tt){const ze=function ne(re){return re&&re instanceof p.Lv||function K(re){return re&&(0,we.m)(re.next)&&(0,we.m)(re.error)&&(0,we.m)(re.complete)}(re)&&(0,k.Nn)(re)}(et)?et:new p.Hp(et,Ve,Tt);return(0,Y.x)(()=>{const{operator:De,source:Dt}=this;ze.add(De?De.call(ze,Dt):Dt?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(et){try{return this._subscribe(et)}catch(Ve){et.error(Ve)}}forEach(et,Ve){return new(Ve=be(Ve))((Tt,ze)=>{const De=new p.Hp({next:Dt=>{try{et(Dt)}catch(Et){ze(Et),De.unsubscribe()}},error:ze,complete:Tt});this.subscribe(De)})}_subscribe(et){var Ve;return null===(Ve=this.source)||void 0===Ve?void 0:Ve.subscribe(et)}[C.L](){return this}pipe(...et){return(0,ge.U)(et)(this)}toPromise(et){return new(et=be(et))((Ve,Tt)=>{let ze;this.subscribe(De=>ze=De,De=>Tt(De),()=>Ve(ze))})}}return re.create=nt=>new re(nt),re})();function be(re){var nt;return null!==(nt=re??le.v.Promise)&&void 0!==nt?nt:Promise}},7579:(Rt,ke,L)=>{L.d(ke,{x:()=>Y});var p=L(9751),k=L(727);const ge=(0,L(3888).d)(be=>function(){be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=L(8737),we=L(2806);let Y=(()=>{class be extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const re=new Ae(this,this);return re.operator=ne,re}_throwIfClosed(){if(this.closed)throw new ge}next(ne){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(ne)}})}error(ne){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:re}=this;for(;re.length;)re.shift().error(ne)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:re,isStopped:nt,observers:et}=this;return re||nt?k.Lc:(this.currentObservers=null,et.push(ne),new k.w0(()=>{this.currentObservers=null,(0,le.P)(et,ne)}))}_checkFinalizedStatuses(ne){const{hasError:re,thrownError:nt,isStopped:et}=this;re?ne.error(nt):et&&ne.complete()}asObservable(){const ne=new p.y;return ne.source=this,ne}}return be.create=(K,ne)=>new Ae(K,ne),be})();class Ae extends Y{constructor(K,ne){super(),this.destination=K,this.source=ne}next(K){var ne,re;null===(re=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===re||re.call(ne,K)}error(K){var ne,re;null===(re=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===re||re.call(ne,K)}complete(){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===ne||ne.call(K)}_subscribe(K){var ne,re;return null!==(re=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(K))&&void 0!==re?re:k.Lc}}},2961:(Rt,ke,L)=>{L.d(ke,{Hp:()=>Tt,Lv:()=>re});var p=L(576),k=L(727),C=L(2416),ge=L(7849);function le(){}const we=be("C",void 0,void 0);function be(ce,Je,Qe){return{kind:ce,value:Je,error:Qe}}var K=L(3410),ne=L(2806);class re extends k.w0{constructor(Je){super(),this.isStopped=!1,Je?(this.destination=Je,(0,k.Nn)(Je)&&Je.add(this)):this.destination=Et}static create(Je,Qe,Be){return new Tt(Je,Qe,Be)}next(Je){this.isStopped?Dt(function Ae(ce){return be("N",ce,void 0)}(Je),this):this._next(Je)}error(Je){this.isStopped?Dt(function Y(ce){return be("E",void 0,ce)}(Je),this):(this.isStopped=!0,this._error(Je))}complete(){this.isStopped?Dt(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Je){this.destination.next(Je)}_error(Je){try{this.destination.error(Je)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function et(ce,Je){return nt.call(ce,Je)}class Ve{constructor(Je){this.partialObserver=Je}next(Je){const{partialObserver:Qe}=this;if(Qe.next)try{Qe.next(Je)}catch(Be){ze(Be)}}error(Je){const{partialObserver:Qe}=this;if(Qe.error)try{Qe.error(Je)}catch(Be){ze(Be)}else ze(Je)}complete(){const{partialObserver:Je}=this;if(Je.complete)try{Je.complete()}catch(Qe){ze(Qe)}}}class Tt extends re{constructor(Je,Qe,Be){let Ge;if(super(),(0,p.m)(Je)||!Je)Ge={next:Je??void 0,error:Qe??void 0,complete:Be??void 0};else{let X;this&&C.v.useDeprecatedNextContext?(X=Object.create(Je),X.unsubscribe=()=>this.unsubscribe(),Ge={next:Je.next&&et(Je.next,X),error:Je.error&&et(Je.error,X),complete:Je.complete&&et(Je.complete,X)}):Ge=Je}this.destination=new Ve(Ge)}}function ze(ce){C.v.useDeprecatedSynchronousErrorHandling?(0,ne.O)(ce):(0,ge.h)(ce)}function Dt(ce,Je){const{onStoppedNotification:Qe}=C.v;Qe&&K.z.setTimeout(()=>Qe(ce,Je))}const Et={closed:!0,next:le,error:function De(ce){throw ce},complete:le}},727:(Rt,ke,L)=>{L.d(ke,{Lc:()=>we,w0:()=>le,Nn:()=>Y});var p=L(576);const C=(0,L(3888).d)(be=>function(ne){be(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((re,nt)=>`${nt+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var ge=L(8737);class le{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const et of ne)et.remove(this);else ne.remove(this);const{initialTeardown:re}=this;if((0,p.m)(re))try{re()}catch(et){K=et instanceof C?et.errors:[et]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const et of nt)try{Ae(et)}catch(Ve){K=K??[],Ve instanceof C?K=[...K,...Ve.errors]:K.push(Ve)}}if(K)throw new C(K)}}add(K){var ne;if(K&&K!==this)if(this.closed)Ae(K);else{if(K instanceof le){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(K)}}_hasParent(K){const{_parentage:ne}=this;return ne===K||Array.isArray(ne)&&ne.includes(K)}_addParent(K){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(K),ne):ne?[ne,K]:K}_removeParent(K){const{_parentage:ne}=this;ne===K?this._parentage=null:Array.isArray(ne)&&(0,ge.P)(ne,K)}remove(K){const{_finalizers:ne}=this;ne&&(0,ge.P)(ne,K),K instanceof le&&K._removeParent(this)}}le.EMPTY=(()=>{const be=new le;return be.closed=!0,be})();const we=le.EMPTY;function Y(be){return be instanceof le||be&&"closed"in be&&(0,p.m)(be.remove)&&(0,p.m)(be.add)&&(0,p.m)(be.unsubscribe)}function Ae(be){(0,p.m)(be)?be():be.unsubscribe()}},2416:(Rt,ke,L)=>{L.d(ke,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Rt,ke,L)=>{L.d(ke,{z:()=>le});var p=L(8189),C=L(7669),ge=L(8996);function le(...we){return function k(){return(0,p.J)(1)}()((0,ge.D)(we,(0,C.yG)(we)))}},515:(Rt,ke,L)=>{L.d(ke,{E:()=>k});const k=new(L(9751).y)(le=>le.complete())},8996:(Rt,ke,L)=>{L.d(ke,{D:()=>Je});var p=L(8421),k=L(5363),C=L(9468),we=L(9751),Ae=L(2202),be=L(576),K=L(9672);function re(Qe,Be){if(!Qe)throw new Error("Iterable cannot be null");return new we.y(Ge=>{(0,K.f)(Ge,Be,()=>{const X=Qe[Symbol.asyncIterator]();(0,K.f)(Ge,Be,()=>{X.next().then(Me=>{Me.done?Ge.complete():Ge.next(Me.value)})},0,!0)})})}var nt=L(3670),et=L(8239),Ve=L(1144),Tt=L(6495),ze=L(2206),De=L(4532),Dt=L(3260);function Je(Qe,Be){return Be?function ce(Qe,Be){if(null!=Qe){if((0,nt.c)(Qe))return function ge(Qe,Be){return(0,p.Xf)(Qe).pipe((0,C.R)(Be),(0,k.Q)(Be))}(Qe,Be);if((0,Ve.z)(Qe))return function Y(Qe,Be){return new we.y(Ge=>{let X=0;return Be.schedule(function(){X===Qe.length?Ge.complete():(Ge.next(Qe[X++]),Ge.closed||this.schedule())})})}(Qe,Be);if((0,et.t)(Qe))return function le(Qe,Be){return(0,p.Xf)(Qe).pipe((0,C.R)(Be),(0,k.Q)(Be))}(Qe,Be);if((0,ze.D)(Qe))return re(Qe,Be);if((0,Tt.T)(Qe))return function ne(Qe,Be){return new we.y(Ge=>{let X;return(0,K.f)(Ge,Be,()=>{X=Qe[Ae.h](),(0,K.f)(Ge,Be,()=>{let Me,ee;try{({value:Me,done:ee}=X.next())}catch(Ie){return void Ge.error(Ie)}ee?Ge.complete():Ge.next(Me)},0,!0)}),()=>(0,be.m)(X?.return)&&X.return()})}(Qe,Be);if((0,Dt.L)(Qe))return function Et(Qe,Be){return re((0,Dt.Q)(Qe),Be)}(Qe,Be)}throw(0,De.z)(Qe)}(Qe,Be):(0,p.Xf)(Qe)}},8421:(Rt,ke,L)=>{L.d(ke,{Xf:()=>nt});var p=L(655),k=L(1144),C=L(8239),ge=L(9751),le=L(3670),we=L(2206),Y=L(4532),Ae=L(6495),be=L(3260),K=L(576),ne=L(7849),re=L(8822);function nt(ce){if(ce instanceof ge.y)return ce;if(null!=ce){if((0,le.c)(ce))return function et(ce){return new ge.y(Je=>{const Qe=ce[re.L]();if((0,K.m)(Qe.subscribe))return Qe.subscribe(Je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,k.z)(ce))return function Ve(ce){return new ge.y(Je=>{for(let Qe=0;Qe<ce.length&&!Je.closed;Qe++)Je.next(ce[Qe]);Je.complete()})}(ce);if((0,C.t)(ce))return function Tt(ce){return new ge.y(Je=>{ce.then(Qe=>{Je.closed||(Je.next(Qe),Je.complete())},Qe=>Je.error(Qe)).then(null,ne.h)})}(ce);if((0,we.D)(ce))return De(ce);if((0,Ae.T)(ce))return function ze(ce){return new ge.y(Je=>{for(const Qe of ce)if(Je.next(Qe),Je.closed)return;Je.complete()})}(ce);if((0,be.L)(ce))return function Dt(ce){return De((0,be.Q)(ce))}(ce)}throw(0,Y.z)(ce)}function De(ce){return new ge.y(Je=>{(function Et(ce,Je){var Qe,Be,Ge,X;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Qe=(0,p.KL)(ce);!(Be=yield Qe.next()).done;)if(Je.next(Be.value),Je.closed)return}catch(Me){Ge={error:Me}}finally{try{Be&&!Be.done&&(X=Qe.return)&&(yield X.call(Qe))}finally{if(Ge)throw Ge.error}}Je.complete()})})(ce,Je).catch(Qe=>Je.error(Qe))})}},6451:(Rt,ke,L)=>{L.d(ke,{T:()=>we});var p=L(8189),k=L(8421),C=L(515),ge=L(7669),le=L(8996);function we(...Y){const Ae=(0,ge.yG)(Y),be=(0,ge._6)(Y,1/0),K=Y;return K.length?1===K.length?(0,k.Xf)(K[0]):(0,p.J)(be)((0,le.D)(K,Ae)):C.E}},9646:(Rt,ke,L)=>{L.d(ke,{of:()=>C});var p=L(7669),k=L(8996);function C(...ge){const le=(0,p.yG)(ge);return(0,k.D)(ge,le)}},5403:(Rt,ke,L)=>{L.d(ke,{x:()=>k});var p=L(2961);function k(ge,le,we,Y,Ae){return new C(ge,le,we,Y,Ae)}class C extends p.Lv{constructor(le,we,Y,Ae,be,K){super(le),this.onFinalize=be,this.shouldUnsubscribe=K,this._next=we?function(ne){try{we(ne)}catch(re){le.error(re)}}:super._next,this._error=Ae?function(ne){try{Ae(ne)}catch(re){le.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=Y?function(){try{Y()}catch(ne){le.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4351:(Rt,ke,L)=>{L.d(ke,{b:()=>C});var p=L(5577),k=L(576);function C(ge,le){return(0,k.m)(le)?(0,p.z)(ge,le,1):(0,p.z)(ge,1)}},6590:(Rt,ke,L)=>{L.d(ke,{d:()=>C});var p=L(4482),k=L(5403);function C(ge){return(0,p.e)((le,we)=>{let Y=!1;le.subscribe((0,k.x)(we,Ae=>{Y=!0,we.next(Ae)},()=>{Y||we.next(ge),we.complete()}))})}},9300:(Rt,ke,L)=>{L.d(ke,{h:()=>C});var p=L(4482),k=L(5403);function C(ge,le){return(0,p.e)((we,Y)=>{let Ae=0;we.subscribe((0,k.x)(Y,be=>ge.call(le,be,Ae++)&&Y.next(be)))})}},590:(Rt,ke,L)=>{L.d(ke,{P:()=>Y});var p=L(6805),k=L(9300),C=L(5698),ge=L(6590),le=L(8068),we=L(4671);function Y(Ae,be){const K=arguments.length>=2;return ne=>ne.pipe(Ae?(0,k.h)((re,nt)=>Ae(re,nt,ne)):we.y,(0,C.q)(1),K?(0,ge.d)(be):(0,le.T)(()=>new p.K))}},4004:(Rt,ke,L)=>{L.d(ke,{U:()=>C});var p=L(4482),k=L(5403);function C(ge,le){return(0,p.e)((we,Y)=>{let Ae=0;we.subscribe((0,k.x)(Y,be=>{Y.next(ge.call(le,be,Ae++))}))})}},8189:(Rt,ke,L)=>{L.d(ke,{J:()=>C});var p=L(5577),k=L(4671);function C(ge=1/0){return(0,p.z)(k.y,ge)}},5577:(Rt,ke,L)=>{L.d(ke,{z:()=>Ae});var p=L(4004),k=L(8421),C=L(4482),ge=L(9672),le=L(5403),Y=L(576);function Ae(be,K,ne=1/0){return(0,Y.m)(K)?Ae((re,nt)=>(0,p.U)((et,Ve)=>K(re,et,nt,Ve))((0,k.Xf)(be(re,nt))),ne):("number"==typeof K&&(ne=K),(0,C.e)((re,nt)=>function we(be,K,ne,re,nt,et,Ve,Tt){const ze=[];let De=0,Dt=0,Et=!1;const ce=()=>{Et&&!ze.length&&!De&&K.complete()},Je=Be=>De<re?Qe(Be):ze.push(Be),Qe=Be=>{et&&K.next(Be),De++;let Ge=!1;(0,k.Xf)(ne(Be,Dt++)).subscribe((0,le.x)(K,X=>{nt?.(X),et?Je(X):K.next(X)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(De--;ze.length&&De<re;){const X=ze.shift();Ve?(0,ge.f)(K,Ve,()=>Qe(X)):Qe(X)}ce()}catch(X){K.error(X)}}))};return be.subscribe((0,le.x)(K,Je,()=>{Et=!0,ce()})),()=>{Tt?.()}}(re,nt,be,ne)))}},5363:(Rt,ke,L)=>{L.d(ke,{Q:()=>ge});var p=L(9672),k=L(4482),C=L(5403);function ge(le,we=0){return(0,k.e)((Y,Ae)=>{Y.subscribe((0,C.x)(Ae,be=>(0,p.f)(Ae,le,()=>Ae.next(be),we),()=>(0,p.f)(Ae,le,()=>Ae.complete(),we),be=>(0,p.f)(Ae,le,()=>Ae.error(be),we)))})}},5026:(Rt,ke,L)=>{L.d(ke,{R:()=>ge});var p=L(4482),k=L(5403);function C(le,we,Y,Ae,be){return(K,ne)=>{let re=Y,nt=we,et=0;K.subscribe((0,k.x)(ne,Ve=>{const Tt=et++;nt=re?le(nt,Ve,Tt):(re=!0,Ve),Ae&&ne.next(nt)},be&&(()=>{re&&ne.next(nt),ne.complete()})))}}function ge(le,we){return(0,p.e)(C(le,we,arguments.length>=2,!0))}},3099:(Rt,ke,L)=>{L.d(ke,{B:()=>le});var p=L(8421),k=L(7579),C=L(2961),ge=L(4482);function le(Y={}){const{connector:Ae=(()=>new k.x),resetOnError:be=!0,resetOnComplete:K=!0,resetOnRefCountZero:ne=!0}=Y;return re=>{let nt,et,Ve,Tt=0,ze=!1,De=!1;const Dt=()=>{et?.unsubscribe(),et=void 0},Et=()=>{Dt(),nt=Ve=void 0,ze=De=!1},ce=()=>{const Je=nt;Et(),Je?.unsubscribe()};return(0,ge.e)((Je,Qe)=>{Tt++,!De&&!ze&&Dt();const Be=Ve=Ve??Ae();Qe.add(()=>{Tt--,0===Tt&&!De&&!ze&&(et=we(ce,ne))}),Be.subscribe(Qe),!nt&&Tt>0&&(nt=new C.Hp({next:Ge=>Be.next(Ge),error:Ge=>{De=!0,Dt(),et=we(Et,be,Ge),Be.error(Ge)},complete:()=>{ze=!0,Dt(),et=we(Et,K),Be.complete()}}),(0,p.Xf)(Je).subscribe(nt))})(re)}}function we(Y,Ae,...be){if(!0===Ae)return void Y();if(!1===Ae)return;const K=new C.Hp({next:()=>{K.unsubscribe(),Y()}});return Ae(...be).subscribe(K)}},8675:(Rt,ke,L)=>{L.d(ke,{O:()=>ge});var p=L(7272),k=L(7669),C=L(4482);function ge(...le){const we=(0,k.yG)(le);return(0,C.e)((Y,Ae)=>{(we?(0,p.z)(le,Y,we):(0,p.z)(le,Y)).subscribe(Ae)})}},9468:(Rt,ke,L)=>{L.d(ke,{R:()=>k});var p=L(4482);function k(C,ge=0){return(0,p.e)((le,we)=>{we.add(C.schedule(()=>le.subscribe(we),ge))})}},3900:(Rt,ke,L)=>{L.d(ke,{w:()=>ge});var p=L(8421),k=L(4482),C=L(5403);function ge(le,we){return(0,k.e)((Y,Ae)=>{let be=null,K=0,ne=!1;const re=()=>ne&&!be&&Ae.complete();Y.subscribe((0,C.x)(Ae,nt=>{be?.unsubscribe();let et=0;const Ve=K++;(0,p.Xf)(le(nt,Ve)).subscribe(be=(0,C.x)(Ae,Tt=>Ae.next(we?we(nt,Tt,Ve,et++):Tt),()=>{be=null,re()}))},()=>{ne=!0,re()}))})}},5698:(Rt,ke,L)=>{L.d(ke,{q:()=>ge});var p=L(515),k=L(4482),C=L(5403);function ge(le){return le<=0?()=>p.E:(0,k.e)((we,Y)=>{let Ae=0;we.subscribe((0,C.x)(Y,be=>{++Ae<=le&&(Y.next(be),le<=Ae&&Y.complete())}))})}},8505:(Rt,ke,L)=>{L.d(ke,{b:()=>le});var p=L(576),k=L(4482),C=L(5403),ge=L(4671);function le(we,Y,Ae){const be=(0,p.m)(we)||Y||Ae?{next:we,error:Y,complete:Ae}:we;return be?(0,k.e)((K,ne)=>{var re;null===(re=be.subscribe)||void 0===re||re.call(be);let nt=!0;K.subscribe((0,C.x)(ne,et=>{var Ve;null===(Ve=be.next)||void 0===Ve||Ve.call(be,et),ne.next(et)},()=>{var et;nt=!1,null===(et=be.complete)||void 0===et||et.call(be),ne.complete()},et=>{var Ve;nt=!1,null===(Ve=be.error)||void 0===Ve||Ve.call(be,et),ne.error(et)},()=>{var et,Ve;nt&&(null===(et=be.unsubscribe)||void 0===et||et.call(be)),null===(Ve=be.finalize)||void 0===Ve||Ve.call(be)}))}):ge.y}},8068:(Rt,ke,L)=>{L.d(ke,{T:()=>ge});var p=L(6805),k=L(4482),C=L(5403);function ge(we=le){return(0,k.e)((Y,Ae)=>{let be=!1;Y.subscribe((0,C.x)(Ae,K=>{be=!0,Ae.next(K)},()=>be?Ae.complete():Ae.error(we())))})}function le(){return new p.K}},4408:(Rt,ke,L)=>{L.d(ke,{o:()=>le});var p=L(727);class k extends p.w0{constructor(Y,Ae){super()}schedule(Y,Ae=0){return this}}const C={setInterval(we,Y,...Ae){const{delegate:be}=C;return be?.setInterval?be.setInterval(we,Y,...Ae):setInterval(we,Y,...Ae)},clearInterval(we){const{delegate:Y}=C;return(Y?.clearInterval||clearInterval)(we)},delegate:void 0};var ge=L(8737);class le extends k{constructor(Y,Ae){super(Y,Ae),this.scheduler=Y,this.work=Ae,this.pending=!1}schedule(Y,Ae=0){if(this.closed)return this;this.state=Y;const be=this.id,K=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(K,be,Ae)),this.pending=!0,this.delay=Ae,this.id=this.id||this.requestAsyncId(K,this.id,Ae),this}requestAsyncId(Y,Ae,be=0){return C.setInterval(Y.flush.bind(Y,this),be)}recycleAsyncId(Y,Ae,be=0){if(null!=be&&this.delay===be&&!1===this.pending)return Ae;C.clearInterval(Ae)}execute(Y,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(Y,Ae);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Y,Ae){let K,be=!1;try{this.work(Y)}catch(ne){be=!0,K=ne||new Error("Scheduled action threw falsy error")}if(be)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:Y,scheduler:Ae}=this,{actions:be}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.P)(be,this),null!=Y&&(this.id=this.recycleAsyncId(Ae,Y,null)),this.delay=null,super.unsubscribe()}}}},7565:(Rt,ke,L)=>{L.d(ke,{v:()=>C});var p=L(6063);class k{constructor(le,we=k.now){this.schedulerActionCtor=le,this.now=we}schedule(le,we=0,Y){return new this.schedulerActionCtor(this,le).schedule(Y,we)}}k.now=p.l.now;class C extends k{constructor(le,we=k.now){super(le,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:we}=this;if(this._active)return void we.push(le);let Y;this._active=!0;do{if(Y=le.execute(le.state,le.delay))break}while(le=we.shift());if(this._active=!1,Y){for(;le=we.shift();)le.unsubscribe();throw Y}}}},4986:(Rt,ke,L)=>{L.d(ke,{z:()=>C});var p=L(4408);const C=new(L(7565).v)(p.o)},6063:(Rt,ke,L)=>{L.d(ke,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Rt,ke,L)=>{L.d(ke,{z:()=>p});const p={setTimeout(k,C,...ge){const{delegate:le}=p;return le?.setTimeout?le.setTimeout(k,C,...ge):setTimeout(k,C,...ge)},clearTimeout(k){const{delegate:C}=p;return(C?.clearTimeout||clearTimeout)(k)},delegate:void 0}},2202:(Rt,ke,L)=>{L.d(ke,{h:()=>k});const k=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Rt,ke,L)=>{L.d(ke,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Rt,ke,L)=>{L.d(ke,{K:()=>k});const k=(0,L(3888).d)(C=>function(){C(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Rt,ke,L)=>{L.d(ke,{_6:()=>we,jO:()=>ge,yG:()=>le});var p=L(576);function C(Y){return Y[Y.length-1]}function ge(Y){return(0,p.m)(C(Y))?Y.pop():void 0}function le(Y){return function k(Y){return Y&&(0,p.m)(Y.schedule)}(C(Y))?Y.pop():void 0}function we(Y,Ae){return"number"==typeof C(Y)?Y.pop():Ae}},4742:(Rt,ke,L)=>{L.d(ke,{D:()=>le});const{isArray:p}=Array,{getPrototypeOf:k,prototype:C,keys:ge}=Object;function le(Y){if(1===Y.length){const Ae=Y[0];if(p(Ae))return{args:Ae,keys:null};if(function we(Y){return Y&&"object"==typeof Y&&k(Y)===C}(Ae)){const be=ge(Ae);return{args:be.map(K=>Ae[K]),keys:be}}}return{args:Y,keys:null}}},8737:(Rt,ke,L)=>{function p(k,C){if(k){const ge=k.indexOf(C);0<=ge&&k.splice(ge,1)}}L.d(ke,{P:()=>p})},3888:(Rt,ke,L)=>{function p(k){const ge=k(le=>{Error.call(le),le.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}L.d(ke,{d:()=>p})},1810:(Rt,ke,L)=>{function p(k,C){return k.reduce((ge,le,we)=>(ge[le]=C[we],ge),{})}L.d(ke,{n:()=>p})},2806:(Rt,ke,L)=>{L.d(ke,{O:()=>ge,x:()=>C});var p=L(2416);let k=null;function C(le){if(p.v.useDeprecatedSynchronousErrorHandling){const we=!k;if(we&&(k={errorThrown:!1,error:null}),le(),we){const{errorThrown:Y,error:Ae}=k;if(k=null,Y)throw Ae}}else le()}function ge(le){p.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=le)}},9672:(Rt,ke,L)=>{function p(k,C,ge,le=0,we=!1){const Y=C.schedule(function(){ge(),we?k.add(this.schedule(null,le)):this.unsubscribe()},le);if(k.add(Y),!we)return Y}L.d(ke,{f:()=>p})},4671:(Rt,ke,L)=>{function p(k){return k}L.d(ke,{y:()=>p})},1144:(Rt,ke,L)=>{L.d(ke,{z:()=>p});const p=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(Rt,ke,L)=>{L.d(ke,{D:()=>k});var p=L(576);function k(C){return Symbol.asyncIterator&&(0,p.m)(C?.[Symbol.asyncIterator])}},576:(Rt,ke,L)=>{function p(k){return"function"==typeof k}L.d(ke,{m:()=>p})},3670:(Rt,ke,L)=>{L.d(ke,{c:()=>C});var p=L(8822),k=L(576);function C(ge){return(0,k.m)(ge[p.L])}},6495:(Rt,ke,L)=>{L.d(ke,{T:()=>C});var p=L(2202),k=L(576);function C(ge){return(0,k.m)(ge?.[p.h])}},8239:(Rt,ke,L)=>{L.d(ke,{t:()=>k});var p=L(576);function k(C){return(0,p.m)(C?.then)}},3260:(Rt,ke,L)=>{L.d(ke,{L:()=>ge,Q:()=>C});var p=L(655),k=L(576);function C(le){return(0,p.FC)(this,arguments,function*(){const Y=le.getReader();try{for(;;){const{value:Ae,done:be}=yield(0,p.qq)(Y.read());if(be)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Ae)}}finally{Y.releaseLock()}})}function ge(le){return(0,k.m)(le?.getReader)}},4482:(Rt,ke,L)=>{L.d(ke,{A:()=>k,e:()=>C});var p=L(576);function k(ge){return(0,p.m)(ge?.lift)}function C(ge){return le=>{if(k(le))return le.lift(function(we){try{return ge(we,this)}catch(Y){this.error(Y)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Rt,ke,L)=>{L.d(ke,{Z:()=>ge});var p=L(4004);const{isArray:k}=Array;function ge(le){return(0,p.U)(we=>function C(le,we){return k(we)?le(...we):le(we)}(le,we))}},9635:(Rt,ke,L)=>{L.d(ke,{U:()=>C,z:()=>k});var p=L(4671);function k(...ge){return C(ge)}function C(ge){return 0===ge.length?p.y:1===ge.length?ge[0]:function(we){return ge.reduce((Y,Ae)=>Ae(Y),we)}}},7849:(Rt,ke,L)=>{L.d(ke,{h:()=>C});var p=L(2416),k=L(3410);function C(ge){k.z.setTimeout(()=>{const{onUnhandledError:le}=p.v;if(!le)throw ge;le(ge)})}},4532:(Rt,ke,L)=>{function p(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(ke,{z:()=>p})},655:(Rt,ke,L)=>{function ge(ee,Ie){var he={};for(var Ne in ee)Object.prototype.hasOwnProperty.call(ee,Ne)&&Ie.indexOf(Ne)<0&&(he[Ne]=ee[Ne]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(Ne=Object.getOwnPropertySymbols(ee);lt<Ne.length;lt++)Ie.indexOf(Ne[lt])<0&&Object.prototype.propertyIsEnumerable.call(ee,Ne[lt])&&(he[Ne[lt]]=ee[Ne[lt]])}return he}function Ae(ee,Ie,he,Ne){return new(he||(he=Promise))(function(pt,_t){function Pe(at){try{Se(Ne.next(at))}catch(Vt){_t(Vt)}}function dt(at){try{Se(Ne.throw(at))}catch(Vt){_t(Vt)}}function Se(at){at.done?pt(at.value):function lt(pt){return pt instanceof he?pt:new he(function(_t){_t(pt)})}(at.value).then(Pe,dt)}Se((Ne=Ne.apply(ee,Ie||[])).next())})}function ze(ee){return this instanceof ze?(this.v=ee,this):new ze(ee)}function De(ee,Ie,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,Ne=he.apply(ee,Ie||[]),pt=[];return lt={},_t("next"),_t("throw"),_t("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function _t(Ht){Ne[Ht]&&(lt[Ht]=function(Nt){return new Promise(function(yn,tn){pt.push([Ht,Nt,yn,tn])>1||Pe(Ht,Nt)})})}function Pe(Ht,Nt){try{!function dt(Ht){Ht.value instanceof ze?Promise.resolve(Ht.value.v).then(Se,at):Vt(pt[0][2],Ht)}(Ne[Ht](Nt))}catch(yn){Vt(pt[0][3],yn)}}function Se(Ht){Pe("next",Ht)}function at(Ht){Pe("throw",Ht)}function Vt(Ht,Nt){Ht(Nt),pt.shift(),pt.length&&Pe(pt[0][0],pt[0][1])}}function Et(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,Ie=ee[Symbol.asyncIterator];return Ie?Ie.call(ee):(ee=function re(ee){var Ie="function"==typeof Symbol&&Symbol.iterator,he=Ie&&ee[Ie],Ne=0;if(he)return he.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&Ne>=ee.length&&(ee=void 0),{value:ee&&ee[Ne++],done:!ee}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),he={},Ne("next"),Ne("throw"),Ne("return"),he[Symbol.asyncIterator]=function(){return this},he);function Ne(pt){he[pt]=ee[pt]&&function(_t){return new Promise(function(Pe,dt){!function lt(pt,_t,Pe,dt){Promise.resolve(dt).then(function(Se){pt({value:Se,done:Pe})},_t)}(Pe,dt,(_t=ee[pt](_t)).done,_t.value)})}}}L.d(ke,{FC:()=>De,KL:()=>Et,_T:()=>ge,mG:()=>Ae,qq:()=>ze})},6895:(Rt,ke,L)=>{L.d(ke,{Do:()=>Et,EM:()=>gi,HT:()=>le,JF:()=>Ji,K0:()=>Y,Mx:()=>Ii,O5:()=>Er,PM:()=>ai,S$:()=>ze,V_:()=>K,Ye:()=>ce,b0:()=>Dt,bD:()=>fi,ez:()=>Qi,gd:()=>Fn,q:()=>C,sg:()=>xi,w_:()=>we});var p=L(4650);let k=null;function C(){return k}function le(T){k||(k=T)}class we{}const Y=new p.OlP("DocumentToken");let Ae=(()=>{class T{historyGo(x){throw new Error("Not implemented")}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275prov=p.Yz7({token:T,factory:function(){return function be(){return(0,p.LFG)(ne)}()},providedIn:"platform"}),T})();const K=new p.OlP("Location Initialized");let ne=(()=>{class T extends Ae{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return C().getBaseHref(this._doc)}onPopState(x){const G=C().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",x,!1),()=>G.removeEventListener("popstate",x)}onHashChange(x){const G=C().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",x,!1),()=>G.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,G,pe){re()?this._history.pushState(x,G,pe):this.location.hash=pe}replaceState(x,G,pe){re()?this._history.replaceState(x,G,pe):this.location.hash=pe}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return T.\u0275fac=function(x){return new(x||T)(p.LFG(Y))},T.\u0275prov=p.Yz7({token:T,factory:function(){return function nt(){return new ne((0,p.LFG)(Y))}()},providedIn:"platform"}),T})();function re(){return!!window.history.pushState}function et(T,B){if(0==T.length)return B;if(0==B.length)return T;let x=0;return T.endsWith("/")&&x++,B.startsWith("/")&&x++,2==x?T+B.substring(1):1==x?T+B:T+"/"+B}function Ve(T){const B=T.match(/#|\?|$/),x=B&&B.index||T.length;return T.slice(0,x-("/"===T[x-1]?1:0))+T.slice(x)}function Tt(T){return T&&"?"!==T[0]?"?"+T:T}let ze=(()=>{class T{historyGo(x){throw new Error("Not implemented")}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275prov=p.Yz7({token:T,factory:function(){return(0,p.f3M)(Dt)},providedIn:"root"}),T})();const De=new p.OlP("appBaseHref");let Dt=(()=>{class T extends ze{constructor(x,G){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(Y).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return et(this._baseHref,x)}path(x=!1){const G=this._platformLocation.pathname+Tt(this._platformLocation.search),pe=this._platformLocation.hash;return pe&&x?`${G}${pe}`:G}pushState(x,G,pe,He){const rt=this.prepareExternalUrl(pe+Tt(He));this._platformLocation.pushState(x,G,rt)}replaceState(x,G,pe,He){const rt=this.prepareExternalUrl(pe+Tt(He));this._platformLocation.replaceState(x,G,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return T.\u0275fac=function(x){return new(x||T)(p.LFG(Ae),p.LFG(De,8))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Et=(()=>{class T extends ze{constructor(x,G){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(x){const G=et(this._baseHref,x);return G.length>0?"#"+G:G}pushState(x,G,pe,He){let rt=this.prepareExternalUrl(pe+Tt(He));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(x,G,rt)}replaceState(x,G,pe,He){let rt=this.prepareExternalUrl(pe+Tt(He));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(x,G,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return T.\u0275fac=function(x){return new(x||T)(p.LFG(Ae),p.LFG(De,8))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac}),T})(),ce=(()=>{class T{constructor(x){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const G=this._locationStrategy.getBaseHref();this._baseHref=Ve(Be(G)),this._locationStrategy.onPopState(pe=>{this._subject.emit({url:this.path(!0),pop:!0,state:pe.state,type:pe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,G=""){return this.path()==this.normalize(x+Tt(G))}normalize(x){return T.stripTrailingSlash(function Qe(T,B){return T&&B.startsWith(T)?B.substring(T.length):B}(this._baseHref,Be(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,G="",pe=null){this._locationStrategy.pushState(pe,"",x,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Tt(G)),pe)}replaceState(x,G="",pe=null){this._locationStrategy.replaceState(pe,"",x,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Tt(G)),pe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",G){this._urlChangeListeners.forEach(pe=>pe(x,G))}subscribe(x,G,pe){return this._subject.subscribe({next:x,error:G,complete:pe})}}return T.normalizeQueryParams=Tt,T.joinWithSlash=et,T.stripTrailingSlash=Ve,T.\u0275fac=function(x){return new(x||T)(p.LFG(ze))},T.\u0275prov=p.Yz7({token:T,factory:function(){return function Je(){return new ce((0,p.LFG)(ze))}()},providedIn:"root"}),T})();function Be(T){return T.replace(/\/index.html$/,"")}function Ii(T,B){B=encodeURIComponent(B);for(const x of T.split(";")){const G=x.indexOf("="),[pe,He]=-1==G?[x,""]:[x.slice(0,G),x.slice(G+1)];if(pe.trim()===B)return decodeURIComponent(He)}return null}class os{constructor(B,x,G,pe){this.$implicit=B,this.ngForOf=x,this.index=G,this.count=pe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xi=(()=>{class T{constructor(x,G,pe){this._viewContainer=x,this._template=G,this._differs=pe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const G=this._viewContainer;x.forEachOperation((pe,He,rt)=>{if(null==pe.previousIndex)G.createEmbeddedView(this._template,new os(pe.item,this._ngForOf,-1,-1),null===rt?void 0:rt);else if(null==rt)G.remove(null===He?void 0:He);else if(null!==He){const Wt=G.get(He);G.move(Wt,rt),ni(Wt,pe)}});for(let pe=0,He=G.length;pe<He;pe++){const Wt=G.get(pe).context;Wt.index=pe,Wt.count=He,Wt.ngForOf=this._ngForOf}x.forEachIdentityChange(pe=>{ni(G.get(pe.currentIndex),pe)})}static ngTemplateContextGuard(x,G){return!0}}return T.\u0275fac=function(x){return new(x||T)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},T.\u0275dir=p.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),T})();function ni(T,B){T.context.$implicit=B.item}let Er=(()=>{class T{constructor(x,G){this._viewContainer=x,this._context=new Ri,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){wr("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){wr("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,G){return!0}}return T.\u0275fac=function(x){return new(x||T)(p.Y36(p.s_b),p.Y36(p.Rgc))},T.\u0275dir=p.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),T})();class Ri{constructor(){this.$implicit=null,this.ngIf=null}}function wr(T,B){if(B&&!B.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,p.AaK)(B)}'.`)}let Fn=(()=>{class T{transform(x){if(null==x)return null;if("string"!=typeof x)throw function Lr(T,B){return new p.vHH(2100,!1)}();return x.toUpperCase()}}return T.\u0275fac=function(x){return new(x||T)},T.\u0275pipe=p.Yjl({name:"uppercase",type:T,pure:!0,standalone:!0}),T})(),Qi=(()=>{class T{}return T.\u0275fac=function(x){return new(x||T)},T.\u0275mod=p.oAB({type:T}),T.\u0275inj=p.cJS({}),T})();const fi="browser";function ai(T){return"server"===T}let gi=(()=>{class T{}return T.\u0275prov=(0,p.Yz7)({token:T,providedIn:"root",factory:()=>new Js((0,p.LFG)(Y),window)}),T})();class Js{constructor(B,x){this.document=B,this.window=x,this.offset=()=>[0,0]}setOffset(B){this.offset=Array.isArray(B)?()=>B:B}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(B){this.supportsScrolling()&&this.window.scrollTo(B[0],B[1])}scrollToAnchor(B){if(!this.supportsScrolling())return;const x=function Vr(T,B){const x=T.getElementById(B)||T.getElementsByName(B)[0];if(x)return x;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const G=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let pe=G.currentNode;for(;pe;){const He=pe.shadowRoot;if(He){const rt=He.getElementById(B)||He.querySelector(`[name="${B}"]`);if(rt)return rt}pe=G.nextNode()}}return null}(this.document,B);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(B){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=B)}}scrollToElement(B){const x=B.getBoundingClientRect(),G=x.left+this.window.pageXOffset,pe=x.top+this.window.pageYOffset,He=this.offset();this.window.scrollTo(G-He[0],pe-He[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const B=ui(this.window.history)||ui(Object.getPrototypeOf(this.window.history));return!(!B||!B.writable&&!B.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ui(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class Ji{}},529:(Rt,ke,L)=>{L.d(ke,{JF:()=>_r,eN:()=>pt});var p=L(6895),k=L(4650),C=L(9646),ge=L(9751),le=L(4351),we=L(9300),Y=L(4004);class Ae{}class be{}class K{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(ae=>{const $e=ae.indexOf(":");if($e>0){const it=ae.slice(0,$e),Ft=it.toLowerCase(),Xt=ae.slice($e+1).trim();this.maybeSetNormalizedName(it,Ft),this.headers.has(Ft)?this.headers.get(Ft).push(Xt):this.headers.set(Ft,[Xt])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(ae=>{let $e=ye[ae];const it=ae.toLowerCase();"string"==typeof $e&&($e=[$e]),$e.length>0&&(this.headers.set(it,$e),this.maybeSetNormalizedName(ae,it))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const ae=this.headers.get(ye.toLowerCase());return ae&&ae.length>0?ae[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,ae){return this.clone({name:ye,value:ae,op:"a"})}set(ye,ae){return this.clone({name:ye,value:ae,op:"s"})}delete(ye,ae){return this.clone({name:ye,value:ae,op:"d"})}maybeSetNormalizedName(ye,ae){this.normalizedNames.has(ae)||this.normalizedNames.set(ae,ye)}init(){this.lazyInit&&(this.lazyInit instanceof K?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(ae=>{this.headers.set(ae,ye.headers.get(ae)),this.normalizedNames.set(ae,ye.normalizedNames.get(ae))})}clone(ye){const ae=new K;return ae.lazyInit=this.lazyInit&&this.lazyInit instanceof K?this.lazyInit:this,ae.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),ae}applyUpdate(ye){const ae=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let $e=ye.value;if("string"==typeof $e&&($e=[$e]),0===$e.length)return;this.maybeSetNormalizedName(ye.name,ae);const it=("a"===ye.op?this.headers.get(ae):void 0)||[];it.push(...$e),this.headers.set(ae,it);break;case"d":const Ft=ye.value;if(Ft){let Xt=this.headers.get(ae);if(!Xt)return;Xt=Xt.filter(An=>-1===Ft.indexOf(An)),0===Xt.length?(this.headers.delete(ae),this.normalizedNames.delete(ae)):this.headers.set(ae,Xt)}else this.headers.delete(ae),this.normalizedNames.delete(ae)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(ae=>ye(this.normalizedNames.get(ae),this.headers.get(ae)))}}class re{encodeKey(ye){return Tt(ye)}encodeValue(ye){return Tt(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const et=/%(\d[a-f0-9])/gi,Ve={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Tt(Ze){return encodeURIComponent(Ze).replace(et,(ye,ae)=>Ve[ae]??ye)}function ze(Ze){return`${Ze}`}class De{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new re,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nt(Ze,ye){const ae=new Map;return Ze.length>0&&Ze.replace(/^\?/,"").split("&").forEach(it=>{const Ft=it.indexOf("="),[Xt,An]=-1==Ft?[ye.decodeKey(it),""]:[ye.decodeKey(it.slice(0,Ft)),ye.decodeValue(it.slice(Ft+1))],At=ae.get(Xt)||[];At.push(An),ae.set(Xt,At)}),ae}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(ae=>{const $e=ye.fromObject[ae],it=Array.isArray($e)?$e.map(ze):[ze($e)];this.map.set(ae,it)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const ae=this.map.get(ye);return ae?ae[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,ae){return this.clone({param:ye,value:ae,op:"a"})}appendAll(ye){const ae=[];return Object.keys(ye).forEach($e=>{const it=ye[$e];Array.isArray(it)?it.forEach(Ft=>{ae.push({param:$e,value:Ft,op:"a"})}):ae.push({param:$e,value:it,op:"a"})}),this.clone(ae)}set(ye,ae){return this.clone({param:ye,value:ae,op:"s"})}delete(ye,ae){return this.clone({param:ye,value:ae,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const ae=this.encoder.encodeKey(ye);return this.map.get(ye).map($e=>ae+"="+this.encoder.encodeValue($e)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const ae=new De({encoder:this.encoder});return ae.cloneFrom=this.cloneFrom||this,ae.updates=(this.updates||[]).concat(ye),ae}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const ae=("a"===ye.op?this.map.get(ye.param):void 0)||[];ae.push(ze(ye.value)),this.map.set(ye.param,ae);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let $e=this.map.get(ye.param)||[];const it=$e.indexOf(ze(ye.value));-1!==it&&$e.splice(it,1),$e.length>0?this.map.set(ye.param,$e):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class Et{constructor(){this.map=new Map}set(ye,ae){return this.map.set(ye,ae),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function Je(Ze){return typeof ArrayBuffer<"u"&&Ze instanceof ArrayBuffer}function Qe(Ze){return typeof Blob<"u"&&Ze instanceof Blob}function Be(Ze){return typeof FormData<"u"&&Ze instanceof FormData}class X{constructor(ye,ae,$e,it){let Ft;if(this.url=ae,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function ce(Ze){switch(Ze){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||it?(this.body=void 0!==$e?$e:null,Ft=it):Ft=$e,Ft&&(this.reportProgress=!!Ft.reportProgress,this.withCredentials=!!Ft.withCredentials,Ft.responseType&&(this.responseType=Ft.responseType),Ft.headers&&(this.headers=Ft.headers),Ft.context&&(this.context=Ft.context),Ft.params&&(this.params=Ft.params)),this.headers||(this.headers=new K),this.context||(this.context=new Et),this.params){const Xt=this.params.toString();if(0===Xt.length)this.urlWithParams=ae;else{const An=ae.indexOf("?");this.urlWithParams=ae+(-1===An?"?":An<ae.length-1?"&":"")+Xt}}else this.params=new De,this.urlWithParams=ae}serializeBody(){return null===this.body?null:Je(this.body)||Qe(this.body)||Be(this.body)||function Ge(Ze){return typeof URLSearchParams<"u"&&Ze instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof De?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Be(this.body)?null:Qe(this.body)?this.body.type||null:Je(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof De?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const ae=ye.method||this.method,$e=ye.url||this.url,it=ye.responseType||this.responseType,Ft=void 0!==ye.body?ye.body:this.body,Xt=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,An=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let At=ye.headers||this.headers,Zn=ye.params||this.params;const vn=ye.context??this.context;return void 0!==ye.setHeaders&&(At=Object.keys(ye.setHeaders).reduce((Tr,nn)=>Tr.set(nn,ye.setHeaders[nn]),At)),ye.setParams&&(Zn=Object.keys(ye.setParams).reduce((Tr,nn)=>Tr.set(nn,ye.setParams[nn]),Zn)),new X(ae,$e,Ft,{params:Zn,headers:At,context:vn,reportProgress:An,responseType:it,withCredentials:Xt})}}var Me=(()=>((Me=Me||{})[Me.Sent=0]="Sent",Me[Me.UploadProgress=1]="UploadProgress",Me[Me.ResponseHeader=2]="ResponseHeader",Me[Me.DownloadProgress=3]="DownloadProgress",Me[Me.Response=4]="Response",Me[Me.User=5]="User",Me))();class ee{constructor(ye,ae=200,$e="OK"){this.headers=ye.headers||new K,this.status=void 0!==ye.status?ye.status:ae,this.statusText=ye.statusText||$e,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class Ie extends ee{constructor(ye={}){super(ye),this.type=Me.ResponseHeader}clone(ye={}){return new Ie({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class he extends ee{constructor(ye={}){super(ye),this.type=Me.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new he({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class Ne extends ee{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}function lt(Ze,ye){return{body:ye,headers:Ze.headers,context:Ze.context,observe:Ze.observe,params:Ze.params,reportProgress:Ze.reportProgress,responseType:Ze.responseType,withCredentials:Ze.withCredentials}}let pt=(()=>{class Ze{constructor(ae){this.handler=ae}request(ae,$e,it={}){let Ft;if(ae instanceof X)Ft=ae;else{let At,Zn;At=it.headers instanceof K?it.headers:new K(it.headers),it.params&&(Zn=it.params instanceof De?it.params:new De({fromObject:it.params})),Ft=new X(ae,$e,void 0!==it.body?it.body:null,{headers:At,context:it.context,params:Zn,reportProgress:it.reportProgress,responseType:it.responseType||"json",withCredentials:it.withCredentials})}const Xt=(0,C.of)(Ft).pipe((0,le.b)(At=>this.handler.handle(At)));if(ae instanceof X||"events"===it.observe)return Xt;const An=Xt.pipe((0,we.h)(At=>At instanceof he));switch(it.observe||"body"){case"body":switch(Ft.responseType){case"arraybuffer":return An.pipe((0,Y.U)(At=>{if(null!==At.body&&!(At.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return At.body}));case"blob":return An.pipe((0,Y.U)(At=>{if(null!==At.body&&!(At.body instanceof Blob))throw new Error("Response is not a Blob.");return At.body}));case"text":return An.pipe((0,Y.U)(At=>{if(null!==At.body&&"string"!=typeof At.body)throw new Error("Response is not a string.");return At.body}));default:return An.pipe((0,Y.U)(At=>At.body))}case"response":return An;default:throw new Error(`Unreachable: unhandled observe type ${it.observe}}`)}}delete(ae,$e={}){return this.request("DELETE",ae,$e)}get(ae,$e={}){return this.request("GET",ae,$e)}head(ae,$e={}){return this.request("HEAD",ae,$e)}jsonp(ae,$e){return this.request("JSONP",ae,{params:(new De).append($e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ae,$e={}){return this.request("OPTIONS",ae,$e)}patch(ae,$e,it={}){return this.request("PATCH",ae,lt(it,$e))}post(ae,$e,it={}){return this.request("POST",ae,lt(it,$e))}put(ae,$e,it={}){return this.request("PUT",ae,lt(it,$e))}}return Ze.\u0275fac=function(ae){return new(ae||Ze)(k.LFG(Ae))},Ze.\u0275prov=k.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();class _t{constructor(ye,ae){this.next=ye,this.interceptor=ae}handle(ye){return this.interceptor.intercept(ye,this.next)}}const Pe=new k.OlP("HTTP_INTERCEPTORS");let dt=(()=>{class Ze{intercept(ae,$e){return $e.handle(ae)}}return Ze.\u0275fac=function(ae){return new(ae||Ze)},Ze.\u0275prov=k.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();const rr=/^\)\]\}',?\n/;let In=(()=>{class Ze{constructor(ae){this.xhrFactory=ae}handle(ae){if("JSONP"===ae.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ge.y($e=>{const it=this.xhrFactory.build();if(it.open(ae.method,ae.urlWithParams),ae.withCredentials&&(it.withCredentials=!0),ae.headers.forEach((me,Q)=>it.setRequestHeader(me,Q.join(","))),ae.headers.has("Accept")||it.setRequestHeader("Accept","application/json, text/plain, */*"),!ae.headers.has("Content-Type")){const me=ae.detectContentTypeHeader();null!==me&&it.setRequestHeader("Content-Type",me)}if(ae.responseType){const me=ae.responseType.toLowerCase();it.responseType="json"!==me?me:"text"}const Ft=ae.serializeBody();let Xt=null;const An=()=>{if(null!==Xt)return Xt;const me=it.statusText||"OK",Q=new K(it.getAllResponseHeaders()),ue=function tr(Ze){return"responseURL"in Ze&&Ze.responseURL?Ze.responseURL:/^X-Request-URL:/m.test(Ze.getAllResponseHeaders())?Ze.getResponseHeader("X-Request-URL"):null}(it)||ae.url;return Xt=new Ie({headers:Q,status:it.status,statusText:me,url:ue}),Xt},At=()=>{let{headers:me,status:Q,statusText:ue,url:Ee}=An(),fe=null;204!==Q&&(fe=typeof it.response>"u"?it.responseText:it.response),0===Q&&(Q=fe?200:0);let ot=Q>=200&&Q<300;if("json"===ae.responseType&&"string"==typeof fe){const Ct=fe;fe=fe.replace(rr,"");try{fe=""!==fe?JSON.parse(fe):null}catch(Bt){fe=Ct,ot&&(ot=!1,fe={error:Bt,text:fe})}}ot?($e.next(new he({body:fe,headers:me,status:Q,statusText:ue,url:Ee||void 0})),$e.complete()):$e.error(new Ne({error:fe,headers:me,status:Q,statusText:ue,url:Ee||void 0}))},Zn=me=>{const{url:Q}=An(),ue=new Ne({error:me,status:it.status||0,statusText:it.statusText||"Unknown Error",url:Q||void 0});$e.error(ue)};let vn=!1;const Tr=me=>{vn||($e.next(An()),vn=!0);let Q={type:Me.DownloadProgress,loaded:me.loaded};me.lengthComputable&&(Q.total=me.total),"text"===ae.responseType&&!!it.responseText&&(Q.partialText=it.responseText),$e.next(Q)},nn=me=>{let Q={type:Me.UploadProgress,loaded:me.loaded};me.lengthComputable&&(Q.total=me.total),$e.next(Q)};return it.addEventListener("load",At),it.addEventListener("error",Zn),it.addEventListener("timeout",Zn),it.addEventListener("abort",Zn),ae.reportProgress&&(it.addEventListener("progress",Tr),null!==Ft&&it.upload&&it.upload.addEventListener("progress",nn)),it.send(Ft),$e.next({type:Me.Sent}),()=>{it.removeEventListener("error",Zn),it.removeEventListener("abort",Zn),it.removeEventListener("load",At),it.removeEventListener("timeout",Zn),ae.reportProgress&&(it.removeEventListener("progress",Tr),null!==Ft&&it.upload&&it.upload.removeEventListener("progress",nn)),it.readyState!==it.DONE&&it.abort()}})}}return Ze.\u0275fac=function(ae){return new(ae||Ze)(k.LFG(p.JF))},Ze.\u0275prov=k.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();const br=new k.OlP("XSRF_COOKIE_NAME"),zt=new k.OlP("XSRF_HEADER_NAME");class Hn{}let or=(()=>{class Ze{constructor(ae,$e,it){this.doc=ae,this.platform=$e,this.cookieName=it,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ae=this.doc.cookie||"";return ae!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,p.Mx)(ae,this.cookieName),this.lastCookieString=ae),this.lastToken}}return Ze.\u0275fac=function(ae){return new(ae||Ze)(k.LFG(p.K0),k.LFG(k.Lbi),k.LFG(br))},Ze.\u0275prov=k.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),zn=(()=>{class Ze{constructor(ae,$e){this.tokenService=ae,this.headerName=$e}intercept(ae,$e){const it=ae.url.toLowerCase();if("GET"===ae.method||"HEAD"===ae.method||it.startsWith("http://")||it.startsWith("https://"))return $e.handle(ae);const Ft=this.tokenService.getToken();return null!==Ft&&!ae.headers.has(this.headerName)&&(ae=ae.clone({headers:ae.headers.set(this.headerName,Ft)})),$e.handle(ae)}}return Ze.\u0275fac=function(ae){return new(ae||Ze)(k.LFG(Hn),k.LFG(zt))},Ze.\u0275prov=k.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),mt=(()=>{class Ze{constructor(ae,$e){this.backend=ae,this.injector=$e,this.chain=null}handle(ae){if(null===this.chain){const $e=this.injector.get(Pe,[]);this.chain=$e.reduceRight((it,Ft)=>new _t(it,Ft),this.backend)}return this.chain.handle(ae)}}return Ze.\u0275fac=function(ae){return new(ae||Ze)(k.LFG(be),k.LFG(k.zs3))},Ze.\u0275prov=k.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),Gn=(()=>{class Ze{static disable(){return{ngModule:Ze,providers:[{provide:zn,useClass:dt}]}}static withOptions(ae={}){return{ngModule:Ze,providers:[ae.cookieName?{provide:br,useValue:ae.cookieName}:[],ae.headerName?{provide:zt,useValue:ae.headerName}:[]]}}}return Ze.\u0275fac=function(ae){return new(ae||Ze)},Ze.\u0275mod=k.oAB({type:Ze}),Ze.\u0275inj=k.cJS({providers:[zn,{provide:Pe,useExisting:zn,multi:!0},{provide:Hn,useClass:or},{provide:br,useValue:"XSRF-TOKEN"},{provide:zt,useValue:"X-XSRF-TOKEN"}]}),Ze})(),_r=(()=>{class Ze{}return Ze.\u0275fac=function(ae){return new(ae||Ze)},Ze.\u0275mod=k.oAB({type:Ze}),Ze.\u0275inj=k.cJS({providers:[pt,{provide:Ae,useClass:mt},In,{provide:be,useExisting:In}],imports:[Gn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Ze})()},4650:(Rt,ke,L)=>{L.d(ke,{$8M:()=>an,$Z:()=>Em,AFp:()=>yE,ALo:()=>V0,AaK:()=>Ae,CHM:()=>Os,CRH:()=>q0,CZH:()=>Py,CqO:()=>ig,D6c:()=>SD,EJc:()=>HI,EpF:()=>mf,F4k:()=>yl,FYo:()=>Mt,FiY:()=>Pt,G48:()=>cD,GfV:()=>Xr,Gpc:()=>ne,JOm:()=>nu,KtG:()=>Zs,LFG:()=>Br,LSH:()=>nd,Lbi:()=>BI,Lck:()=>Ow,MMx:()=>l_,NdJ:()=>vf,OlP:()=>mr,Oqu:()=>hy,PXZ:()=>iD,Q6J:()=>tg,QGY:()=>yf,QP$:()=>kr,Qsj:()=>Qt,R0b:()=>hu,RDi:()=>Nf,Rgc:()=>xg,SBq:()=>W,Sil:()=>zI,Suo:()=>W0,TTD:()=>oi,TgZ:()=>ml,X6Q:()=>lD,XFs:()=>mt,Xpm:()=>Ee,Xts:()=>Al,Y36:()=>hl,YKP:()=>C0,YNc:()=>eg,Yjl:()=>pn,Yz7:()=>Nt,Z0I:()=>Kr,ZZ4:()=>P_,_Bn:()=>D0,_UZ:()=>Vd,_Vd:()=>f,_c5:()=>TD,_uU:()=>Zv,aQg:()=>k_,c2e:()=>jI,cJS:()=>tn,cg1:()=>Ig,dDg:()=>eD,dqk:()=>it,eFA:()=>xE,ekj:()=>uu,eoX:()=>AE,f3M:()=>M,g9A:()=>_E,h0i:()=>Sf,hGG:()=>AD,hij:()=>Hd,iGM:()=>Z0,ifc:()=>$e,ip1:()=>mE,jDz:()=>T0,kL8:()=>Dg,kYT:()=>$n,lG2:()=>Wn,lcZ:()=>U0,lqb:()=>Mu,lri:()=>bE,n5z:()=>Jt,oAB:()=>Bt,oxw:()=>og,q4F:()=>zo,qLn:()=>cd,qOj:()=>uf,qZA:()=>Ld,rWj:()=>TE,s9C:()=>ju,sBO:()=>dD,sIi:()=>Nc,s_b:()=>Ry,soG:()=>ky,tb:()=>EE,tp0:()=>En,uIk:()=>qm,vHH:()=>Ve,vpe:()=>_l,wAp:()=>Cn,xi3:()=>B0,xp6:()=>fp,z2F:()=>Fy,zSh:()=>id,zs3:()=>ku});var p=L(7579),k=L(727),C=L(9751),ge=L(6451),le=L(3099);function we(n){for(let r in n)if(n[r]===we)return r;throw Error("Could not find renamed property on target object.")}function Y(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function be(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const K=we({__forward_ref__:we});function ne(n){return n.__forward_ref__=ne,n.toString=function(){return Ae(this())},n}function re(n){return nt(n)?n():n}function nt(n){return"function"==typeof n&&n.hasOwnProperty(K)&&n.__forward_ref__===ne}class Ve extends Error{constructor(r,s){super(function Tt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function ze(n){return"string"==typeof n?n:null==n?"":String(n)}function Je(n,r){throw new Ve(-201,!1)}function dt(n,r){null==n&&function Se(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Nt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Tn(n){return rr(n,zt)||rr(n,or)}function Kr(n){return null!==Tn(n)}function rr(n,r){return n.hasOwnProperty(r)?n[r]:null}function br(n){return n&&(n.hasOwnProperty(Hn)||n.hasOwnProperty(zn))?n[Hn]:null}const zt=we({\u0275prov:we}),Hn=we({\u0275inj:we}),or=we({ngInjectableDef:we}),zn=we({ngInjectorDef:we});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Un;function Gn(n){const r=Un;return Un=n,r}function _r(n,r,s){const a=Tn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&mt.Optional?null:void 0!==r?r:void Je(Ae(n))}function fr(n){return{toString:n}.toString()}var Ze=(()=>((Ze=Ze||{})[Ze.OnPush=0]="OnPush",Ze[Ze.Default=1]="Default",Ze))(),$e=(()=>{return(n=$e||($e={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",$e;var n})();const it=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),An={},At=[],Zn=we({\u0275cmp:we}),vn=we({\u0275dir:we}),Tr=we({\u0275pipe:we}),nn=we({\u0275mod:we}),me=we({\u0275fac:we}),Q=we({__NG_ELEMENT_ID__:we});let ue=0;function Ee(n){return fr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ze.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||At,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||$e.Emulated,id:"c"+ue++,styles:n.styles||At,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,v=n.features;return l.inputs=_n(n.inputs,a),l.outputs=_n(n.outputs),v&&v.forEach(I=>I(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(ot).filter(Ct):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(ar).filter(Ct):null,l})}function ot(n){return dn(n)||Qn(n)}function Ct(n){return null!==n}function Bt(n){return fr(()=>({type:n.type,bootstrap:n.bootstrap||At,declarations:n.declarations||At,imports:n.imports||At,exports:n.exports||At,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $n(n,r){return fr(()=>{const s=Fr(n,!0);s.declarations=r.declarations||At,s.imports=r.imports||At,s.exports=r.exports||At})}function _n(n,r){if(null==n)return An;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const Wn=Ee;function pn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function dn(n){return n[Zn]||null}function Qn(n){return n[vn]||null}function ar(n){return n[Tr]||null}function kr(n){const r=dn(n)||Qn(n)||ar(n);return null!==r&&r.standalone}function Fr(n,r){const s=n[nn]||null;if(!s&&!0===r)throw new Error(`Type ${Ae(n)} does not have '\u0275mod' property.`);return s}function wr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zr(n){return Array.isArray(n)&&!0===n[1]}function js(n){return 0!=(8&n.flags)}function Qr(n){return 2==(2&n.flags)}function Oo(n){return 1==(1&n.flags)}function Ir(n){return null!==n.template}function ji(n){return 0!=(256&n[2])}function Di(n,r){return n.hasOwnProperty(me)?n[me]:null}class Ci{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function oi(){return Yi}function Yi(n){return n.type.prototype.ngOnChanges&&(n.setInput=vs),Qs}function Qs(){const n=Po(this),r=n?.current;if(r){const s=n.previous;if(s===An)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function vs(n,r,s,a){const l=Po(n)||function Qi(n,r){return n[_s]=r}(n,{previous:An,current:null}),h=l.current||(l.current={}),v=l.previous,I=this.declaredInputs[s],S=v[I];h[I]=new Ci(S&&S.currentValue,r,v===An),n[a]=r}oi.ngInherit=!0;const _s="__ngSimpleChanges__";function Po(n){return n[_s]||null}function ir(n){for(;Array.isArray(n);)n=n[0];return n}function ui(n,r){return ir(r[n])}function Vr(n,r){return ir(r[n.index])}function Ji(n,r){return n.data[r]}function bi(n,r){return n[r]}function On(n,r){const s=r[n];return wr(s)?s:s[0]}function Es(n){return 64==(64&n[2])}function $i(n,r){return null==r?null:n[r]}function ko(n){n[18]=0}function Nr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const rn={lFrame:Yo(null),bindingsEnabled:!0};function es(){return rn.bindingsEnabled}function gt(){return rn.lFrame.lView}function Sn(){return rn.lFrame.tView}function Os(n){return rn.lFrame.contextLView=n,n[8]}function Zs(n){return rn.lFrame.contextLView=null,n}function Dr(){let n=ws();for(;null!==n&&64===n.type;)n=n.parent;return n}function ws(){return rn.lFrame.currentTNode}function mi(n,r){const s=rn.lFrame;s.currentTNode=n,s.isParent=r}function yo(){return rn.lFrame.isParent}function A(){const n=rn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function kt(){return rn.lFrame.bindingIndex++}function us(n,r){const s=rn.lFrame;s.bindingIndex=s.bindingRootIndex=n,no(r)}function no(n){rn.lFrame.currentDirectiveIndex=n}function pa(){return rn.lFrame.currentQueryIndex}function Fo(n){rn.lFrame.currentQueryIndex=n}function Lo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Ko(n,r,s){if(s&mt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&mt.Host||(l=Lo(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=rn.lFrame=ga();return a.currentTNode=r,a.lView=n,!0}function ls(n){const r=ga(),s=n[1];rn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ga(){const n=rn.lFrame,r=null===n?null:n.child;return null===r?Yo(n):r}function Yo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Qo(){const n=rn.lFrame;return rn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const T=Qo;function B(){const n=Qo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function pe(){return rn.lFrame.selectedIndex}function He(n){rn.lFrame.selectedIndex=n}function rt(){const n=rn.lFrame;return Ji(n.tView,n.selectedIndex)}function sr(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:S,ngAfterViewChecked:V,ngOnDestroy:Z}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),I&&((n.contentHooks||(n.contentHooks=[])).push(s,I),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,I)),S&&(n.viewHooks||(n.viewHooks=[])).push(-s,S),V&&((n.viewHooks||(n.viewHooks=[])).push(s,V),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,V)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Z)}}function ur(n,r,s){Ti(n,r,3,s)}function ks(n,r,s,a){(3&n[2])===s&&Ti(n,r,s,a)}function Is(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ti(n,r,s,a){const h=a??-1,v=r.length-1;let I=0;for(let S=void 0!==a?65535&n[18]:0;S<v;S++)if("number"==typeof r[S+1]){if(I=r[S],null!=a&&I>=a)break}else r[S]<0&&(n[18]+=65536),(I<h||-1==h)&&(io(n,s,r,S),n[18]=(4294901760&n[18])+S+2),S++}function io(n,r,s,a){const l=s[a]<0,h=s[a+1],I=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(I)}finally{}}}else try{h.call(I)}finally{}}class Fs{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Xo(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],v=s[a++],I=s[a++];n.setAttribute(r,v,I,h)}else{const h=l,v=s[++a];qa(h)?n.setProperty(r,h,v):n.setAttribute(r,h,v),a++}}return a}function ea(n){return 3===n||4===n||6===n}function qa(n){return 64===n.charCodeAt(0)}function ya(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||fu(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function fu(n,r,s,a,l){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const I=n[h++];if("number"==typeof I){if(I===r){v=-1;break}if(I>r){v=h-1;break}}}for(;h<n.length;){const I=n[h];if("number"==typeof I)break;if(I===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function va(n){return-1!==n}function Ai(n){return 32767&n}function Wr(n,r){let s=function Ra(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let ts=!0;function Ls(n){const r=ts;return ts=n,r}let kn=0;const vi={};function qt(n,r){const s=pu(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,fn(a.data,n),fn(r,null),fn(a.blueprint,null));const l=Lt(n,r),h=n.injectorIndex;if(va(l)){const v=Ai(l),I=Wr(l,r),S=I[1].data;for(let V=0;V<8;V++)r[h+V]=I[v+V]|S[v+V]}return r[h+8]=l,h}function fn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function pu(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Lt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=lr(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Ye(n,r,s){!function ta(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Q)&&(a=s[Q]),null==a&&(a=s[Q]=kn++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function Or(n,r,s){if(s&mt.Optional||void 0!==n)return n;Je()}function Ea(n,r,s,a){if(s&mt.Optional&&void 0===a&&(a=null),0==(s&(mt.Self|mt.Host))){const l=n[9],h=Gn(void 0);try{return l?l.get(r,a,s&mt.Optional):_r(r,a,s&mt.Optional)}finally{Gn(h)}}return Or(a,0,s)}function so(n,r,s,a=mt.Default,l){if(null!==n){if(1024&r[2]){const v=function Bo(n,r,s,a,l){let h=n,v=r;for(;null!==h&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=Na(h,v,s,a|mt.Self,vi);if(I!==vi)return I;let S=h.parent;if(!S){const V=v[21];if(V){const Z=V.get(s,vi,a);if(Z!==vi)return Z}S=lr(v),v=v[15]}h=S}return l}(n,r,s,a,vi);if(v!==vi)return v}const h=Na(n,r,s,a,vi);if(h!==vi)return h}return Ea(r,s,a,l)}function Na(n,r,s,a,l){const h=function Ka(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Q)?n[Q]:void 0;return"number"==typeof r?r>=0?255&r:Qa:r}(s);if("function"==typeof h){if(!Ko(r,n,a))return a&mt.Host?Or(l,0,a):Ea(r,s,a,l);try{const v=h(a);if(null!=v||a&mt.Optional)return v;Je()}finally{T()}}else if("number"==typeof h){let v=null,I=pu(n,r),S=-1,V=a&mt.Host?r[16][6]:null;for((-1===I||a&mt.SkipSelf)&&(S=-1===I?Lt(n,r):r[I+8],-1!==S&&Oa(a,!1)?(v=r[1],I=Ai(S),r=Wr(S,r)):I=-1);-1!==I;){const Z=r[1];if(Ya(h,I,Z.data)){const J=gu(I,r,s,v,a,V);if(J!==vi)return J}S=r[I+8],-1!==S&&Oa(a,r[1].data[I+8]===V)&&Ya(h,I,r)?(v=Z,I=Ai(S),r=Wr(S,r)):I=-1}}return l}function gu(n,r,s,a,l,h){const v=r[1],I=v.data[n+8],Z=_o(I,v,s,null==a?Qr(I)&&ts:a!=v&&0!=(3&I.type),l&mt.Host&&h===I);return null!==Z?Vo(r,v,Z,I):vi}function _o(n,r,s,a,l){const h=n.providerIndexes,v=r.data,I=1048575&h,S=n.directiveStart,Z=h>>20,Te=l?I+Z:n.directiveEnd;for(let je=a?I:I+Z;je<Te;je++){const ht=v[je];if(je<S&&s===ht||je>=S&&ht.type===s)return je}if(l){const je=v[S];if(je&&Ir(je)&&je.type===s)return S}return null}function Vo(n,r,s,a){let l=n[s];const h=r.data;if(function cs(n){return n instanceof Fs}(l)){const v=l;v.resolving&&function Dt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${n}${s}`)}(function De(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ze(n)}(h[s]));const I=Ls(v.canSeeViewProviders);v.resolving=!0;const S=v.injectImpl?Gn(v.injectImpl):null;Ko(n,a,mt.Default);try{l=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Ur(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const v=Yi(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==S&&Gn(S),Ls(I),v.resolving=!1,T()}}return l}function Ya(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Oa(n,r){return!(n&mt.Self||n&mt.Host&&r)}class Uo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return so(this._tNode,this._lView,r,a,s)}}function Qa(){return new Uo(Dr(),gt())}function Jt(n){return fr(()=>{const r=n.prototype.constructor,s=r[me]||Eo(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[me]||Eo(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Eo(n){return nt(n)?()=>{const r=Eo(re(n));return r&&r()}:Di(n)}function lr(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function an(n){return function vt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(ea(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Dr(),n)}const xn="__parameters__";function oo(n,r,s){return fr(()=>{const a=function Ot(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const v=new l(...h);return I.annotation=v,I;function I(S,V,Z){const J=S.hasOwnProperty(xn)?S[xn]:Object.defineProperty(S,xn,{value:[]})[xn];for(;J.length<=Z;)J.push(null);return(J[Z]=J[Z]||[]).push(v),S}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class mr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Nt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Hi(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Hi(a,r)):r!==n&&r.push(a)}return r}function _i(n,r){n.forEach(s=>Array.isArray(s)?_i(s,r):r(s))}function Ju(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Us(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ds(n,r,s){let a=_(n,r);return a>=0?n[1|a]=s:(a=~a,function yu(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Pr(n,r){const s=_(n,r);if(s>=0)return n[1|s]}function _(n,r){return function m(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Vn={},ki="__NG_DI_FLAG__",Gi="ngTempTokenPath",ci=/\n/gm,Do="__source";let sa;function bs(n){const r=sa;return sa=n,r}function vu(n,r=mt.Default){if(void 0===sa)throw new Ve(-203,!1);return null===sa?_r(n,void 0,r):sa.get(n,r&mt.Optional?null:void 0,r)}function Br(n,r=mt.Default){return(function gn(){return Un}()||vu)(re(n),r)}function M(n,r=mt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Br(n,r)}function O(n){const r=[];for(let s=0;s<n.length;s++){const a=re(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ve(900,!1);let l,h=mt.Default;for(let v=0;v<a.length;v++){const I=a[v],S=se(I);"number"==typeof S?-1===S?l=I.token:h|=S:l=I}r.push(Br(l,h))}else r.push(Br(a))}return r}function H(n,r){return n[ki]=r,n.prototype[ki]=r,n}function se(n){return n[ki]}const Pt=H(oo("Optional"),8),En=H(oo("SkipSelf"),4);let zc;function Nf(n){zc=n}class tl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ua(n){return n instanceof tl?n.changingThisBreaksApplicationSecurity:n}const th=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Fi=(()=>((Fi=Fi||{})[Fi.NONE=0]="NONE",Fi[Fi.HTML=1]="HTML",Fi[Fi.STYLE=2]="STYLE",Fi[Fi.SCRIPT=3]="SCRIPT",Fi[Fi.URL=4]="URL",Fi[Fi.RESOURCE_URL=5]="RESOURCE_URL",Fi))();function nd(n){const r=function Va(){const n=gt();return n&&n[12]}();return r?r.sanitize(Fi.URL,n)||"":function Eu(n,r){const s=function ic(n){return n instanceof tl&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?ua(n):function Aa(n){return(n=String(n)).match(th)?n:"unsafe:"+n}(ze(n))}const Al=new mr("ENVIRONMENT_INITIALIZER"),To=new mr("INJECTOR",-1),Sl=new mr("INJECTOR_DEF_TYPES");class bu{get(r,s=Vn){if(s===Vn){const a=new Error(`NullInjectorError: No provider for ${Ae(r)}!`);throw a.name="NullInjectorError",a}return s}}function $f(...n){return{\u0275providers:lc(0,n)}}function lc(n,...r){const s=[],a=new Set;let l;return _i(r,h=>{const v=h;Ks(v,s,[],a)&&(l||(l=[]),l.push(v))}),void 0!==l&&Bn(l,s),s}function Bn(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];_i(l,h=>{r.push(h)})}}function Ks(n,r,s,a){if(!(n=re(n)))return!1;let l=null,h=br(n);const v=!h&&dn(n);if(h||v){if(v&&!v.standalone)return!1;l=n}else{const S=n.ngModule;if(h=br(S),!h)return!1;l=S}const I=a.has(l);if(v){if(I)return!1;if(a.add(l),v.dependencies){const S="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const V of S)Ks(V,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!I){let V;a.add(l);try{_i(h.imports,Z=>{Ks(Z,r,s,a)&&(V||(V=[]),V.push(Z))})}finally{}void 0!==V&&Bn(V,r)}if(!I){const V=Di(l)||(()=>new l);r.push({provide:l,useFactory:V,deps:At},{provide:Sl,useValue:l,multi:!0},{provide:Al,useValue:()=>Br(l),multi:!0})}const S=h.providers;null==S||I||_i(S,Z=>{r.push(Z)})}}return l!==n&&void 0!==n.providers}const il=we({provide:String,useValue:we});function Au(n){return null!==n&&"object"==typeof n&&il in n}function tu(n){return"function"==typeof n}const id=new mr("Set Injector scope."),Go={},sd={};let od;function cc(){return void 0===od&&(od=new bu),od}class Mu{}class xu extends Mu{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ba(r,v=>this.processProvider(v)),this.records.set(To,Ys(void 0,this)),l.has("environment")&&this.records.set(Mu,Ys(void 0,this));const h=this.records.get(id);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Sl.multi,At,mt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=bs(this),a=Gn(void 0);try{return r()}finally{bs(s),Gn(a)}}get(r,s=Vn,a=mt.Default){this.assertNotDestroyed();const l=bs(this),h=Gn(void 0);try{if(!(a&mt.SkipSelf)){let I=this.records.get(r);if(void 0===I){const S=function hc(n){return"function"==typeof n||"object"==typeof n&&n instanceof mr}(r)&&Tn(r);I=S&&this.injectableDefInScope(S)?Ys(As(r),Go):null,this.records.set(r,I)}if(null!=I)return this.hydrate(r,I)}return(a&mt.Self?cc():this.parent).get(r,s=a&mt.Optional&&s===Vn?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[Gi]=v[Gi]||[]).unshift(Ae(r)),l)throw v;return function Oe(n,r,s,a){const l=n[Gi];throw r[Do]&&l.unshift(r[Do]),n.message=function Ke(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=Ae(r);if(Array.isArray(r))l=r.map(Ae).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let I=r[v];h.push(v+":"+("string"==typeof I?JSON.stringify(I):Ae(I)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(ci,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[Gi]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{Gn(h),bs(l)}}resolveInjectorInitializers(){const r=bs(this),s=Gn(void 0);try{const a=this.get(Al.multi,At,mt.Self);for(const l of a)l()}finally{bs(r),Gn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Ae(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processProvider(r){let s=tu(r=re(r))?r:re(r&&r.provide);const a=function zi(n){return Au(n)?Ys(void 0,n.useValue):Ys(dc(n),Go)}(r);if(tu(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Ys(void 0,Go,!0),l.factory=()=>O(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Go&&(s.value=sd,s.value=s.factory()),"object"==typeof s.value&&s.value&&function la(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=re(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function As(n){const r=Tn(n),s=null!==r?r.factory:Di(n);if(null!==s)return s;if(n instanceof mr)throw new Ve(204,!1);if(n instanceof Function)return function ad(n){const r=n.length;if(r>0)throw function Io(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Ve(204,!1);const s=function tr(n){const r=n&&(n[zt]||n[or]);if(r){const s=function In(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ve(204,!1)}function dc(n,r,s){let a;if(tu(n)){const l=re(n);return Di(l)||As(l)}if(Au(n))a=()=>re(n.useValue);else if(function Ml(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...O(n.deps||[]));else if(function Su(n){return!(!n||!n.useExisting)}(n))a=()=>Br(re(n.useExisting));else{const l=re(n&&(n.useClass||n.provide));if(!function Ua(n){return!!n.deps}(n))return Di(l)||As(l);a=()=>new l(...O(n.deps))}return a}function Ys(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function sh(n){return!!n.\u0275providers}function Ba(n,r){for(const s of n)Array.isArray(s)?Ba(s,r):sh(s)?Ba(s.\u0275providers,r):r(s)}class ud{}class c{resolveComponentFactory(r){throw function ah(n){const r=Error(`No component factory found for ${Ae(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let f=(()=>{class n{}return n.NULL=new c,n})();function w(){return U(Dr(),gt())}function U(n,r){return new W(Vr(n,r))}let W=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=w,n})();function Re(n){return n instanceof W?n.nativeElement:n}class Mt{}let Qt=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function wn(){const n=gt(),s=On(Dr().index,n);return(wr(s)?s:n)[11]}(),n})(),sn=(()=>{class n{}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:()=>null}),n})();class Xr{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const zo=new Xr("14.2.2"),sl={};function Wf(n){return n.ngOriginalError}class cd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Wf(r);for(;s&&Wf(s);)s=Wf(s);return s||null}}const dd=new Map;let Bs=0;const Ru="__ngContext__";function Zi(n,r){wr(r)?(n[Ru]=r[20],function Yf(n){dd.set(n[20],n)}(r)):n[Ru]=r}function Nu(n){return n instanceof Function?n():n}var nu=(()=>((nu=nu||{})[nu.Important=1]="Important",nu[nu.DashCase=2]="DashCase",nu))();function pd(n,r){return undefined(n,r)}function Ou(n){const r=n[3];return Zr(r)?r[3]:r}function Eh(n){return Mo(n[13])}function wh(n){return Mo(n[4])}function Mo(n){for(;null!==n&&!Zr(n);)n=n[4];return n}function Pu(n,r,s,a,l){if(null!=a){let h,v=!1;Zr(a)?h=a:wr(a)&&(v=!0,a=a[0]);const I=ir(a);0===n&&null!==s?null==l?Jg(r,s,I):dl(r,s,I,l||null,!0):1===n&&null!==s?dl(r,s,I,l||null,!0):2===n?function rm(n,r,s){const a=md(n,r);a&&function Pl(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,I,v):3===n&&r.destroyNode(I),null!=h&&function sm(n,r,s,a,l){const h=s[7];h!==ir(s)&&Pu(r,n,a,h,l);for(let I=10;I<s.length;I++){const S=s[I];yd(S[1],S,n,r,a,h)}}(r,n,h,s,l)}}function ll(n,r,s){return n.createElement(r,s)}function np(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Nr(l,-1)),s.splice(a,1)}function rp(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&np(l,a),r>0&&(n[s-1][4]=a[4]);const h=Us(n,10+r);!function qg(n,r){yd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Yg(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&yd(n,r,s,3,null,null),function yc(n){let r=n[13];if(!r)return ip(n[1],n);for(;r;){let s=null;if(wr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)wr(r)&&ip(r[1],r),r=r[3];null===r&&(r=n),wr(r)&&ip(r[1],r),s=r&&r[4]}r=s}}(r)}}function ip(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Ih(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Fs)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const I=l[h[v]],S=h[v+1];try{S.call(I)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Xy(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],I="function"==typeof v?v(r):ir(r[v]),S=a[l=s[h+2]],V=s[h+3];"boolean"==typeof V?I.removeEventListener(s[h],S,V):V>=0?a[l=V]():a[l=-V].unsubscribe(),h+=2}else{const v=a[l=s[h+1]];s[h].call(v)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Zr(r[3])){s!==r[3]&&np(s,r);const a=r[19];null!==a&&a.detachView(n)}!function ol(n){dd.delete(n[20])}(r)}}function sp(n,r,s){return function Qg(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===$e.None||l===$e.Emulated)return null}return Vr(a,s)}(n,r.parent,s)}function dl(n,r,s,a,l){n.insertBefore(r,s,a,l)}function Jg(n,r,s){n.appendChild(r,s)}function op(n,r,s,a,l){null!==a?dl(n,r,s,a,l):Jg(n,r,s)}function md(n,r){return n.parentNode(r)}let tm=function ap(n,r,s){return 40&n.type?Vr(n,s):null};function is(n,r,s,a){const l=sp(n,a,r),h=r[11],I=function em(n,r,s){return tm(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let S=0;S<s.length;S++)op(h,l,s[S],I,!1);else op(h,l,s,I,!1)}function bh(n,r){if(null!==r){const s=r.type;if(3&s)return Vr(r,n);if(4&s)return lp(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return bh(n,a);{const l=n[r.index];return Zr(l)?lp(-1,l):ir(l)}}if(32&s)return pd(r,n)()||ir(n[r.index]);{const a=nm(n,r);return null!==a?Array.isArray(a)?a[0]:bh(Ou(n[16]),a):bh(n,r.next)}}return null}function nm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function lp(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return bh(a,l)}return r[7]}function Th(n,r,s,a,l,h,v){for(;null!=s;){const I=a[s.index],S=s.type;if(v&&0===r&&(I&&Zi(ir(I),a),s.flags|=4),64!=(64&s.flags))if(8&S)Th(n,r,s.child,a,l,h,!1),Pu(r,n,l,I,h);else if(32&S){const V=pd(s,a);let Z;for(;Z=V();)Pu(r,n,l,Z,h);Pu(r,n,l,I,h)}else 16&S?im(n,r,a,s,l,h):Pu(r,n,l,I,h);s=v?s.projectionNext:s.next}}function yd(n,r,s,a,l,h){Th(s,a,n.firstChild,r,l,h,!1)}function im(n,r,s,a,l,h){const v=s[16],S=v[6].projection[a.projection];if(Array.isArray(S))for(let V=0;V<S.length;V++)Pu(r,n,l,S[V],h);else Th(n,r,S,v[3],l,h,!0)}function Sh(n,r,s){n.setAttribute(r,"style",s)}function kl(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function vd(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Mh="ng-template";function am(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==vd(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function um(n){return 4===n.type&&n.value!==Mh}function lm(n,r,s){return r===(4!==n.type||s?n.value:Mh)}function cm(n,r,s){let a=4;const l=n.attrs||[],h=function dm(n){for(let r=0;r<n.length;r++)if(ea(n[r]))return r;return n.length}(l);let v=!1;for(let I=0;I<r.length;I++){const S=r[I];if("number"!=typeof S){if(!v)if(4&a){if(a=2|1&a,""!==S&&!lm(n,S,s)||""===S&&1===r.length){if(ca(a))return!1;v=!0}}else{const V=8&a?S:r[++I];if(8&a&&null!==n.attrs){if(!am(n.attrs,V,s)){if(ca(a))return!1;v=!0}continue}const J=ev(8&a?"class":S,l,um(n),s);if(-1===J){if(ca(a))return!1;v=!0;continue}if(""!==V){let Te;Te=J>h?"":l[J+1].toLowerCase();const je=8&a?Te:null;if(je&&-1!==vd(je,V,0)||2&a&&V!==Te){if(ca(a))return!1;v=!0}}}}else{if(!v&&!ca(a)&&!ca(S))return!1;if(v&&ca(S))continue;v=!1,a=S|1&a}}return ca(a)||v}function ca(n){return 0==(1&n)}function ev(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const v=r[l];if(v===n)return l;if(3===v||6===v)h=!0;else{if(1===v||2===v){let I=r[++l];for(;"string"==typeof I;)I=r[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=h?1:2}return-1}return function nv(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function dp(n,r,s=!1){for(let a=0;a<r.length;a++)if(cm(n,r[a],s))return!0;return!1}function Fl(n,r){return n?":not("+r.trim()+")":r}function hp(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const I=n[++s];l+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&a?l+="."+v:4&a&&(l+=" "+v);else""!==l&&!ca(v)&&(r+=Fl(h,l),l=""),a=v,h=h||!ca(a);s++}return""!==l&&(r+=Fl(h,l)),r}const jn={};function fp(n){fm(Sn(),gt(),pe()+n,!1)}function fm(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&ur(r,h,s)}else{const h=n.preOrderHooks;null!==h&&ks(r,h,0,s)}He(s)}function Ph(n,r=null,s=null,a){const l=kh(n,r,s,a);return l.resolveInjectorInitializers(),l}function kh(n,r=null,s=null,a,l=new Set){const h=[s||At,$f(n)];return a=a||("object"==typeof n?void 0:Ae(n)),new xu(h,r||cc(),a||null,l)}let ku=(()=>{class n{static create(s,a){if(Array.isArray(s))return Ph({name:""},a,s,"");{const l=s.name??"";return Ph({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=Vn,n.NULL=new bu,n.\u0275prov=Nt({token:n,providedIn:"any",factory:()=>Br(To)}),n.__NG_ELEMENT_ID__=-1,n})();function hl(n,r=mt.Default){const s=gt();return null===s?Br(n,r):so(Dr(),s,re(n),r)}function Em(){throw new Error("invalid")}function Ll(n,r){return n<<17|r<<2}function da(n){return n>>17&32767}function wd(n){return 2|n}function Fu(n){return(131068&n)>>2}function Dp(n,r){return-131069&n|r<<2}function Gh(n){return 1|n}function xm(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];Fo(l),v.contentQueries(2,r[h],h)}}}function Ac(n,r,s,a,l,h,v,I,S,V,Z){const J=r.blueprint.slice();return J[0]=l,J[2]=76|a,(null!==Z||n&&1024&n[2])&&(J[2]|=1024),ko(J),J[3]=J[15]=n,J[8]=s,J[10]=v||n&&n[10],J[11]=I||n&&n[11],J[12]=S||n&&n[12]||null,J[9]=V||n&&n[9]||null,J[6]=h,J[20]=function Kf(){return Bs++}(),J[21]=Z,J[16]=2==r.type?n[16]:J,J}function Ul(n,r,s,a,l){let h=n.data[r];if(null===h)h=function bd(n,r,s,a,l){const h=ws(),v=yo(),S=n.data[r]=function Bp(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=S),null!==h&&(v?null==h.child&&null!==S.parent&&(h.child=S):null===h.next&&(h.next=S)),S}(n,r,s,a,l),function Kn(){return rn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const v=function as(){const n=rn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return mi(h,!0),h}function Bl(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Fp(n,r,s){ls(r);try{const a=n.viewQuery;null!==a&&xd(1,a,s);const l=n.template;null!==l&&Rm(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&xm(n,r),n.staticViewQueries&&xd(2,n.viewQuery,s);const h=n.components;null!==h&&function fv(n,r){for(let s=0;s<r.length;s++)Xh(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,B()}}function Sc(n,r,s,a){const l=r[2];if(128!=(128&l)){ls(r);try{ko(r),function qe(n){return rn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Rm(n,r,s,2,a);const v=3==(3&l);if(v){const V=n.preOrderCheckHooks;null!==V&&ur(r,V,null)}else{const V=n.preOrderHooks;null!==V&&ks(r,V,0,null),Is(r,0)}if(function mv(n){for(let r=Eh(n);null!==r;r=wh(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&Nr(h,1),l[2]|=512}}}(r),function jm(n){for(let r=Eh(n);null!==r;r=wh(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];Es(a)&&Sc(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&xm(n,r),v){const V=n.contentCheckHooks;null!==V&&ur(r,V)}else{const V=n.contentHooks;null!==V&&ks(r,V,1),Is(r,1)}!function Pp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)He(~l);else{const h=l,v=s[++a],I=s[++a];us(v,h),I(2,r[h])}}}finally{He(-1)}}(n,r);const I=n.components;null!==I&&function kp(n,r){for(let s=0;s<r.length;s++)Qp(n,r[s])}(r,I);const S=n.viewQuery;if(null!==S&&xd(2,S,a),v){const V=n.viewCheckHooks;null!==V&&ur(r,V)}else{const V=n.viewHooks;null!==V&&ks(r,V,2),Is(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Nr(r[3],-1))}finally{B()}}}function Rm(n,r,s,a,l){const h=pe(),v=2&a;try{He(-1),v&&r.length>22&&fm(n,r,22,!1),s(a,l)}finally{He(h)}}function Lp(n,r,s){!es()||(function gv(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||qt(s,r),Zi(a,r);const v=s.initialInputs;for(let I=l;I<h;I++){const S=n.data[I],V=Ir(S);V&&Wp(r,s,S);const Z=Vo(r,n,I,s);Zi(Z,r),null!==v&&qp(0,I-l,Z,S,0,v),V&&(On(s.index,r)[8]=Z)}}(n,r,s,Vr(s,r)),128==(128&s.flags)&&function Hp(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,v=function to(){return rn.lFrame.currentDirectiveIndex}();try{He(h);for(let I=a;I<l;I++){const S=n.data[I],V=r[I];no(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Lm(S,V)}}finally{He(-1),no(v)}}(n,r,s))}function Td(n,r,s=Vr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],I=-1===v?s(r,n):n[v];n[l++]=I}}}function Nm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Ad(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Ad(n,r,s,a,l,h,v,I,S,V){const Z=22+a,J=Z+l,Te=function Vp(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:jn);return s}(Z,J),je="function"==typeof V?V():V;return Te[1]={type:n,blueprint:Te,template:s,queries:null,viewQuery:I,declTNode:r,data:Te.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:S,consts:je,incompleteFirstPass:!1}}function Up(n,r,s,a){const l=nf(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&rf(n).push(a,l.length-1))}function Pm(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Qh(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,v=[];let I=null,S=null;for(let V=r.directiveStart;V<a;V++){const Z=l[V],J=Z.inputs,Te=null===h||um(r)?null:Kp(J,h);v.push(Te),I=Pm(J,V,I),S=Pm(Z.outputs,V,S)}null!==I&&(I.hasOwnProperty("class")&&(r.flags|=16),I.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=I,r.outputs=S}function xo(n,r,s,a,l,h,v,I){const S=Vr(r,s);let Z,V=r.inputs;!I&&null!=V&&(Z=V[a])?(Nd(n,s,Z,a,l),Qr(r)&&km(s,r.index)):3&r.type&&(a=function Vu(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=v?v(l,r.value||"",a):l,h.setProperty(S,a,l))}function km(n,r){const s=On(r,n);16&s[2]||(s[2]|=32)}function Sd(n,r,s,a){let l=!1;if(es()){const h=function Gp(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];dp(s,v.selectors,!1)&&(l||(l=[]),Ye(qt(s,r),n,v.type),Ir(v)?(zp(n,s),l.unshift(v)):l.push(v))}return l}(n,r,s),v=null===a?null:{"":-1};if(null!==h){l=!0,Um(s,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const J=h[Z];J.providersResolver&&J.providersResolver(J)}let I=!1,S=!1,V=Bl(n,r,h.length,null);for(let Z=0;Z<h.length;Z++){const J=h[Z];s.mergedAttrs=ya(s.mergedAttrs,J.hostAttrs),Bm(n,s,r,V,J),Vm(V,J,v),null!==J.contentQueries&&(s.flags|=8),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(s.flags|=128);const Te=J.type.prototype;!I&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),I=!0),!S&&(Te.ngOnChanges||Te.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),S=!0),V++}Qh(n,s)}v&&function Zp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ve(-301,!1);a.push(r[l],h)}}}(s,a,v)}return s.mergedAttrs=ya(s.mergedAttrs,s.attrs),l}function Fm(n,r,s,a,l,h){const v=h.hostBindings;if(v){let I=n.hostBindingOpCodes;null===I&&(I=n.hostBindingOpCodes=[]);const S=~r.index;(function $p(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(I)!=S&&I.push(S),I.push(a,l,v)}}function Lm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function zp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Vm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Ir(r)&&(s[""]=n)}}function Um(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Bm(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Di(l.type)),v=new Fs(h,Ir(l),hl);n.blueprint[a]=v,s[a]=v,Fm(n,r,0,a,Bl(n,s,l.hostVars,jn),l)}function Wp(n,r,s){const a=Vr(r,n),l=Nm(s),h=n[10],v=ef(n,Ac(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=v}function iu(n,r,s,a,l,h){const v=Vr(n,r);!function Md(n,r,s,a,l,h,v){if(null==h)n.removeAttribute(r,l,s);else{const I=null==v?ze(h):v(h,a||"",l);n.setAttribute(r,l,I,s)}}(r[11],v,h,n.value,s,a,l)}function qp(n,r,s,a,l,h){const v=h[r];if(null!==v){const I=a.setInput;for(let S=0;S<v.length;){const V=v[S++],Z=v[S++],J=v[S++];null!==I?a.setInput(s,J,V,Z):s[Z]=J}}}function Kp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Yp(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Qp(n,r){const s=On(r,n);if(Es(s)){const a=s[1];48&s[2]?Sc(a,s,a.template,s[8]):s[5]>0&&Jh(s)}}function Jh(n){for(let a=Eh(n);null!==a;a=wh(a))for(let l=10;l<a.length;l++){const h=a[l];if(Es(h))if(512&h[2]){const v=h[1];Sc(v,h,v.template,h[8])}else h[5]>0&&Jh(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=On(s[a],n);Es(l)&&l[5]>0&&Jh(l)}}function Xh(n,r){const s=On(r,n),a=s[1];(function yv(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Fp(a,s,s[8])}function ef(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Jp(n){for(;n;){n[2]|=32;const r=Ou(n);if(ji(n)&&!r)return n;n=r}return null}function tf(n,r,s,a=!0){const l=r[10];l.begin&&l.begin();try{Sc(n,r,n.template,s)}catch(v){throw a&&Rd(r,v),v}finally{l.end&&l.end()}}function xd(n,r,s){Fo(0),r(n,s)}function nf(n){return n[7]||(n[7]=[])}function rf(n){return n.cleanup||(n.cleanup=[])}function Rd(n,r){const s=n[9],a=s?s.get(cd,null):null;a&&a.handleError(r)}function Nd(n,r,s,a,l){for(let h=0;h<s.length;){const v=s[h++],I=s[h++],S=r[v],V=n.data[v];null!==V.setInput?V.setInput(S,l,a,I):S[I]=l}}function jl(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const I=r[v];"number"==typeof I?h=I:1==h?l=be(l,I):2==h&&(a=be(a,I+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function Od(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(ir(h)),Zr(h))for(let I=10;I<h.length;I++){const S=h[I],V=S[1].firstChild;null!==V&&Od(S[1],S,V,a)}const v=s.type;if(8&v)Od(n,r,s.child,a);else if(32&v){const I=pd(s,r);let S;for(;S=I();)a.push(S)}else if(16&v){const I=nm(r,s);if(Array.isArray(I))a.push(...I);else{const S=Ou(r[16]);Od(S[1],S,I,a,!0)}}s=l?s.projectionNext:s.next}return a}class $l{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Od(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Zr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(rp(r,a),Us(s,a))}this._attachedToViewContainer=!1}Yg(this._lView[1],this._lView)}onDestroy(r){Up(this._lView[1],this._lView,null,r)}markForCheck(){Jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){tf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Jy(n,r){yd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ve(902,!1);this._appRef=r}}class xc extends $l{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;tf(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class Pd extends f{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=dn(r);return new Rc(s,this.ngModule)}}function $m(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class wv{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,sl,a);return l!==sl||s===sl?l:this.parentInjector.get(r,s,a)}}class Rc extends ud{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function xh(n){return n.map(hp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return $m(this.componentDef.inputs)}get outputs(){return $m(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof Mu?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const v=h?new wv(r,h):r,I=v.get(Mt,null);if(null===I)throw new Ve(407,!1);const S=v.get(sn,null),V=I.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",J=a?function Mc(n,r,s){return n.selectRootElement(r,s===$e.ShadowDom)}(V,a,this.componentDef.encapsulation):ll(I.createRenderer(null,this.componentDef),Z,function Ev(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),Te=this.componentDef.onPush?288:272,je=Ad(0,null,null,1,0,null,null,null,null,null),ht=Ac(null,je,null,Te,null,null,I,V,S,v,null);let xt,Gt;ls(ht);try{const on=function bv(n,r,s,a,l,h){const v=s[1];s[22]=n;const S=Ul(v,22,2,"#host",null),V=S.mergedAttrs=r.hostAttrs;null!==V&&(jl(S,V,!0),null!==n&&(Xo(l,n,V),null!==S.classes&&kl(l,n,S.classes),null!==S.styles&&Sh(l,n,S.styles)));const Z=a.createRenderer(n,r),J=Ac(s,Nm(r),null,r.onPush?32:16,s[22],S,a,Z,h||null,null,null);return v.firstCreatePass&&(Ye(qt(S,s),v,r.type),zp(v,S),Um(S,s.length,1)),ef(s,J),s[22]=J}(J,this.componentDef,ht,I,V);if(J)if(a)Xo(V,J,["ng-version",zo.full]);else{const{attrs:bn,classes:It}=function hm(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!ca(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);bn&&Xo(V,J,bn),It&&It.length>0&&kl(V,J,It.join(" "))}if(Gt=Ji(je,22),void 0!==s){const bn=Gt.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Nn=s[It];bn.push(null!=Nn?Array.from(Nn):null)}}xt=function Tv(n,r,s,a){const l=s[1],h=function pv(n,r,s){const a=Dr();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Bm(n,a,r,Bl(n,r,1,null),s),Qh(n,a));const l=Vo(r,n,a.directiveStart,a);Zi(l,r);const h=Vr(a,r);return h&&Zi(h,r),l}(l,s,r);if(n[8]=s[8]=h,null!==a)for(const I of a)I(h,r);if(r.contentQueries){const I=Dr();r.contentQueries(1,h,I.directiveStart)}const v=Dr();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(He(v.index),Fm(s[1],v,0,v.directiveStart,v.directiveEnd,r),Lm(r,h)),h}(on,this.componentDef,ht,[Hm]),Fp(je,ht,null)}finally{B()}return new Cv(this.componentType,xt,U(Gt,ht),ht,Gt)}}class Cv extends class oh{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new xc(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;Nd(h[1],h,l,r,s),km(h,this._tNode.index)}}get injector(){return new Uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Hm(){const n=Dr();sr(gt()[1],n)}function uf(n){let r=function af(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Ir(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ve(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const v=n;v.inputs=lf(n.inputs),v.declaredInputs=lf(n.declaredInputs),v.outputs=lf(n.outputs);const I=l.hostBindings;I&&zm(n,I);const S=l.viewQuery,V=l.contentQueries;if(S&&cf(n,S),V&&yr(n,V),Y(n.inputs,l.inputs),Y(n.declaredInputs,l.declaredInputs),Y(n.outputs,l.outputs),Ir(l)&&l.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let v=0;v<h.length;v++){const I=h[v];I&&I.ngInherit&&I(n),I===uf&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Gm(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=ya(l.hostAttrs,s=ya(s,l.hostAttrs))}}(a)}function lf(n){return n===An?{}:n===At?[]:n}function cf(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function yr(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function zm(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let qr=null;function Wi(){if(!qr){const n=it.Symbol;if(n&&n.iterator)qr=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(qr=a)}}}return qr}function Nc(n){return!!hf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Wi()in n)}function hf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ou(n,r,s){return n[r]=s}function co(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function qm(n,r,s,a){const l=gt();return co(l,kt(),r)&&(Sn(),iu(rt(),l,n,r,s,a)),qm}function zl(n,r,s,a){return co(n,kt(),s)?r+ze(s)+a:jn}function eg(n,r,s,a,l,h,v,I){const S=gt(),V=Sn(),Z=n+22,J=V.firstCreatePass?function Nv(n,r,s,a,l,h,v,I,S){const V=r.consts,Z=Ul(r,n,4,v||null,$i(V,I));Sd(r,s,Z,$i(V,S)),sr(r,Z);const J=Z.tViews=Ad(2,Z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,V);return null!==r.queries&&(r.queries.template(r,Z),J.queries=r.queries.embeddedTView(Z)),Z}(Z,V,S,r,s,a,l,h,v):V.data[Z];mi(J,!1);const Te=S[11].createComment("");is(V,S,Te,J),Zi(Te,S),ef(S,S[Z]=Yp(Te,S,Te,J)),Oo(J)&&Lp(V,S,J),null!=v&&Td(S,J,I)}function tg(n,r,s){const a=gt();return co(a,kt(),r)&&xo(Sn(),rt(),a,n,r,a[11],s,!1),tg}function Bu(n,r,s,a,l){const v=l?"class":"style";Nd(n,s,r.inputs[v],v,a)}function ml(n,r,s,a){const l=gt(),h=Sn(),v=22+n,I=l[11],S=l[v]=ll(I,r,function Mn(){return rn.lFrame.currentNamespace}()),V=h.firstCreatePass?function pf(n,r,s,a,l,h,v){const I=r.consts,V=Ul(r,n,2,l,$i(I,h));return Sd(r,s,V,$i(I,v)),null!==V.attrs&&jl(V,V.attrs,!1),null!==V.mergedAttrs&&jl(V,V.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,V),V}(v,h,l,0,r,s,a):h.data[v];mi(V,!0);const Z=V.mergedAttrs;null!==Z&&Xo(I,S,Z);const J=V.classes;null!==J&&kl(I,S,J);const Te=V.styles;return null!==Te&&Sh(I,S,Te),64!=(64&V.flags)&&is(h,l,S,V),0===function go(){return rn.lFrame.elementDepthCount}()&&Zi(S,l),function Ns(){rn.lFrame.elementDepthCount++}(),Oo(V)&&(Lp(h,l,V),function Yh(n,r,s){if(js(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}(h,V,l)),null!==a&&Td(l,V),ml}function Ld(){let n=Dr();yo()?function Ps(){rn.lFrame.isParent=!1}():(n=n.parent,mi(n,!1));const r=n;!function Hr(){rn.lFrame.elementDepthCount--}();const s=Sn();return s.firstCreatePass&&(sr(s,n),js(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Wu(n){return 0!=(16&n.flags)}(r)&&Bu(s,r,gt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ma(n){return 0!=(32&n.flags)}(r)&&Bu(s,r,gt(),r.stylesWithoutHost,!1),Ld}function Vd(n,r,s,a){return ml(n,r,s,a),Ld(),Vd}function mf(){return gt()}function yf(n){return!!n&&"function"==typeof n.then}function yl(n){return!!n&&"function"==typeof n.subscribe}const ig=yl;function vf(n,r,s,a){const l=gt(),h=Sn(),v=Dr();return function Jm(n,r,s,a,l,h,v,I){const S=Oo(a),Z=n.firstCreatePass&&rf(n),J=r[8],Te=nf(r);let je=!0;if(3&a.type||I){const Gt=Vr(a,r),on=I?I(Gt):Gt,bn=Te.length,It=I?zr=>I(ir(zr[a.index])):a.index;let Nn=null;if(!I&&S&&(Nn=function sg(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const v=l[h];if(v===s&&l[h+1]===a){const I=r[7],S=l[h+2];return I.length>S?I[S]:null}"string"==typeof v&&(h+=2)}return null}(n,r,l,a.index)),null!==Nn)(Nn.__ngLastListenerFn__||Nn).__ngNextListenerFn__=h,Nn.__ngLastListenerFn__=h,je=!1;else{h=Bd(a,r,J,h,!1);const zr=s.listen(on,l,h);Te.push(h,zr),Z&&Z.push(l,It,bn,bn+1)}}else h=Bd(a,r,J,h,!1);const ht=a.outputs;let xt;if(je&&null!==ht&&(xt=ht[l])){const Gt=xt.length;if(Gt)for(let on=0;on<Gt;on+=2){const qi=r[xt[on]][xt[on+1]].subscribe(h),qd=Te.length;Te.push(h,qi),Z&&Z.push(l,a.index,qd,-(qd+1))}}}(h,l,l[11],v,n,r,0,a),vf}function Ud(n,r,s,a){try{return!1!==s(a)}catch(l){return Rd(n,l),!1}}function Bd(n,r,s,a,l){return function h(v){if(v===Function)return a;Jp(2&n.flags?On(n.index,r):r);let S=Ud(r,0,a,v),V=h.__ngNextListenerFn__;for(;V;)S=Ud(r,0,V,v)&&S,V=V.__ngNextListenerFn__;return l&&!1===S&&(v.preventDefault(),v.returnValue=!1),S}}function og(n=1){return function x(n){return(rn.lFrame.contextLView=function G(n,r){for(;n>0;)r=r[15],n--;return r}(n,rn.lFrame.contextLView))[8]}(n)}function ju(n,r,s){return Ga(n,"",r,"",s),ju}function Ga(n,r,s,a,l){const h=gt(),v=zl(h,r,s,a);return v!==jn&&xo(Sn(),rt(),h,n,v,h[11],l,!1),Ga}function lg(n,r,s,a,l){const h=n[s+1],v=null===r;let I=a?da(h):Fu(h),S=!1;for(;0!==I&&(!1===S||v);){const Z=n[I+1];Lv(n[I],r)&&(S=!0,n[I+1]=a?Gh(Z):wd(Z)),I=a?da(Z):Fu(Z)}S&&(n[s+1]=a?wd(h):Gh(h))}function Lv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&_(n,r)>=0}function uu(n,r){return function za(n,r,s,a){const l=gt(),h=Sn(),v=function qn(n){const r=rn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function gg(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[pe()],v=function sy(n,r){return r>=n.expandoStartIndex}(n,s);(function dy(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!v&&(r=!1),r=function oy(n,r,s,a){const l=function ro(n){const r=rn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=du(s=mg(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==l)if(s=mg(l,n,r,s,a),null===h){let S=function $v(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Fu(a))return n[da(a)]}(n,r,a);void 0!==S&&Array.isArray(S)&&(S=mg(null,n,r,S[1],a),S=du(S,r.attrs,a),function Hv(n,r,s,a){n[da(s?r.classBindings:r.styleBindings)]=a}(n,r,a,S))}else h=function ay(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=du(a,n[h].hostAttrs,s);return du(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function kv(n,r,s,a,l,h){let v=h?r.classBindings:r.styleBindings,I=da(v),S=Fu(v);n[a]=s;let Z,V=!1;if(Array.isArray(s)){const J=s;Z=J[1],(null===Z||_(J,Z)>0)&&(V=!0)}else Z=s;if(l)if(0!==S){const Te=da(n[I+1]);n[a+1]=Ll(Te,I),0!==Te&&(n[Te+1]=Dp(n[Te+1],a)),n[I+1]=function Dc(n,r){return 131071&n|r<<17}(n[I+1],a)}else n[a+1]=Ll(I,0),0!==I&&(n[I+1]=Dp(n[I+1],a)),I=a;else n[a+1]=Ll(S,0),0===I?I=a:n[S+1]=Dp(n[S+1],a),S=a;V&&(n[a+1]=wd(n[a+1])),lg(n,Z,a,!0),lg(n,Z,a,!1),function Fv(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&_(h,r)>=0&&(s[a+1]=Gh(s[a+1]))}(r,Z,n,a,h),v=Ll(I,S),h?r.classBindings=v:r.styleBindings=v}(l,h,r,s,v,a)}}(h,n,v,a),r!==jn&&co(l,v,r)&&function ly(n,r,s,a,l,h,v,I){if(!(3&r.type))return;const S=n.data,V=S[I+1];wf(function Cp(n){return 1==(1&n)}(V)?cy(S,r,s,l,Fu(V),v):void 0)||(wf(h)||function Ip(n){return 2==(2&n)}(V)&&(h=cy(S,null,s,l,I,v)),function cp(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:nu.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=nu.Important),n.setStyle(s,a,l,h))}}(a,v,ui(pe(),s),l,h))}(h,h.data[pe()],l,l[11],n,l[v+1]=function zv(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ae(ua(n)))),n}(r,s),a,v)}(n,r,null,!0),uu}function mg(n,r,s,a,l){let h=null;const v=s.directiveEnd;let I=s.directiveStylingLast;for(-1===I?I=s.directiveStart:I++;I<v&&(h=r[I],a=du(a,h.hostAttrs,l),h!==n);)I++;return null!==n&&(s.directiveStylingLast=I),a}function du(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?l=v:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ds(n,v,!!s||r[++h]))}return void 0===n?null:n}function cy(n,r,s,a,l,h){const v=null===r;let I;for(;l>0;){const S=n[l],V=Array.isArray(S),Z=V?S[1]:S,J=null===Z;let Te=s[l+1];Te===jn&&(Te=J?At:void 0);let je=J?Pr(Te,a):Z===a?Te:void 0;if(V&&!wf(je)&&(je=Pr(S,a)),wf(je)&&(I=je,v))return I;const ht=n[l+1];l=v?da(ht):Fu(ht)}if(null!==r){let S=h?r.residualClasses:r.residualStyles;null!=S&&(I=Pr(S,a))}return I}function wf(n){return void 0!==n}function Zv(n,r=""){const s=gt(),a=Sn(),l=n+22,h=a.firstCreatePass?Ul(a,l,1,r,null):a.data[l],v=s[l]=function mc(n,r){return n.createText(r)}(s[11],r);is(a,s,v,h),mi(h,!1)}function hy(n){return Hd("",n,""),hy}function Hd(n,r,s){const a=gt(),l=zl(a,n,r,s);return l!==jn&&function su(n,r,s){const a=ui(r,n);!function tp(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,pe(),l),Hd}const zu=void 0;var Ay=["en",[["a","p"],["AM","PM"],zu],[["AM","PM"],zu,zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zu,"{1} 'at' {0}",zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tf(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Hc={};function Ig(n){const r=function Jv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Cg(r);if(s)return s;const a=r.split("-")[0];if(s=Cg(a),s)return s;if("en"===a)return Ay;throw new Ve(701,!1)}function Dg(n){return Ig(n)[Cn.PluralCase]}function Cg(n){return n in Hc||(Hc[n]=it.ng&&it.ng.common&&it.ng.common.locales&&it.ng.common.locales[n]),Hc[n]}var Cn=(()=>((Cn=Cn||{})[Cn.LocaleId=0]="LocaleId",Cn[Cn.DayPeriodsFormat=1]="DayPeriodsFormat",Cn[Cn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Cn[Cn.DaysFormat=3]="DaysFormat",Cn[Cn.DaysStandalone=4]="DaysStandalone",Cn[Cn.MonthsFormat=5]="MonthsFormat",Cn[Cn.MonthsStandalone=6]="MonthsStandalone",Cn[Cn.Eras=7]="Eras",Cn[Cn.FirstDayOfWeek=8]="FirstDayOfWeek",Cn[Cn.WeekendRange=9]="WeekendRange",Cn[Cn.DateFormat=10]="DateFormat",Cn[Cn.TimeFormat=11]="TimeFormat",Cn[Cn.DateTimeFormat=12]="DateTimeFormat",Cn[Cn.NumberSymbols=13]="NumberSymbols",Cn[Cn.NumberFormats=14]="NumberFormats",Cn[Cn.CurrencyCode=15]="CurrencyCode",Cn[Cn.CurrencySymbol=16]="CurrencySymbol",Cn[Cn.CurrencyName=17]="CurrencyName",Cn[Cn.Currencies=18]="Currencies",Cn[Cn.Directionality=19]="Directionality",Cn[Cn.PluralCase=20]="PluralCase",Cn[Cn.ExtraData=21]="ExtraData",Cn))();const Ql="en-US";let t=Ql;function i_(n,r,s,a,l){if(n=re(n),Array.isArray(n))for(let h=0;h<n.length;h++)i_(n[h],r,s,a,l);else{const h=Sn(),v=gt();let I=tu(n)?n:re(n.provide),S=dc(n);const V=Dr(),Z=1048575&V.providerIndexes,J=V.directiveStart,Te=V.providerIndexes>>20;if(tu(n)||!n.multi){const je=new Fs(S,l,hl),ht=o_(I,r,l?Z:Z+Te,J);-1===ht?(Ye(qt(V,v),h,I),s_(h,n,r.length),r.push(I),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),s.push(je),v.push(je)):(s[ht]=je,v[ht]=je)}else{const je=o_(I,r,Z+Te,J),ht=o_(I,r,Z,Z+Te),xt=je>=0&&s[je],Gt=ht>=0&&s[ht];if(l&&!Gt||!l&&!xt){Ye(qt(V,v),h,I);const on=function Nw(n,r,s,a,l){const h=new Fs(n,s,hl);return h.multi=[],h.index=r,h.componentProviders=0,I0(h,l,a&&!s),h}(l?Rw:xw,s.length,l,a,S);!l&&Gt&&(s[ht].providerFactory=on),s_(h,n,r.length,0),r.push(I),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),s.push(on),v.push(on)}else s_(h,n,je>-1?je:ht,I0(s[l?ht:je],S,!l&&a));!l&&a&&Gt&&s[ht].componentProviders++}}}function s_(n,r,s,a){const l=tu(r),h=function rd(n){return!!n.useClass}(r);if(l||h){const S=(h?re(r.useClass):r).prototype.ngOnDestroy;if(S){const V=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Z=V.indexOf(s);-1===Z?V.push(s,[a,S]):V[Z+1].push(a,S)}else V.push(s,S)}}}function I0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function o_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function xw(n,r,s,a){return a_(this.multi,[])}function Rw(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Vo(s,s[1],this.providerFactory.index,a);h=I.slice(0,v),a_(l,h);for(let S=v;S<I.length;S++)h.push(I[S])}else h=[],a_(l,h);return h}function a_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function D0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function Mw(n,r,s){const a=Sn();if(a.firstCreatePass){const l=Ir(n);i_(s,a.data,a.blueprint,l,!0),i_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Sf{}class C0{}function Ow(n,r){return new b0(n,r??null)}class b0 extends Sf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pd(this);const a=Fr(r);this._bootstrapComponents=Nu(a.bootstrap),this._r3Injector=kh(r,s,[{provide:Sf,useValue:this},{provide:f,useValue:this.componentFactoryResolver}],Ae(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class u_ extends C0{constructor(r){super(),this.moduleType=r}create(r){return new b0(this.moduleType,r)}}class Pw extends Sf{constructor(r,s,a){super(),this.componentFactoryResolver=new Pd(this),this.instance=null;const l=new xu([...r,{provide:Sf,useValue:this},{provide:f,useValue:this.componentFactoryResolver}],s||cc(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function l_(n,r,s=null){return new Pw(n,r,s).injector}let kw=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=lc(0,s.type),l=a.length>0?l_([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Nt({token:n,providedIn:"environment",factory:()=>new n(Br(Mu))}),n})();function T0(n){n.getStandaloneInjector=r=>r.get(kw).getOrCreateStandaloneInjector(n)}function Sg(n,r){const s=n[r];return s===jn?void 0:s}function P0(n,r,s,a,l,h,v){const I=r+s;return function Gl(n,r,s,a){const l=co(n,r,s);return co(n,r+1,a)||l}(n,I,l,h)?ou(n,I+2,v?a.call(v,l,h):a(l,h)):Sg(n,I+2)}function V0(n,r){const s=Sn();let a;const l=n+22;s.firstCreatePass?(a=function eI(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=Di(a.type)),v=Gn(hl);try{const I=Ls(!1),S=h();return Ls(I),function Qm(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,gt(),l,S),S}finally{Gn(v)}}function U0(n,r,s){const a=n+22,l=gt(),h=bi(l,a);return Mg(l,a)?function O0(n,r,s,a,l,h){const v=r+s;return co(n,v,l)?ou(n,v+1,h?a.call(h,l):a(l)):Sg(n,v+1)}(l,A(),r,h.transform,s,h):h.transform(s)}function B0(n,r,s,a){const l=n+22,h=gt(),v=bi(h,l);return Mg(h,l)?P0(h,A(),r,v.transform,s,a,v):v.transform(s,a)}function Mg(n,r){return n[1].data[r].pure}function d_(n){return r=>{setTimeout(n,void 0,r)}}const _l=class iI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),v=a;if(r&&"object"==typeof r){const S=r;l=S.next?.bind(S),h=S.error?.bind(S),v=S.complete?.bind(S)}this.__isAsync&&(h=d_(h),l&&(l=d_(l)),v&&(v=d_(v)));const I=super.subscribe({next:l,error:h,complete:v});return r instanceof k.w0&&r.add(I),I}};function sI(){return this._results[Wi()]()}class h_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Wi(),a=h_.prototype;a[s]||(a[s]=sI)}get changes(){return this._changes||(this._changes=new _l)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Hi(r);(this._changesDetected=!function ra(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xg=(()=>{class n{}return n.__NG_ELEMENT_ID__=uI,n})();const oI=xg,aI=class extends oI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Ac(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(a)),Fp(a,l,r),new $l(l)}};function uI(){return xy(Dr(),gt())}function xy(n,r){return 4&n.type?new aI(r,n,U(n,r)):null}let Ry=(()=>{class n{}return n.__NG_ELEMENT_ID__=lI,n})();function lI(){return H0(Dr(),gt())}const cI=Ry,j0=class extends cI{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return U(this._hostTNode,this._hostLView)}get injector(){return new Uo(this._hostTNode,this._hostLView)}get parentInjector(){const r=Lt(this._hostTNode,this._hostLView);if(va(r)){const s=Wr(r,this._hostLView),a=Ai(r);return new Uo(s[1].data[a+8],s)}return new Uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=$0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const v=r.createEmbeddedView(s||{},h);return this.insert(v,l),v}createComponent(r,s,a,l,h){const v=r&&!function wo(n){return"function"==typeof n}(r);let I;if(v)I=s;else{const J=s||{};I=J.index,a=J.injector,l=J.projectableNodes,h=J.environmentInjector||J.ngModuleRef}const S=v?r:new Rc(dn(r)),V=a||this.parentInjector;if(!h&&null==S.ngModule){const Te=(v?V:this.parentInjector).get(Mu,null);Te&&(h=Te)}const Z=S.create(V,l,void 0,h);return this.insert(Z.hostView,I),Z}insert(r,s){const a=r._lView,l=a[1];if(function Wo(n){return Zr(n[3])}(a)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const J=a[3],Te=new j0(J,J[6],J[3]);Te.detach(Te.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function Kg(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],Ju(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function cl(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const I=r[19];null!==I&&I.insertView(n),r[2]|=64}(l,a,v,h);const I=lp(h,v),S=a[11],V=md(S,v[7]);return null!==V&&function Ol(n,r,s,a,l,h){a[0]=l,a[6]=r,yd(n,a,s,1,l,h)}(l,v[6],S,a,V,I),r.attachToViewContainerRef(),Ju(f_(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=$0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=rp(this._lContainer,s);a&&(Us(f_(this._lContainer),s),Yg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=rp(this._lContainer,s);return a&&null!=Us(f_(this._lContainer),s)?new $l(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function $0(n){return n[8]}function f_(n){return n[8]||(n[8]=[])}function H0(n,r){let s;const a=r[n.index];if(Zr(a))s=a;else{let l;if(8&n.type)l=ir(a);else{const h=r[11];l=h.createComment("");const v=Vr(n,r);dl(h,md(h,v),l,function Xg(n,r){return n.nextSibling(r)}(h,v),!1)}r[n.index]=s=Yp(a,r,l,n),ef(r,s)}return new j0(s,n,r)}class p_{constructor(r){this.queryList=r,this.matches=null}clone(){return new p_(this.queryList)}setDirty(){this.queryList.setDirty()}}class g_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);l.push(this.queries[v.indexInDeclarationView].clone())}return new g_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Q0(r,s).matches&&this.queries[s].setDirty()}}class G0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class m_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new m_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class y_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new y_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,fI(s,h)),this.matchTNodeWithReadOption(r,s,_o(s,r,h,!1,!1))}else a===xg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,_o(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===W||l===Ry||l===xg&&4&s.type)this.addMatch(s.index,-2);else{const h=_o(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function fI(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function gI(n,r,s,a){return-1===s?function pI(n,r){return 11&n.type?U(n,r):4&n.type?xy(n,r):null}(r,n):-2===s?function mI(n,r,s){return s===W?U(r,n):s===xg?xy(r,n):s===Ry?H0(r,n):void 0}(n,r,a):Vo(n,n[1],s,r)}function z0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,v=s.matches,I=[];for(let S=0;S<v.length;S+=2){const V=v[S];I.push(V<0?null:gI(r,h[V],v[S+1],s.metadata.read))}l.matches=I}return l.matches}function v_(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const v=z0(n,r,l,s);for(let I=0;I<h.length;I+=2){const S=h[I];if(S>0)a.push(v[I/2]);else{const V=h[I+1],Z=r[-S];for(let J=10;J<Z.length;J++){const Te=Z[J];Te[17]===Te[3]&&v_(Te[1],Te,V,a)}if(null!==Z[9]){const J=Z[9];for(let Te=0;Te<J.length;Te++){const je=J[Te];v_(je[1],je,V,a)}}}}}return a}function Z0(n){const r=gt(),s=Sn(),a=pa();Fo(a+1);const l=Q0(s,a);if(n.dirty&&function zs(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?v_(s,r,a,[]):z0(s,r,l,a);n.reset(h,Re),n.notifyOnChanges()}return!0}return!1}function W0(n,r,s,a){const l=Sn();if(l.firstCreatePass){const h=Dr();(function Y0(n,r,s){null===n.queries&&(n.queries=new m_),n.queries.track(new y_(r,s))})(l,new G0(r,s,a),h.index),function _I(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function K0(n,r,s){const a=new h_(4==(4&s));Up(n,r,a,a.destroy),null===r[19]&&(r[19]=new g_),r[19].queries.push(new p_(a))}(l,gt(),s)}function q0(){return function vI(n,r){return n[19].queries[r].queryList}(gt(),pa())}function Q0(n,r){return n.queries.getByIndex(r)}function Oy(...n){}const mE=new mr("Application Initializer");let Py=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Oy,this.reject=Oy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(yf(h))s.push(h);else if(ig(h)){const v=new Promise((I,S)=>{h.subscribe({complete:I,error:S})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Br(mE,8))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yE=new mr("AppId",{providedIn:"root",factory:function vE(){return`${D_()}${D_()}${D_()}`}});function D_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _E=new mr("Platform Initializer"),BI=new mr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),EE=new mr("appBootstrapListener");let jI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ky=new mr("LocaleId",{providedIn:"root",factory:()=>M(ky,mt.Optional|mt.SkipSelf)||function $I(){return typeof $localize<"u"&&$localize.locale||Ql}()}),HI=new mr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let zI=(()=>{class n{compileModuleSync(s){return new u_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=Nu(Fr(s).declarations).reduce((v,I)=>{const S=dn(I);return S&&v.push(new Rc(S)),v},[]);return new GI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qI=(()=>Promise.resolve(0))();function C_(n){typeof Zone>"u"?qI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class hu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _l(!1),this.onMicrotaskEmpty=new _l(!1),this.onStable=new _l(!1),this.onError=new _l(!1),typeof Zone>"u")throw new Ve(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function KI(){let n=it.requestAnimationFrame,r=it.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function JI(n){const r=()=>{!function QI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(it,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,T_(n),n.isCheckStableRunning=!0,b_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),T_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,v,I)=>{try{return DE(n),s.invokeTask(l,h,v,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),CE(n)}},onInvoke:(s,a,l,h,v,I,S)=>{try{return DE(n),s.invoke(l,h,v,I,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),CE(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,T_(n),b_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hu.isInAngularZone())throw new Ve(909,!1)}static assertNotInAngularZone(){if(hu.isInAngularZone())throw new Ve(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+l,r,YI,Oy,Oy);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const YI={};function b_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function T_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function DE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CE(n){n._nesting--,b_(n)}class XI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _l,this.onMicrotaskEmpty=new _l,this.onStable=new _l,this.onError=new _l}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const bE=new mr(""),TE=new mr("");let A_,eD=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,A_||(function tD(n){A_=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hu.assertNotInAngularZone(),C_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())C_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Br(hu),Br(AE),Br(TE))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),AE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return A_?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Gc=null;const SE=new mr("AllowMultipleToken"),S_=new mr("PlatformDestroyListeners");class iD{constructor(r,s){this.name=r,this.token=s}}function xE(n,r,s=[]){const a=`Platform: ${r}`,l=new mr(a);return(h=[])=>{let v=M_();if(!v||v.injector.get(SE,!1)){const I=[...s,...h,{provide:l,useValue:!0}];n?n(I):function sD(n){if(Gc&&!Gc.get(SE,!1))throw new Ve(400,!1);Gc=n;const r=n.get(NE);(function ME(n){const r=n.get(_E,null);r&&r.forEach(s=>s())})(n)}(function RE(n=[],r){return ku.create({name:r,providers:[{provide:id,useValue:"platform"},{provide:S_,useValue:new Set([()=>Gc=null])},...n]})}(I,a))}return function aD(n){const r=M_();if(!r)throw new Ve(401,!1);return r}()}}function M_(){return Gc?.get(NE)??null}let NE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function PE(n,r){let s;return s="noop"===n?new XI:("zone.js"===n?void 0:n)||new hu(r),s}(a?.ngZone,function OE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:hu,useValue:l}];return l.run(()=>{const v=ku.create({providers:h,parent:this.injector,name:s.moduleType.name}),I=s.create(v),S=I.injector.get(cd,null);if(!S)throw new Ve(402,!1);return l.runOutsideAngular(()=>{const V=l.onError.subscribe({next:Z=>{S.handleError(Z)}});I.onDestroy(()=>{Ly(this._modules,I),V.unsubscribe()})}),function kE(n,r,s){try{const a=s();return yf(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(S,l,()=>{const V=I.injector.get(Py);return V.runInitializers(),V.donePromise.then(()=>(function o(n){dt(n,"Expected localeId to be defined"),"string"==typeof n&&(t=n.toLowerCase().replace(/_/g,"-"))}(I.injector.get(ky,Ql)||Ql),this._moduleDoBootstrap(I),I))})})}bootstrapModule(s,a=[]){const l=FE({},a);return function nD(n,r,s){const a=new u_(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Fy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ve(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(S_,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Br(ku))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function FE(n,r){return Array.isArray(r)?r.reduce(FE,n):{...n,...r}}let Fy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new C.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new C.y(I=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{hu.assertNotInAngularZone(),C_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{S.unsubscribe(),V.unsubscribe()}});this.isStable=(0,ge.T)(h,v.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof ud;if(!this._injector.get(Py).done)throw!l&&kr(s),new Ve(405,false);let v;v=l?s:this._injector.get(f).resolveComponentFactory(s),this.componentTypes.push(v.componentType);const I=function rD(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Sf),V=v.create(ku.NULL,[],a||v.selector,I),Z=V.location.nativeElement,J=V.injector.get(bE,null);return J?.registerApplication(Z),V.onDestroy(()=>{this.detachView(V.hostView),Ly(this.components,V),J?.unregisterApplication(Z)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new Ve(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Ly(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(EE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Ly(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ve(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Br(hu),Br(Mu),Br(cd))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ly(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let VE=!0,UE=!1;function lD(){return UE=!0,VE}function cD(){if(UE)throw new Error("Cannot enable prod mode after platform setup.");VE=!1}let dD=(()=>{class n{}return n.__NG_ELEMENT_ID__=hD,n})();function hD(n){return function fD(n,r,s){if(Qr(n)&&!s){const a=On(n.index,r);return new $l(a,a)}return 47&n.type?new $l(r[16],r):null}(Dr(),gt(),16==(16&n))}class HE{constructor(){}supports(r){return Nc(r)}create(r){return new _D(r)}}const vD=(n,r)=>r;class _D{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||vD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<zE(a,l,h)?s:a,I=zE(v,l,h),S=v.currentIndex;if(v===a)l--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)l++;else{h||(h=[]);const V=I-l,Z=S-l;if(V!=Z){for(let Te=0;Te<V;Te++){const je=Te<h.length?h[Te]:h[Te]=0,ht=je+Te;Z<=ht&&ht<V&&(h[Te]=je+1)}h[v.previousIndex]=Z-V}}I!==S&&r(v,I,S)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Nc(r))throw new Ve(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let I=0;I<this.length;I++)h=r[I],v=this._trackByFn(I,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,I)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,I),a=!0),s=s._next}else l=0,function df(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Wi()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,I=>{v=this._trackByFn(l,I),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,I,v,l)),Object.is(s.item,I)||this._addIdentityChange(s,I)):(s=this._mismatch(s,I,v,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new ED(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new GE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ED{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class GE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new wD,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class ZE{constructor(){}supports(r){return r instanceof Map||hf(r)}create(){return new ID}}class ID{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||hf(r)))throw new Ve(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,v=l._next;return h&&(h._next=v),v&&(v._prev=h),l._next=null,l._prev=null,l}const a=new DD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class DD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WE(){return new P_([new HE])}let P_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||WE()),deps:[[n,new En,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ve(901,!1)}}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:WE}),n})();function qE(){return new k_([new ZE])}let k_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||qE()),deps:[[n,new En,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new Ve(901,!1)}}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:qE}),n})();const TD=xE(null,"core",[]);let AD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Br(Fy))},n.\u0275mod=Bt({type:n}),n.\u0275inj=tn({}),n})();function SD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Rt,ke,L)=>{L.d(ke,{Fj:()=>ce,qu:()=>yo,u:()=>Qi,sg:()=>Ci,u5:()=>Os,JJ:()=>Ze,JL:()=>ye,On:()=>ut,YN:()=>Zo,wV:()=>mn,UX:()=>Zs,EJ:()=>Oi,kI:()=>ee,_Y:()=>St,Kr:()=>Js});var p=L(4650),k=L(6895),C=L(8996),ge=L(9751),le=L(4742),we=L(8421),Y=L(7669),Ae=L(5403),be=L(3268),K=L(1810),re=L(4004);let nt=(()=>{class P{constructor(A,z){this._renderer=A,this._elementRef=z,this.onChange=qe=>{},this.onTouched=()=>{}}setProperty(A,z){this._renderer.setProperty(this._elementRef.nativeElement,A,z)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(p.Qsj),p.Y36(p.SBq))},P.\u0275dir=p.lG2({type:P}),P})(),et=(()=>{class P extends nt{}return P.\u0275fac=function(){let R;return function(z){return(R||(R=p.n5z(P)))(z||P)}}(),P.\u0275dir=p.lG2({type:P,features:[p.qOj]}),P})();const Ve=new p.OlP("NgValueAccessor"),De={provide:Ve,useExisting:(0,p.Gpc)(()=>ce),multi:!0},Et=new p.OlP("CompositionEventMode");let ce=(()=>{class P extends nt{constructor(A,z,qe){super(A,z),this._compositionMode=qe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Dt(){const P=(0,k.q)()?(0,k.q)().getUserAgent():"";return/android (\d+)/.test(P.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Et,8))},P.\u0275dir=p.lG2({type:P,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,z){1&A&&p.NdJ("input",function(kt){return z._handleInput(kt.target.value)})("blur",function(){return z.onTouched()})("compositionstart",function(){return z._compositionStart()})("compositionend",function(kt){return z._compositionEnd(kt.target.value)})},features:[p._Bn([De]),p.qOj]}),P})();function Qe(P){return null==P||("string"==typeof P||Array.isArray(P))&&0===P.length}function Be(P){return null!=P&&"number"==typeof P.length}const Ge=new p.OlP("NgValidators"),X=new p.OlP("NgAsyncValidators"),Me=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ee{static min(R){return function Ie(P){return R=>{if(Qe(R.value)||Qe(P))return null;const A=parseFloat(R.value);return!isNaN(A)&&A<P?{min:{min:P,actual:R.value}}:null}}(R)}static max(R){return function he(P){return R=>{if(Qe(R.value)||Qe(P))return null;const A=parseFloat(R.value);return!isNaN(A)&&A>P?{max:{max:P,actual:R.value}}:null}}(R)}static required(R){return function Ne(P){return Qe(P.value)?{required:!0}:null}(R)}static requiredTrue(R){return function lt(P){return!0===P.value?null:{required:!0}}(R)}static email(R){return function pt(P){return Qe(P.value)||Me.test(P.value)?null:{email:!0}}(R)}static minLength(R){return function _t(P){return R=>Qe(R.value)||!Be(R.value)?null:R.value.length<P?{minlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function Pe(P){return R=>Be(R.value)&&R.value.length>P?{maxlength:{requiredLength:P,actualLength:R.value.length}}:null}(R)}static pattern(R){return function dt(P){if(!P)return Se;let R,A;return"string"==typeof P?(A="","^"!==P.charAt(0)&&(A+="^"),A+=P,"$"!==P.charAt(P.length-1)&&(A+="$"),R=new RegExp(A)):(A=P.toString(),R=P),z=>{if(Qe(z.value))return null;const qe=z.value;return R.test(qe)?null:{pattern:{requiredPattern:A,actualValue:qe}}}}(R)}static nullValidator(R){return null}static compose(R){return Tn(R)}static composeAsync(R){return rr(R)}}function Se(P){return null}function at(P){return null!=P}function Vt(P){return(0,p.QGY)(P)?(0,C.D)(P):P}function Ht(P){let R={};return P.forEach(A=>{R=null!=A?{...R,...A}:R}),0===Object.keys(R).length?null:R}function Nt(P,R){return R.map(A=>A(P))}function tn(P){return P.map(R=>function yn(P){return!P.validate}(R)?R:A=>R.validate(A))}function Tn(P){if(!P)return null;const R=P.filter(at);return 0==R.length?null:function(A){return Ht(Nt(A,R))}}function Kr(P){return null!=P?Tn(tn(P)):null}function rr(P){if(!P)return null;const R=P.filter(at);return 0==R.length?null:function(A){return function ne(...P){const R=(0,Y.jO)(P),{args:A,keys:z}=(0,le.D)(P),qe=new ge.y(kt=>{const{length:qn}=A;if(!qn)return void kt.complete();const Kn=new Array(qn);let yi=qn,us=qn;for(let to=0;to<qn;to++){let no=!1;(0,we.Xf)(A[to]).subscribe((0,Ae.x)(kt,ro=>{no||(no=!0,us--),Kn[to]=ro},()=>yi--,void 0,()=>{(!yi||!no)&&(us||kt.next(z?(0,K.n)(z,Kn):Kn),kt.complete())}))}});return R?qe.pipe((0,be.Z)(R)):qe}(Nt(A,R).map(Vt)).pipe((0,re.U)(Ht))}}function tr(P){return null!=P?rr(tn(P)):null}function In(P,R){return null===P?[R]:Array.isArray(P)?[...P,R]:[P,R]}function br(P){return P._rawValidators}function zt(P){return P._rawAsyncValidators}function Hn(P){return P?Array.isArray(P)?P:[P]:[]}function or(P,R){return Array.isArray(P)?P.includes(R):P===R}function zn(P,R){const A=Hn(R);return Hn(P).forEach(qe=>{or(A,qe)||A.push(qe)}),A}function mt(P,R){return Hn(R).filter(A=>!or(P,A))}class Un{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Kr(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=tr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,A){return!!this.control&&this.control.hasError(R,A)}getError(R,A){return this.control?this.control.getError(R,A):null}}class gn extends Un{get formDirective(){return null}get path(){return null}}class Gn extends Un{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _r{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ze=(()=>{class P extends _r{constructor(A){super(A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(Gn,2))},P.\u0275dir=p.lG2({type:P,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,z){2&A&&p.ekj("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)},features:[p.qOj]}),P})(),ye=(()=>{class P extends _r{constructor(A){super(A)}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(gn,10))},P.\u0275dir=p.lG2({type:P,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,z){2&A&&p.ekj("ng-untouched",z.isUntouched)("ng-touched",z.isTouched)("ng-pristine",z.isPristine)("ng-dirty",z.isDirty)("ng-valid",z.isValid)("ng-invalid",z.isInvalid)("ng-pending",z.isPending)("ng-submitted",z.isSubmitted)},features:[p.qOj]}),P})();const Bt="VALID",$n="INVALID",_n="PENDING",Wn="DISABLED";function pn(P){return(kr(P)?P.validators:P)||null}function dn(P){return Array.isArray(P)?Kr(P):P||null}function Qn(P,R){return(kr(R)?R.asyncValidators:P)||null}function ar(P){return Array.isArray(P)?tr(P):P||null}function kr(P){return null!=P&&!Array.isArray(P)&&"object"==typeof P}function Fr(P,R,A){const z=P.controls;if(!(R?Object.keys(z):z).length)throw new p.vHH(1e3,"");if(!z[A])throw new p.vHH(1001,"")}function pr(P,R,A){P._forEachChild((z,qe)=>{if(void 0===A[qe])throw new p.vHH(1002,"")})}class ve{constructor(R,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=R,this._rawAsyncValidators=A,this._composedValidatorFn=dn(this._rawValidators),this._composedAsyncValidatorFn=ar(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===Bt}get invalid(){return this.status===$n}get pending(){return this.status==_n}get disabled(){return this.status===Wn}get enabled(){return this.status!==Wn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._rawValidators=R,this._composedValidatorFn=dn(R)}setAsyncValidators(R){this._rawAsyncValidators=R,this._composedAsyncValidatorFn=ar(R)}addValidators(R){this.setValidators(zn(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(zn(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(mt(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(mt(R,this._rawAsyncValidators))}hasValidator(R){return or(this._rawValidators,R)}hasAsyncValidator(R){return or(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=_n,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=Wn,this.errors=null,this._forEachChild(z=>{z.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(z=>z(!0))}enable(R={}){const A=this._parentMarkedDirty(R.onlySelf);this.status=Bt,this._forEachChild(z=>{z.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:A}),this._onDisabledChange.forEach(z=>z(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bt||this.status===_n)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wn:Bt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=_n,this._hasOwnPendingAsyncValidator=!0;const A=Vt(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(z,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,A={}){this.errors=R,this._updateControlsErrors(!1!==A.emitEvent)}get(R){let A=R;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((z,qe)=>z&&z._find(qe),this)}getError(R,A){const z=A?this.get(A):this;return z&&z.errors?z.errors[R]:null}hasError(R,A){return!!this.getError(R,A)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Wn:this.errors?$n:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_n)?_n:this._anyControlsHaveStatus($n)?$n:Bt}_anyControlsHaveStatus(R){return this._anyControls(A=>A.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){kr(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}}class de extends ve{constructor(R,A,z){super(pn(A),Qn(z,A)),this.controls=R,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,A){return this.controls[R]?this.controls[R]:(this.controls[R]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(R,A,z={}){this.registerControl(R,A),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}removeControl(R,A={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(R,A,z={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],A&&this.registerControl(R,A),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,A={}){pr(this,0,R),Object.keys(R).forEach(z=>{Fr(this,!0,z),this.controls[z].setValue(R[z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(R,A={}){null!=R&&(Object.keys(R).forEach(z=>{const qe=this.controls[z];qe&&qe.patchValue(R[z],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(R={},A={}){this._forEachChild((z,qe)=>{z.reset(R[qe],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(R,A,z)=>(R[z]=A.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(A,z)=>!!z._syncPendingControls()||A);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(A=>{const z=this.controls[A];z&&R(z,A)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[A,z]of Object.entries(this.controls))if(this.contains(A)&&R(z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(A,z,qe)=>((z.enabled||this.disabled)&&(A[qe]=z.value),A))}_reduceChildren(R,A){let z=R;return this._forEachChild((qe,kt)=>{z=A(z,qe,kt)}),z}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}class st extends de{}function ln(P,R){return[...R.path,P]}function Yt(P,R){nr(P,R),R.valueAccessor.writeValue(P.value),P.disabled&&R.valueAccessor.setDisabledState?.(!0),function gs(P,R){R.valueAccessor.registerOnChange(A=>{P._pendingValue=A,P._pendingChange=!0,P._pendingDirty=!0,"change"===P.updateOn&&Ar(P,R)})}(P,R),function ss(P,R){const A=(z,qe)=>{R.valueAccessor.writeValue(z),qe&&R.viewToModelUpdate(z)};P.registerOnChange(A),R._registerOnDestroy(()=>{P._unregisterOnChange(A)})}(P,R),function Ui(P,R){R.valueAccessor.registerOnTouched(()=>{P._pendingTouched=!0,"blur"===P.updateOn&&P._pendingChange&&Ar(P,R),"submit"!==P.updateOn&&P.markAsTouched()})}(P,R),function cn(P,R){if(R.valueAccessor.setDisabledState){const A=z=>{R.valueAccessor.setDisabledState(z)};P.registerOnDisabledChange(A),R._registerOnDestroy(()=>{P._unregisterOnDisabledChange(A)})}}(P,R)}function Dn(P,R,A=!0){const z=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(z),R.valueAccessor.registerOnTouched(z)),$r(P,R),P&&(R._invokeOnDestroyCallbacks(),P._registerOnCollectionChange(()=>{}))}function jr(P,R){P.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(R)})}function nr(P,R){const A=br(P);null!==R.validator?P.setValidators(In(A,R.validator)):"function"==typeof A&&P.setValidators([A]);const z=zt(P);null!==R.asyncValidator?P.setAsyncValidators(In(z,R.asyncValidator)):"function"==typeof z&&P.setAsyncValidators([z]);const qe=()=>P.updateValueAndValidity();jr(R._rawValidators,qe),jr(R._rawAsyncValidators,qe)}function $r(P,R){let A=!1;if(null!==P){if(null!==R.validator){const qe=br(P);if(Array.isArray(qe)&&qe.length>0){const kt=qe.filter(qn=>qn!==R.validator);kt.length!==qe.length&&(A=!0,P.setValidators(kt))}}if(null!==R.asyncValidator){const qe=zt(P);if(Array.isArray(qe)&&qe.length>0){const kt=qe.filter(qn=>qn!==R.asyncValidator);kt.length!==qe.length&&(A=!0,P.setAsyncValidators(kt))}}}const z=()=>{};return jr(R._rawValidators,z),jr(R._rawAsyncValidators,z),A}function Ar(P,R){P._pendingDirty&&P.markAsDirty(),P.setValue(P._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(P._pendingValue),P._pendingChange=!1}function Ki(P,R){if(!P.hasOwnProperty("model"))return!1;const A=P.model;return!!A.isFirstChange()||!Object.is(R,A.currentValue)}function xi(P,R){if(!R)return null;let A,z,qe;return Array.isArray(R),R.forEach(kt=>{kt.constructor===ce?A=kt:function ti(P){return Object.getPrototypeOf(P.constructor)===et}(kt)?z=kt:qe=kt}),qe||z||A||null}function Zr(P,R){const A=P.indexOf(R);A>-1&&P.splice(A,1)}function js(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}const Qr=class extends ve{constructor(R=null,A,z){super(pn(A),Qn(z,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kr(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=js(R)?R.value:R)}setValue(R,A={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(z=>z(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(R,A={}){this.setValue(R,A)}reset(R=this.defaultValue,A={}){this._applyFormState(R),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Zr(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Zr(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){js(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},xe={provide:Gn,useExisting:(0,p.Gpc)(()=>ut)},Fe=(()=>Promise.resolve())();let ut=(()=>{class P extends Gn{constructor(A,z,qe,kt,qn){super(),this._changeDetectorRef=qn,this.control=new Qr,this._registered=!1,this.update=new p.vpe,this._parent=A,this._setValidators(z),this._setAsyncValidators(qe),this.valueAccessor=xi(0,kt)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const z=A.name.previousValue;this.formDirective.removeControl({name:z,path:this._getPath(z)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),Ki(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){Fe.then(()=>{this.control.setValue(A,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(A){const z=A.isDisabled.currentValue,qe=0!==z&&(0,p.D6c)(z);Fe.then(()=>{qe&&!this.control.disabled?this.control.disable():!qe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(A){return this._parent?ln(A,this._parent):[A]}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(gn,9),p.Y36(Ge,10),p.Y36(X,10),p.Y36(Ve,10),p.Y36(p.sBO,8))},P.\u0275dir=p.lG2({type:P,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([xe]),p.qOj,p.TTD]}),P})(),St=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=p.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),P})();const Zt={provide:Ve,useExisting:(0,p.Gpc)(()=>mn),multi:!0};let mn=(()=>{class P extends et{writeValue(A){this.setProperty("value",A??"")}registerOnChange(A){this.onChange=z=>{A(""==z?null:parseFloat(z))}}}return P.\u0275fac=function(){let R;return function(z){return(R||(R=p.n5z(P)))(z||P)}}(),P.\u0275dir=p.lG2({type:P,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(A,z){1&A&&p.NdJ("input",function(kt){return z.onChange(kt.target.value)})("blur",function(){return z.onTouched()})},features:[p._Bn([Zt]),p.qOj]}),P})(),hi=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({}),P})();const Ni=new p.OlP("NgModelWithFormControlWarning"),Di={provide:gn,useExisting:(0,p.Gpc)(()=>Ci)};let Ci=(()=>{class P extends gn{constructor(A,z){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(A),this._setAsyncValidators(z)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($r(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const z=this.form.get(A.path);return Yt(z,A),z.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),z}getControl(A){return this.form.get(A.path)}removeControl(A){Dn(A.control||null,A,!1),function ni(P,R){const A=P.indexOf(R);A>-1&&P.splice(A,1)}(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,z){this.form.get(A.path).setValue(z)}onSubmit(A){return this.submitted=!0,function os(P,R){P._syncPendingControls(),R.forEach(A=>{const z=A.control;"submit"===z.updateOn&&z._pendingChange&&(A.viewToModelUpdate(z._pendingValue),z._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(A),"dialog"===A?.target?.method}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const z=A.control,qe=this.form.get(A.path);z!==qe&&(Dn(z||null,A),(P=>P instanceof Qr)(qe)&&(Yt(qe,A),A.control=qe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const z=this.form.get(A.path);(function Mi(P,R){nr(P,R)})(z,A),z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const z=this.form.get(A.path);z&&function xr(P,R){return $r(P,R)}(z,A)&&z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nr(this.form,this),this._oldForm&&$r(this._oldForm,this)}_checkFormPresent(){}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(Ge,10),p.Y36(X,10))},P.\u0275dir=p.lG2({type:P,selectors:[["","formGroup",""]],hostBindings:function(A,z){1&A&&p.NdJ("submit",function(kt){return z.onSubmit(kt)})("reset",function(){return z.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Di]),p.qOj,p.TTD]}),P})();const Po={provide:Gn,useExisting:(0,p.Gpc)(()=>Qi)};let Qi=(()=>{class P extends Gn{constructor(A,z,qe,kt,qn){super(),this._ngModelWarningConfig=qn,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(z),this._setAsyncValidators(qe),this.valueAccessor=xi(0,kt)}set isDisabled(A){}ngOnChanges(A){this._added||this._setUpControl(),Ki(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return ln(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return P._ngModelWarningSentOnce=!1,P.\u0275fac=function(A){return new(A||P)(p.Y36(gn,13),p.Y36(Ge,10),p.Y36(X,10),p.Y36(Ve,10),p.Y36(Ni,8))},P.\u0275dir=p.lG2({type:P,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([Po]),p.qOj,p.TTD]}),P})();const fi={provide:Ve,useExisting:(0,p.Gpc)(()=>Oi),multi:!0};function Rr(P,R){return null==P?`${R}`:(R&&"object"==typeof R&&(R="Object"),`${P}: ${R}`.slice(0,50))}let Oi=(()=>{class P extends et{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){this.value=A;const qe=Rr(this._getOptionId(A),A);this.setProperty("value",qe)}registerOnChange(A){this.onChange=z=>{this.value=this._getOptionValue(z),A(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(A){for(const z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(z),A))return z;return null}_getOptionValue(A){const z=function pi(P){return P.split(":")[0]}(A);return this._optionMap.has(z)?this._optionMap.get(z):A}}return P.\u0275fac=function(){let R;return function(z){return(R||(R=p.n5z(P)))(z||P)}}(),P.\u0275dir=p.lG2({type:P,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(A,z){1&A&&p.NdJ("change",function(kt){return z.onChange(kt.target.value)})("blur",function(){return z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([fi]),p.qOj]}),P})(),Zo=(()=>{class P{constructor(A,z,qe){this._element=A,this._renderer=z,this._select=qe,this._select&&(this.id=this._select._registerOption())}set ngValue(A){null!=this._select&&(this._select._optionMap.set(this.id,A),this._setElementValue(Rr(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._setElementValue(A),this._select&&this._select.writeValue(this._select.value)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Oi,9))},P.\u0275dir=p.lG2({type:P,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),P})();const ai={provide:Ve,useExisting:(0,p.Gpc)(()=>gi),multi:!0};function po(P,R){return null==P?`${R}`:("string"==typeof R&&(R=`'${R}'`),R&&"object"==typeof R&&(R="Object"),`${P}: ${R}`.slice(0,50))}let gi=(()=>{class P extends et{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){let z;if(this.value=A,Array.isArray(A)){const qe=A.map(kt=>this._getOptionId(kt));z=(kt,qn)=>{kt._setSelected(qe.indexOf(qn.toString())>-1)}}else z=(qe,kt)=>{qe._setSelected(!1)};this._optionMap.forEach(z)}registerOnChange(A){this.onChange=z=>{const qe=[],kt=z.selectedOptions;if(void 0!==kt){const qn=kt;for(let Kn=0;Kn<qn.length;Kn++){const us=this._getOptionValue(qn[Kn].value);qe.push(us)}}else{const qn=z.options;for(let Kn=0;Kn<qn.length;Kn++){const yi=qn[Kn];if(yi.selected){const us=this._getOptionValue(yi.value);qe.push(us)}}}this.value=qe,A(qe)}}_registerOption(A){const z=(this._idCounter++).toString();return this._optionMap.set(z,A),z}_getOptionId(A){for(const z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(z)._value,A))return z;return null}_getOptionValue(A){const z=function fa(P){return P.split(":")[0]}(A);return this._optionMap.has(z)?this._optionMap.get(z)._value:A}}return P.\u0275fac=function(){let R;return function(z){return(R||(R=p.n5z(P)))(z||P)}}(),P.\u0275dir=p.lG2({type:P,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(A,z){1&A&&p.NdJ("change",function(kt){return z.onChange(kt.target)})("blur",function(){return z.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ai]),p.qOj]}),P})(),Js=(()=>{class P{constructor(A,z,qe){this._element=A,this._renderer=z,this._select=qe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(A){null!=this._select&&(this._value=A,this._setElementValue(po(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._select?(this._value=A,this._setElementValue(po(this.id,A)),this._select.writeValue(this._select.value)):this._setElementValue(A)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}_setSelected(A){this._renderer.setProperty(this._element.nativeElement,"selected",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return P.\u0275fac=function(A){return new(A||P)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(gi,9))},P.\u0275dir=p.lG2({type:P,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),P})(),Sn=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[hi]}),P})(),Os=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[Sn]}),P})(),Zs=(()=>{class P{static withConfig(A){return{ngModule:P,providers:[{provide:Ni,useValue:A.warnOnNgModelWithFormControl}]}}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=p.oAB({type:P}),P.\u0275inj=p.cJS({imports:[Sn]}),P})();class Dr extends ve{constructor(R,A,z){super(pn(A),Qn(z,A)),this.controls=R,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(R){return this.controls[this._adjustIndex(R)]}push(R,A={}){this.controls.push(R),this._registerControl(R),this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}insert(R,A,z={}){this.controls.splice(R,0,A),this._registerControl(A),this.updateValueAndValidity({emitEvent:z.emitEvent})}removeAt(R,A={}){let z=this._adjustIndex(R);z<0&&(z=0),this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),this.controls.splice(z,1),this.updateValueAndValidity({emitEvent:A.emitEvent})}setControl(R,A,z={}){let qe=this._adjustIndex(R);qe<0&&(qe=0),this.controls[qe]&&this.controls[qe]._registerOnCollectionChange(()=>{}),this.controls.splice(qe,1),A&&(this.controls.splice(qe,0,A),this._registerControl(A)),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(R,A={}){pr(this,0,R),R.forEach((z,qe)=>{Fr(this,!1,qe),this.at(qe).setValue(z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(R,A={}){null!=R&&(R.forEach((z,qe)=>{this.at(qe)&&this.at(qe).patchValue(z,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(R=[],A={}){this._forEachChild((z,qe)=>{z.reset(R[qe],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this.controls.map(R=>R.getRawValue())}clear(R={}){this.controls.length<1||(this._forEachChild(A=>A._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:R.emitEvent}))}_adjustIndex(R){return R<0?R+this.length:R}_syncPendingControls(){let R=this.controls.reduce((A,z)=>!!z._syncPendingControls()||A,!1);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){this.controls.forEach((A,z)=>{R(A,z)})}_updateValue(){this.value=this.controls.filter(R=>R.enabled||this.disabled).map(R=>R.value)}_anyControls(R){return this.controls.some(A=>A.enabled&&R(A))}_setUpControls(){this._forEachChild(R=>this._registerControl(R))}_allControlsDisabled(){for(const R of this.controls)if(R.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(R){R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)}_find(R){return this.at(R)??null}}function mi(P){return!!P&&(void 0!==P.asyncValidators||void 0!==P.validators||void 0!==P.updateOn)}let yo=(()=>{class P{constructor(){this.useNonNullable=!1}get nonNullable(){const A=new P;return A.useNonNullable=!0,A}group(A,z=null){const qe=this._reduceControls(A);let kt={};return mi(z)?kt=z:null!==z&&(kt.validators=z.validator,kt.asyncValidators=z.asyncValidator),new de(qe,kt)}record(A,z=null){const qe=this._reduceControls(A);return new st(qe,z)}control(A,z,qe){let kt={};return this.useNonNullable?(mi(z)?kt=z:(kt.validators=z,kt.asyncValidators=qe),new Qr(A,{...kt,nonNullable:!0})):new Qr(A,z,qe)}array(A,z,qe){const kt=A.map(qn=>this._createControl(qn));return new Dr(kt,z,qe)}_reduceControls(A){const z={};return Object.keys(A).forEach(qe=>{z[qe]=this._createControl(A[qe])}),z}_createControl(A){return A instanceof Qr||A instanceof ve?A:Array.isArray(A)?this.control(A[0],A.length>1?A[1]:null,A.length>2?A[2]:null):this.control(A)}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275prov=p.Yz7({token:P,factory:P.\u0275fac,providedIn:Zs}),P})()},1481:(Rt,ke,L)=>{L.d(ke,{Dx:()=>Ze,b2:()=>gn,q6:()=>or});var p=L(6895),k=L(4650);class C extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ge extends C{static makeCurrent(){(0,p.HT)(new ge)}onAndCancel(de,te,Le){return de.addEventListener(te,Le,!1),()=>{de.removeEventListener(te,Le,!1)}}dispatchEvent(de,te){de.dispatchEvent(te)}remove(de){de.parentNode&&de.parentNode.removeChild(de)}createElement(de,te){return(te=te||this.getDefaultDocument()).createElement(de)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(de){return de.nodeType===Node.ELEMENT_NODE}isShadowRoot(de){return de instanceof DocumentFragment}getGlobalEventTarget(de,te){return"window"===te?window:"document"===te?de:"body"===te?de.body:null}getBaseHref(de){const te=function we(){return le=le||document.querySelector("base"),le?le.getAttribute("href"):null}();return null==te?null:function Ae(ve){Y=Y||document.createElement("a"),Y.setAttribute("href",ve);const de=Y.pathname;return"/"===de.charAt(0)?de:`/${de}`}(te)}resetBaseElement(){le=null}getUserAgent(){return window.navigator.userAgent}getCookie(de){return(0,p.Mx)(document.cookie,de)}}let Y,le=null;const be=new k.OlP("TRANSITION_ID"),ne=[{provide:k.ip1,useFactory:function K(ve,de,te){return()=>{te.get(k.CZH).donePromise.then(()=>{const Le=(0,p.q)(),st=de.querySelectorAll(`style[ng-transition="${ve}"]`);for(let jt=0;jt<st.length;jt++)Le.remove(st[jt])})}},deps:[be,p.K0,k.zs3],multi:!0}];let nt=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(te){return new(te||ve)},ve.\u0275prov=k.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const et=new k.OlP("EventManagerPlugins");let Ve=(()=>{class ve{constructor(te,Le){this._zone=Le,this._eventNameToPlugin=new Map,te.forEach(st=>st.manager=this),this._plugins=te.slice().reverse()}addEventListener(te,Le,st){return this._findPluginFor(Le).addEventListener(te,Le,st)}addGlobalEventListener(te,Le,st){return this._findPluginFor(Le).addGlobalEventListener(te,Le,st)}getZone(){return this._zone}_findPluginFor(te){const Le=this._eventNameToPlugin.get(te);if(Le)return Le;const st=this._plugins;for(let jt=0;jt<st.length;jt++){const ln=st[jt];if(ln.supports(te))return this._eventNameToPlugin.set(te,ln),ln}throw new Error(`No event manager plugin found for event ${te}`)}}return ve.\u0275fac=function(te){return new(te||ve)(k.LFG(et),k.LFG(k.R0b))},ve.\u0275prov=k.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Tt{constructor(de){this._doc=de}addGlobalEventListener(de,te,Le){const st=(0,p.q)().getGlobalEventTarget(this._doc,de);if(!st)throw new Error(`Unsupported event target ${st} for event ${te}`);return this.addEventListener(st,te,Le)}}let ze=(()=>{class ve{constructor(){this._stylesSet=new Set}addStyles(te){const Le=new Set;te.forEach(st=>{this._stylesSet.has(st)||(this._stylesSet.add(st),Le.add(st))}),this.onStylesAdded(Le)}onStylesAdded(te){}getAllStyles(){return Array.from(this._stylesSet)}}return ve.\u0275fac=function(te){return new(te||ve)},ve.\u0275prov=k.Yz7({token:ve,factory:ve.\u0275fac}),ve})(),De=(()=>{class ve extends ze{constructor(te){super(),this._doc=te,this._hostNodes=new Map,this._hostNodes.set(te.head,[])}_addStylesToHost(te,Le,st){te.forEach(jt=>{const ln=this._doc.createElement("style");ln.textContent=jt,st.push(Le.appendChild(ln))})}addHost(te){const Le=[];this._addStylesToHost(this._stylesSet,te,Le),this._hostNodes.set(te,Le)}removeHost(te){const Le=this._hostNodes.get(te);Le&&Le.forEach(Dt),this._hostNodes.delete(te)}onStylesAdded(te){this._hostNodes.forEach((Le,st)=>{this._addStylesToHost(te,st,Le)})}ngOnDestroy(){this._hostNodes.forEach(te=>te.forEach(Dt))}}return ve.\u0275fac=function(te){return new(te||ve)(k.LFG(p.K0))},ve.\u0275prov=k.Yz7({token:ve,factory:ve.\u0275fac}),ve})();function Dt(ve){(0,p.q)().remove(ve)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ce=/%COMP%/g;function ee(ve,de,te){for(let Le=0;Le<de.length;Le++){let st=de[Le];Array.isArray(st)?ee(ve,st,te):(st=st.replace(ce,ve),te.push(st))}return te}function Ie(ve){return de=>{if("__ngUnwrap__"===de)return ve;!1===ve(de)&&(de.preventDefault(),de.returnValue=!1)}}let Ne=(()=>{class ve{constructor(te,Le,st){this.eventManager=te,this.sharedStylesHost=Le,this.appId=st,this.rendererByCompId=new Map,this.defaultRenderer=new lt(te)}createRenderer(te,Le){if(!te||!Le)return this.defaultRenderer;switch(Le.encapsulation){case k.ifc.Emulated:{let st=this.rendererByCompId.get(Le.id);return st||(st=new dt(this.eventManager,this.sharedStylesHost,Le,this.appId),this.rendererByCompId.set(Le.id,st)),st.applyToHost(te),st}case 1:case k.ifc.ShadowDom:return new Se(this.eventManager,this.sharedStylesHost,te,Le);default:if(!this.rendererByCompId.has(Le.id)){const st=ee(Le.id,Le.styles,[]);this.sharedStylesHost.addStyles(st),this.rendererByCompId.set(Le.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ve.\u0275fac=function(te){return new(te||ve)(k.LFG(Ve),k.LFG(De),k.LFG(k.AFp))},ve.\u0275prov=k.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class lt{constructor(de){this.eventManager=de,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(de,te){return te?document.createElementNS(Et[te]||te,de):document.createElement(de)}createComment(de){return document.createComment(de)}createText(de){return document.createTextNode(de)}appendChild(de,te){(Pe(de)?de.content:de).appendChild(te)}insertBefore(de,te,Le){de&&(Pe(de)?de.content:de).insertBefore(te,Le)}removeChild(de,te){de&&de.removeChild(te)}selectRootElement(de,te){let Le="string"==typeof de?document.querySelector(de):de;if(!Le)throw new Error(`The selector "${de}" did not match any elements`);return te||(Le.textContent=""),Le}parentNode(de){return de.parentNode}nextSibling(de){return de.nextSibling}setAttribute(de,te,Le,st){if(st){te=st+":"+te;const jt=Et[st];jt?de.setAttributeNS(jt,te,Le):de.setAttribute(te,Le)}else de.setAttribute(te,Le)}removeAttribute(de,te,Le){if(Le){const st=Et[Le];st?de.removeAttributeNS(st,te):de.removeAttribute(`${Le}:${te}`)}else de.removeAttribute(te)}addClass(de,te){de.classList.add(te)}removeClass(de,te){de.classList.remove(te)}setStyle(de,te,Le,st){st&(k.JOm.DashCase|k.JOm.Important)?de.style.setProperty(te,Le,st&k.JOm.Important?"important":""):de.style[te]=Le}removeStyle(de,te,Le){Le&k.JOm.DashCase?de.style.removeProperty(te):de.style[te]=""}setProperty(de,te,Le){de[te]=Le}setValue(de,te){de.nodeValue=te}listen(de,te,Le){return"string"==typeof de?this.eventManager.addGlobalEventListener(de,te,Ie(Le)):this.eventManager.addEventListener(de,te,Ie(Le))}}function Pe(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class dt extends lt{constructor(de,te,Le,st){super(de),this.component=Le;const jt=ee(st+"-"+Le.id,Le.styles,[]);te.addStyles(jt),this.contentAttr=function X(ve){return"_ngcontent-%COMP%".replace(ce,ve)}(st+"-"+Le.id),this.hostAttr=function Me(ve){return"_nghost-%COMP%".replace(ce,ve)}(st+"-"+Le.id)}applyToHost(de){super.setAttribute(de,this.hostAttr,"")}createElement(de,te){const Le=super.createElement(de,te);return super.setAttribute(Le,this.contentAttr,""),Le}}class Se extends lt{constructor(de,te,Le,st){super(de),this.sharedStylesHost=te,this.hostEl=Le,this.shadowRoot=Le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const jt=ee(st.id,st.styles,[]);for(let ln=0;ln<jt.length;ln++){const Yt=document.createElement("style");Yt.textContent=jt[ln],this.shadowRoot.appendChild(Yt)}}nodeOrShadowRoot(de){return de===this.hostEl?this.shadowRoot:de}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(de,te){return super.appendChild(this.nodeOrShadowRoot(de),te)}insertBefore(de,te,Le){return super.insertBefore(this.nodeOrShadowRoot(de),te,Le)}removeChild(de,te){return super.removeChild(this.nodeOrShadowRoot(de),te)}parentNode(de){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(de)))}}let at=(()=>{class ve extends Tt{constructor(te){super(te)}supports(te){return!0}addEventListener(te,Le,st){return te.addEventListener(Le,st,!1),()=>this.removeEventListener(te,Le,st)}removeEventListener(te,Le,st){return te.removeEventListener(Le,st)}}return ve.\u0275fac=function(te){return new(te||ve)(k.LFG(p.K0))},ve.\u0275prov=k.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Vt=["alt","control","meta","shift"],Ht={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nt={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let yn=(()=>{class ve extends Tt{constructor(te){super(te)}supports(te){return null!=ve.parseEventName(te)}addEventListener(te,Le,st){const jt=ve.parseEventName(Le),ln=ve.eventCallback(jt.fullKey,st,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(te,jt.domEventName,ln))}static parseEventName(te){const Le=te.toLowerCase().split("."),st=Le.shift();if(0===Le.length||"keydown"!==st&&"keyup"!==st)return null;const jt=ve._normalizeKey(Le.pop());let ln="",Yt=Le.indexOf("code");if(Yt>-1&&(Le.splice(Yt,1),ln="code."),Vt.forEach(jr=>{const cn=Le.indexOf(jr);cn>-1&&(Le.splice(cn,1),ln+=jr+".")}),ln+=jt,0!=Le.length||0===jt.length)return null;const Dn={};return Dn.domEventName=st,Dn.fullKey=ln,Dn}static matchEventFullKeyCode(te,Le){let st=Ht[te.key]||te.key,jt="";return Le.indexOf("code.")>-1&&(st=te.code,jt="code."),!(null==st||!st)&&(st=st.toLowerCase()," "===st?st="space":"."===st&&(st="dot"),Vt.forEach(ln=>{ln!==st&&(0,Nt[ln])(te)&&(jt+=ln+".")}),jt+=st,jt===Le)}static eventCallback(te,Le,st){return jt=>{ve.matchEventFullKeyCode(jt,te)&&st.runGuarded(()=>Le(jt))}}static _normalizeKey(te){return"esc"===te?"escape":te}}return ve.\u0275fac=function(te){return new(te||ve)(k.LFG(p.K0))},ve.\u0275prov=k.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const or=(0,k.eFA)(k._c5,"browser",[{provide:k.Lbi,useValue:p.bD},{provide:k.g9A,useValue:function In(){ge.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function zt(){return(0,k.RDi)(document),document},deps:[]}]),zn=new k.OlP(""),mt=[{provide:k.rWj,useClass:class re{addToWindow(de){k.dqk.getAngularTestability=(Le,st=!0)=>{const jt=de.findTestabilityInTree(Le,st);if(null==jt)throw new Error("Could not find testability for element.");return jt},k.dqk.getAllAngularTestabilities=()=>de.getAllTestabilities(),k.dqk.getAllAngularRootElements=()=>de.getAllRootElements(),k.dqk.frameworkStabilizers||(k.dqk.frameworkStabilizers=[]),k.dqk.frameworkStabilizers.push(Le=>{const st=k.dqk.getAllAngularTestabilities();let jt=st.length,ln=!1;const Yt=function(Dn){ln=ln||Dn,jt--,0==jt&&Le(ln)};st.forEach(function(Dn){Dn.whenStable(Yt)})})}findTestabilityInTree(de,te,Le){return null==te?null:de.getTestability(te)??(Le?(0,p.q)().isShadowRoot(te)?this.findTestabilityInTree(de,te.host,!0):this.findTestabilityInTree(de,te.parentElement,!0):null)}},deps:[]},{provide:k.lri,useClass:k.dDg,deps:[k.R0b,k.eoX,k.rWj]},{provide:k.dDg,useClass:k.dDg,deps:[k.R0b,k.eoX,k.rWj]}],Un=[{provide:k.zSh,useValue:"root"},{provide:k.qLn,useFactory:function br(){return new k.qLn},deps:[]},{provide:et,useClass:at,multi:!0,deps:[p.K0,k.R0b,k.Lbi]},{provide:et,useClass:yn,multi:!0,deps:[p.K0]},{provide:Ne,useClass:Ne,deps:[Ve,De,k.AFp]},{provide:k.FYo,useExisting:Ne},{provide:ze,useExisting:De},{provide:De,useClass:De,deps:[p.K0]},{provide:Ve,useClass:Ve,deps:[et,k.R0b]},{provide:p.JF,useClass:nt,deps:[]},[]];let gn=(()=>{class ve{constructor(te){}static withServerTransition(te){return{ngModule:ve,providers:[{provide:k.AFp,useValue:te.appId},{provide:be,useExisting:k.AFp},ne]}}}return ve.\u0275fac=function(te){return new(te||ve)(k.LFG(zn,12))},ve.\u0275mod=k.oAB({type:ve}),ve.\u0275inj=k.cJS({providers:[...Un,...mt],imports:[p.ez,k.hGG]}),ve})(),Ze=(()=>{class ve{constructor(te){this._doc=te}getTitle(){return this._doc.title}setTitle(te){this._doc.title=te||""}}return ve.\u0275fac=function(te){return new(te||ve)(k.LFG(p.K0))},ve.\u0275prov=k.Yz7({token:ve,factory:function(te){let Le=null;return Le=te?new te:function fr(){return new Ze((0,k.LFG)(p.K0))}(),Le},providedIn:"root"}),ve})();typeof window<"u"&&window},7001:(Rt,ke,L)=>{L.d(ke,{F0:()=>Jt,rH:()=>lr,yS:()=>an,Bz:()=>Io,lC:()=>Ji});var p=L(4650),k=L(8996),C=L(9646),ge=L(7579);class le extends ge.x{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const m=super._subscribe(E);return!m.closed&&E.next(this._value),m}getValue(){const{hasError:E,thrownError:m,_value:b}=this;if(E)throw m;return this._throwIfClosed(),b}next(E){super.next(this._value=E)}}var we=L(6805),Y=L(9751),Ae=L(4742),be=L(4671),K=L(3268),ne=L(7669),re=L(1810),nt=L(5403),et=L(9672);function Ve(..._){const E=(0,ne.yG)(_),m=(0,ne.jO)(_),{args:b,keys:N}=(0,Ae.D)(_);if(0===b.length)return(0,k.D)([],E);const $=new Y.y(function Tt(_,E,m=be.y){return b=>{ze(E,()=>{const{length:N}=_,$=new Array(N);let ie=N,oe=N;for(let Xe=0;Xe<N;Xe++)ze(E,()=>{const bt=(0,k.D)(_[Xe],E);let Kt=!1;bt.subscribe((0,nt.x)(b,Ut=>{$[Xe]=Ut,Kt||(Kt=!0,oe--),oe||b.next(m($.slice()))},()=>{--ie||b.complete()}))},b)},b)}}(b,E,N?ie=>(0,re.n)(N,ie):be.y));return m?$.pipe((0,K.Z)(m)):$}function ze(_,E,m){_?(0,et.f)(m,_,E):E()}var De=L(7272),Dt=L(8421);function Et(_){return new Y.y(E=>{(0,Dt.Xf)(_()).subscribe(E)})}var ce=L(9635),Je=L(576);function Qe(_,E){const m=(0,Je.m)(_)?_:()=>_,b=N=>N.error(m());return new Y.y(E?N=>E.schedule(b,0,N):b)}var Be=L(515),Ge=L(727),X=L(4482);function Me(){return(0,X.e)((_,E)=>{let m=null;_._refCount++;const b=(0,nt.x)(E,void 0,void 0,void 0,()=>{if(!_||_._refCount<=0||0<--_._refCount)return void(m=null);const N=_._connection,$=m;m=null,N&&(!$||N===$)&&N.unsubscribe(),E.unsubscribe()});_.subscribe(b),b.closed||(m=_.connect())})}class ee extends Y.y{constructor(E,m){super(),this.source=E,this.subjectFactory=m,this._subject=null,this._refCount=0,this._connection=null,(0,X.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Ge.w0;const m=this.getSubject();E.add(this.source.subscribe((0,nt.x)(m,void 0,()=>{this._teardown(),m.complete()},b=>{this._teardown(),m.error(b)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Ge.w0.EMPTY)}return E}refCount(){return Me()(this)}}var Ie=L(6895),he=L(4004),Ne=L(3900),lt=L(5698),pt=L(8675),_t=L(9300),Pe=L(5577),dt=L(590),Se=L(4351),at=L(8505);function Vt(_){return(0,X.e)((E,m)=>{let $,b=null,N=!1;b=E.subscribe((0,nt.x)(m,void 0,void 0,ie=>{$=(0,Dt.Xf)(_(ie,Vt(_)(E))),b?(b.unsubscribe(),b=null,$.subscribe(m)):N=!0})),N&&(b.unsubscribe(),b=null,$.subscribe(m))})}var Ht=L(5026);function Nt(_){return _<=0?()=>Be.E:(0,X.e)((E,m)=>{let b=[];E.subscribe((0,nt.x)(m,N=>{b.push(N),_<b.length&&b.shift()},()=>{for(const N of b)m.next(N);m.complete()},void 0,()=>{b=null}))})}var yn=L(8068),tn=L(6590);function Tn(_,E){const m=arguments.length>=2;return b=>b.pipe(_?(0,_t.h)((N,$)=>_(N,$,b)):be.y,Nt(1),m?(0,tn.d)(E):(0,yn.T)(()=>new we.K))}function tr(_){return(0,X.e)((E,m)=>{try{E.subscribe(m)}finally{m.add(_)}})}var In=L(8189),br=L(1481);const zt="primary",Hn=Symbol("RouteTitle");class or{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const m=this.params[E];return Array.isArray(m)?m[0]:m}return null}getAll(E){if(this.has(E)){const m=this.params[E];return Array.isArray(m)?m:[m]}return[]}get keys(){return Object.keys(this.params)}}function zn(_){return new or(_)}function mt(_,E,m){const b=m.path.split("/");if(b.length>_.length||"full"===m.pathMatch&&(E.hasChildren()||b.length<_.length))return null;const N={};for(let $=0;$<b.length;$++){const ie=b[$],oe=_[$];if(ie.startsWith(":"))N[ie.substring(1)]=oe;else if(ie!==oe.path)return null}return{consumed:_.slice(0,b.length),posParams:N}}function gn(_,E){const m=_?Object.keys(_):void 0,b=E?Object.keys(E):void 0;if(!m||!b||m.length!=b.length)return!1;let N;for(let $=0;$<m.length;$++)if(N=m[$],!Gn(_[N],E[N]))return!1;return!0}function Gn(_,E){if(Array.isArray(_)&&Array.isArray(E)){if(_.length!==E.length)return!1;const m=[..._].sort(),b=[...E].sort();return m.every((N,$)=>b[$]===N)}return _===E}function _r(_){return Array.prototype.concat.apply([],_)}function Yr(_){return _.length>0?_[_.length-1]:null}function Ze(_,E){for(const m in _)_.hasOwnProperty(m)&&E(_[m],m)}function ye(_){return(0,p.CqO)(_)?_:(0,p.QGY)(_)?(0,k.D)(Promise.resolve(_)):(0,C.of)(_)}const it={exact:function At(_,E,m){if(!fe(_.segments,E.segments)||!nn(_.segments,E.segments,m)||_.numberOfChildren!==E.numberOfChildren)return!1;for(const b in E.children)if(!_.children[b]||!At(_.children[b],E.children[b],m))return!1;return!0},subset:vn},Ft={exact:function An(_,E){return gn(_,E)},subset:function Zn(_,E){return Object.keys(E).length<=Object.keys(_).length&&Object.keys(E).every(m=>Gn(_[m],E[m]))},ignored:()=>!0};function Xt(_,E,m){return it[m.paths](_.root,E.root,m.matrixParams)&&Ft[m.queryParams](_.queryParams,E.queryParams)&&!("exact"===m.fragment&&_.fragment!==E.fragment)}function vn(_,E,m){return Tr(_,E,E.segments,m)}function Tr(_,E,m,b){if(_.segments.length>m.length){const N=_.segments.slice(0,m.length);return!(!fe(N,m)||E.hasChildren()||!nn(N,m,b))}if(_.segments.length===m.length){if(!fe(_.segments,m)||!nn(_.segments,m,b))return!1;for(const N in E.children)if(!_.children[N]||!vn(_.children[N],E.children[N],b))return!1;return!0}{const N=m.slice(0,_.segments.length),$=m.slice(_.segments.length);return!!(fe(_.segments,N)&&nn(_.segments,N,b)&&_.children[zt])&&Tr(_.children[zt],E,$,b)}}function nn(_,E,m){return E.every((b,N)=>Ft[m](_[N].parameters,b.parameters))}class me{constructor(E,m,b){this.root=E,this.queryParams=m,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return $n.serialize(this)}}class Q{constructor(E,m){this.segments=E,this.children=m,this.parent=null,Ze(m,(b,N)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _n(this)}}class ue{constructor(E,m){this.path=E,this.parameters=m}get parameterMap(){return this._parameterMap||(this._parameterMap=zn(this.parameters)),this._parameterMap}toString(){return pr(this)}}function fe(_,E){return _.length===E.length&&_.every((m,b)=>m.path===E[b].path)}let Ct=(()=>{class _{}return _.\u0275fac=function(m){return new(m||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return new Bt},providedIn:"root"}),_})();class Bt{parse(E){const m=new Dn(E);return new me(m.parseRootSegment(),m.parseQueryParams(),m.parseFragment())}serialize(E){const m=`/${Wn(E.root,!0)}`,b=function de(_){const E=Object.keys(_).map(m=>{const b=_[m];return Array.isArray(b)?b.map(N=>`${dn(m)}=${dn(N)}`).join("&"):`${dn(m)}=${dn(b)}`}).filter(m=>!!m);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${m}${b}${"string"==typeof E.fragment?`#${function Qn(_){return encodeURI(_)}(E.fragment)}`:""}`}}const $n=new Bt;function _n(_){return _.segments.map(E=>pr(E)).join("/")}function Wn(_,E){if(!_.hasChildren())return _n(_);if(E){const m=_.children[zt]?Wn(_.children[zt],!1):"",b=[];return Ze(_.children,(N,$)=>{$!==zt&&b.push(`${$}:${Wn(N,!1)}`)}),b.length>0?`${m}(${b.join("//")})`:m}{const m=function ot(_,E){let m=[];return Ze(_.children,(b,N)=>{N===zt&&(m=m.concat(E(b,N)))}),Ze(_.children,(b,N)=>{N!==zt&&(m=m.concat(E(b,N)))}),m}(_,(b,N)=>N===zt?[Wn(_.children[zt],!1)]:[`${N}:${Wn(b,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[zt]?`${_n(_)}/${m[0]}`:`${_n(_)}/(${m.join("//")})`}}function pn(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dn(_){return pn(_).replace(/%3B/gi,";")}function ar(_){return pn(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kr(_){return decodeURIComponent(_)}function Fr(_){return kr(_.replace(/\+/g,"%20"))}function pr(_){return`${ar(_.path)}${function ve(_){return Object.keys(_).map(E=>`;${ar(E)}=${ar(_[E])}`).join("")}(_.parameters)}`}const te=/^[^\/()?;=#]+/;function Le(_){const E=_.match(te);return E?E[0]:""}const st=/^[^=?&#]+/,ln=/^[^&#]+/;class Dn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let m={};this.peekStartsWith("/(")&&(this.capture("/"),m=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(E.length>0||Object.keys(m).length>0)&&(b[zt]=new Q(E,m)),b}parseSegment(){const E=Le(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(E),new ue(kr(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const m=Le(this.remaining);if(!m)return;this.capture(m);let b="";if(this.consumeOptional("=")){const N=Le(this.remaining);N&&(b=N,this.capture(b))}E[kr(m)]=kr(b)}parseQueryParam(E){const m=function jt(_){const E=_.match(st);return E?E[0]:""}(this.remaining);if(!m)return;this.capture(m);let b="";if(this.consumeOptional("=")){const ie=function Yt(_){const E=_.match(ln);return E?E[0]:""}(this.remaining);ie&&(b=ie,this.capture(b))}const N=Fr(m),$=Fr(b);if(E.hasOwnProperty(N)){let ie=E[N];Array.isArray(ie)||(ie=[ie],E[N]=ie),ie.push($)}else E[N]=$}parseParens(E){const m={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Le(this.remaining),N=this.remaining[b.length];if("/"!==N&&")"!==N&&";"!==N)throw new p.vHH(4010,!1);let $;b.indexOf(":")>-1?($=b.slice(0,b.indexOf(":")),this.capture($),this.capture(":")):E&&($=zt);const ie=this.parseChildren();m[$]=1===Object.keys(ie).length?ie[zt]:new Q([],ie),this.consumeOptional("//")}return m}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new p.vHH(4011,!1)}}function jr(_){return _.segments.length>0?new Q([],{[zt]:_}):_}function cn(_){const E={};for(const b of Object.keys(_.children)){const $=cn(_.children[b]);($.segments.length>0||$.hasChildren())&&(E[b]=$)}return function nr(_){if(1===_.numberOfChildren&&_.children[zt]){const E=_.children[zt];return new Q(_.segments.concat(E.segments),E.children)}return _}(new Q(_.segments,E))}function $r(_){return _ instanceof me}function Mi(_,E,m,b,N){if(0===m.length)return Ii(E.root,E.root,E.root,b,N);const $=function Ki(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new xs(!0,0,_);let E=0,m=!1;const b=_.reduce((N,$,ie)=>{if("object"==typeof $&&null!=$){if($.outlets){const oe={};return Ze($.outlets,(Xe,bt)=>{oe[bt]="string"==typeof Xe?Xe.split("/"):Xe}),[...N,{outlets:oe}]}if($.segmentPath)return[...N,$.segmentPath]}return"string"!=typeof $?[...N,$]:0===ie?($.split("/").forEach((oe,Xe)=>{0==Xe&&"."===oe||(0==Xe&&""===oe?m=!0:".."===oe?E++:""!=oe&&N.push(oe))}),N):[...N,$]},[]);return new xs(m,E,b)}(m);return $.toRoot()?Ii(E.root,E.root,new Q([],{}),b,N):function ie(Xe){const bt=function xi(_,E,m,b){if(_.isAbsolute)return new ti(E.root,!0,0);if(-1===b)return new ti(m,m===E.root,0);return function ni(_,E,m){let b=_,N=E,$=m;for(;$>N;){if($-=N,b=b.parent,!b)throw new p.vHH(4005,!1);N=b.segments.length}return new ti(b,!1,N-$)}(m,b+(xr(_.commands[0])?0:1),_.numberOfDoubleDots)}($,E,_.snapshot?._urlSegment,Xe),Kt=bt.processChildren?Ri(bt.segmentGroup,bt.index,$.commands):Er(bt.segmentGroup,bt.index,$.commands);return Ii(E.root,bt.segmentGroup,Kt,b,N)}(_.snapshot?._lastPathIndex)}function xr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function gr(_){return"object"==typeof _&&null!=_&&_.outlets}function Ii(_,E,m,b,N){let ie,$={};b&&Ze(b,(Xe,bt)=>{$[bt]=Array.isArray(Xe)?Xe.map(Kt=>`${Kt}`):`${Xe}`}),ie=_===E?m:Jn(_,E,m);const oe=jr(cn(ie));return new me(oe,$,N)}function Jn(_,E,m){const b={};return Ze(_.children,(N,$)=>{b[$]=N===E?m:Jn(N,E,m)}),new Q(_.segments,b)}class xs{constructor(E,m,b){if(this.isAbsolute=E,this.numberOfDoubleDots=m,this.commands=b,E&&b.length>0&&xr(b[0]))throw new p.vHH(4003,!1);const N=b.find(gr);if(N&&N!==Yr(b))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ti{constructor(E,m,b){this.segmentGroup=E,this.processChildren=m,this.index=b}}function Er(_,E,m){if(_||(_=new Q([],{})),0===_.segments.length&&_.hasChildren())return Ri(_,E,m);const b=function wr(_,E,m){let b=0,N=E;const $={match:!1,pathIndex:0,commandIndex:0};for(;N<_.segments.length;){if(b>=m.length)return $;const ie=_.segments[N],oe=m[b];if(gr(oe))break;const Xe=`${oe}`,bt=b<m.length-1?m[b+1]:null;if(N>0&&void 0===Xe)break;if(Xe&&bt&&"object"==typeof bt&&void 0===bt.outlets){if(!Oo(Xe,bt,ie))return $;b+=2}else{if(!Oo(Xe,{},ie))return $;b++}N++}return{match:!0,pathIndex:N,commandIndex:b}}(_,E,m),N=m.slice(b.commandIndex);if(b.match&&b.pathIndex<_.segments.length){const $=new Q(_.segments.slice(0,b.pathIndex),{});return $.children[zt]=new Q(_.segments.slice(b.pathIndex),_.children),Ri($,0,N)}return b.match&&0===N.length?new Q(_.segments,{}):b.match&&!_.hasChildren()?Zr(_,E,m):b.match?Ri(_,0,N):Zr(_,E,m)}function Ri(_,E,m){if(0===m.length)return new Q(_.segments,{});{const b=function Bi(_){return gr(_[0])?_[0].outlets:{[zt]:_}}(m),N={};return Ze(b,($,ie)=>{"string"==typeof $&&($=[$]),null!==$&&(N[ie]=Er(_.children[ie],E,$))}),Ze(_.children,($,ie)=>{void 0===b[ie]&&(N[ie]=$)}),new Q(_.segments,N)}}function Zr(_,E,m){const b=_.segments.slice(0,E);let N=0;for(;N<m.length;){const $=m[N];if(gr($)){const Xe=js($.outlets);return new Q(b,Xe)}if(0===N&&xr(m[0])){b.push(new ue(_.segments[E].path,Qr(m[0]))),N++;continue}const ie=gr($)?$.outlets[zt]:`${$}`,oe=N<m.length-1?m[N+1]:null;ie&&oe&&xr(oe)?(b.push(new ue(ie,Qr(oe))),N+=2):(b.push(new ue(ie,{})),N++)}return new Q(b,{})}function js(_){const E={};return Ze(_,(m,b)=>{"string"==typeof m&&(m=[m]),null!==m&&(E[b]=Zr(new Q([],{}),0,m))}),E}function Qr(_){const E={};return Ze(_,(m,b)=>E[b]=`${m}`),E}function Oo(_,E,m){return _==m.path&&gn(E,m.parameters)}class Ir{constructor(E,m){this.id=E,this.url=m}}class ji extends Ir{constructor(E,m,b="imperative",N=null){super(E,m),this.type=0,this.navigationTrigger=b,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ms extends Ir{constructor(E,m,b){super(E,m),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $s extends Ir{constructor(E,m,b,N){super(E,m),this.reason=b,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ho extends Ir{constructor(E,m,b,N){super(E,m),this.error=b,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hs extends Ir{constructor(E,m,b,N){super(E,m),this.urlAfterRedirects=b,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr extends Ir{constructor(E,m,b,N){super(E,m),this.urlAfterRedirects=b,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ce extends Ir{constructor(E,m,b,N,$){super(E,m),this.urlAfterRedirects=b,this.state=N,this.shouldActivate=$,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xe extends Ir{constructor(E,m,b,N){super(E,m),this.urlAfterRedirects=b,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fe extends Ir{constructor(E,m,b,N){super(E,m),this.urlAfterRedirects=b,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ut{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class St{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zt{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mn{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ri{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fn{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(E,m,b){this.routerEvent=E,this.position=m,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Rs{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const m=this.pathFromRoot(E);return m.length>1?m[m.length-2]:null}children(E){const m=ii(E,this._root);return m?m.children.map(b=>b.value):[]}firstChild(E){const m=ii(E,this._root);return m&&m.children.length>0?m.children[0].value:null}siblings(E){const m=si(E,this._root);return m.length<2?[]:m[m.length-2].children.map(N=>N.value).filter(N=>N!==E)}pathFromRoot(E){return si(E,this._root).map(m=>m.value)}}function ii(_,E){if(_===E.value)return E;for(const m of E.children){const b=ii(_,m);if(b)return b}return null}function si(_,E){if(_===E.value)return[E];for(const m of E.children){const b=si(_,m);if(b.length)return b.unshift(E),b}return[]}class Ni{constructor(E,m){this.value=E,this.children=m}toString(){return`TreeNode(${this.value})`}}function ys(_){const E={};return _&&_.children.forEach(m=>E[m.value.outlet]=m),E}class fo extends Rs{constructor(E,m){super(E),this.snapshot=m,Po(this,E)}toString(){return this.snapshot.toString()}}function Di(_,E){const m=function Ci(_,E){const ie=new vs([],{},{},"",{},zt,E,null,_.root,-1,{});return new _s("",new Ni(ie,[]))}(_,E),b=new le([new ue("",{})]),N=new le({}),$=new le({}),ie=new le({}),oe=new le(""),Xe=new oi(b,N,ie,oe,$,zt,E,m.root);return Xe.snapshot=m.root,new fo(new Ni(Xe,[]),m)}class oi{constructor(E,m,b,N,$,ie,oe,Xe){this.url=E,this.params=m,this.queryParams=b,this.fragment=N,this.data=$,this.outlet=ie,this.component=oe,this.title=this.data?.pipe((0,he.U)(bt=>bt[Hn]))??(0,C.of)(void 0),this._futureSnapshot=Xe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,he.U)(E=>zn(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,he.U)(E=>zn(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yi(_,E="emptyOnly"){const m=_.pathFromRoot;let b=0;if("always"!==E)for(b=m.length-1;b>=1;){const N=m[b],$=m[b-1];if(N.routeConfig&&""===N.routeConfig.path)b--;else{if($.component)break;b--}}return function Qs(_){return _.reduce((E,m)=>({params:{...E.params,...m.params},data:{...E.data,...m.data},resolve:{...m.data,...E.resolve,...m.routeConfig?.data,...m._resolvedData}}),{params:{},data:{},resolve:{}})}(m.slice(b))}class vs{constructor(E,m,b,N,$,ie,oe,Xe,bt,Kt,Ut,Vn){this.url=E,this.params=m,this.queryParams=b,this.fragment=N,this.data=$,this.outlet=ie,this.component=oe,this.title=this.data?.[Hn],this.routeConfig=Xe,this._urlSegment=bt,this._lastPathIndex=Kt,this._correctedLastPathIndex=Vn??Kt,this._resolve=Ut}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _s extends Rs{constructor(E,m){super(m),this.url=E,Po(this,m)}toString(){return Qi(this._root)}}function Po(_,E){E.value._routerState=_,E.children.forEach(m=>Po(_,m))}function Qi(_){const E=_.children.length>0?` { ${_.children.map(Qi).join(", ")} } `:"";return`${_.value}${E}`}function fi(_){if(_.snapshot){const E=_.snapshot,m=_._futureSnapshot;_.snapshot=m,gn(E.queryParams,m.queryParams)||_.queryParams.next(m.queryParams),E.fragment!==m.fragment&&_.fragment.next(m.fragment),gn(E.params,m.params)||_.params.next(m.params),function Un(_,E){if(_.length!==E.length)return!1;for(let m=0;m<_.length;++m)if(!gn(_[m],E[m]))return!1;return!0}(E.url,m.url)||_.url.next(m.url),gn(E.data,m.data)||_.data.next(m.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function Rr(_,E){const m=gn(_.params,E.params)&&function Ee(_,E){return fe(_,E)&&_.every((m,b)=>gn(m.parameters,E[b].parameters))}(_.url,E.url);return m&&!(!_.parent!=!E.parent)&&(!_.parent||Rr(_.parent,E.parent))}function Oi(_,E,m){if(m&&_.shouldReuseRoute(E.value,m.value.snapshot)){const b=m.value;b._futureSnapshot=E.value;const N=function Zo(_,E,m){return E.children.map(b=>{for(const N of m.children)if(_.shouldReuseRoute(b.value,N.value.snapshot))return Oi(_,b,N);return Oi(_,b)})}(_,E,m);return new Ni(b,N)}{if(_.shouldAttach(E.value)){const $=_.retrieve(E.value);if(null!==$){const ie=$.route;return ie.value._futureSnapshot=E.value,ie.children=E.children.map(oe=>Oi(_,oe)),ie}}const b=function ai(_){return new oi(new le(_.url),new le(_.params),new le(_.queryParams),new le(_.fragment),new le(_.data),_.outlet,_.component,_)}(E.value),N=E.children.map($=>Oi(_,$));return new Ni(b,N)}}const po="ngNavigationCancelingError";function fa(_,E){const{redirectTo:m,navigationBehaviorOptions:b}=$r(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,N=ir(!1,0,E);return N.url=m,N.navigationBehaviorOptions=b,N}function ir(_,E,m){const b=new Error("NavigationCancelingError: "+(_||""));return b[po]=!0,b.cancellationCode=E,m&&(b.url=m),b}function gi(_){return Js(_)&&$r(_.url)}function Js(_){return _&&_[po]}class ui{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vr,this.attachRef=null}}let Vr=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(m,b){const N=this.getOrCreateContext(m);N.outlet=b,this.contexts.set(m,N)}onChildOutletDestroyed(m){const b=this.getContext(m);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const m=this.contexts;return this.contexts=new Map,m}onOutletReAttached(m){this.contexts=m}getOrCreateContext(m){let b=this.getContext(m);return b||(b=new ui,this.contexts.set(m,b)),b}getContext(m){return this.contexts.get(m)||null}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Ln=!1;let Ji=(()=>{class _{constructor(m,b,N,$,ie){this.parentContexts=m,this.location=b,this.changeDetector=$,this.environmentInjector=ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=N||zt,m.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const m=this.parentContexts.getContext(this.name);m&&m.route&&(m.attachRef?this.attach(m.attachRef,m.route):this.activateWith(m.route,m.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Ln);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Ln);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Ln);this.location.detach();const m=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(m.instance),m}attach(m,b){this.activated=m,this._activatedRoute=b,this.location.insert(m.hostView),this.attachEvents.emit(m.instance)}deactivate(){if(this.activated){const m=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(m)}}activateWith(m,b){if(this.isActivated)throw new p.vHH(4013,Ln);this._activatedRoute=m;const N=this.location,ie=m._futureSnapshot.component,oe=this.parentContexts.getOrCreateContext(this.name).children,Xe=new bi(m,oe,N.injector);if(b&&function On(_){return!!_.resolveComponentFactory}(b)){const bt=b.resolveComponentFactory(ie);this.activated=N.createComponent(bt,N.length,Xe)}else this.activated=N.createComponent(ie,{index:N.length,injector:Xe,environmentInjector:b??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(m){return new(m||_)(p.Y36(Vr),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},_.\u0275dir=p.lG2({type:_,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),_})();class bi{constructor(E,m,b){this.route=E,this.childContexts=m,this.parent=b}get(E,m){return E===oi?this.route:E===Vr?this.childContexts:this.parent.get(E,m)}}let zs=(()=>{class _{}return _.\u0275fac=function(m){return new(m||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(m,b){1&m&&p._UZ(0,"router-outlet")},dependencies:[Ji],encapsulation:2}),_})();function Es(_,E){return _.providers&&!_._injector&&(_._injector=(0,p.MMx)(_.providers,E,`Route: ${_.path}`)),_._injector??E}function Ns(_){const E=_.children&&_.children.map(Ns),m=E?{..._,children:E}:{..._};return!m.component&&!m.loadComponent&&(E||m.loadChildren)&&m.outlet&&m.outlet!==zt&&(m.component=zs),m}function Hr(_){return _.outlet||zt}function es(_,E){const m=_.filter(b=>Hr(b)===E);return m.push(..._.filter(b=>Hr(b)!==E)),m}function Xs(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let E=_.parent;E;E=E.parent){const m=E.routeConfig;if(m?._loadedInjector)return m._loadedInjector;if(m?._injector)return m._injector}return null}class gt{constructor(E,m,b,N){this.routeReuseStrategy=E,this.futureState=m,this.currState=b,this.forwardEvent=N}activate(E){const m=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(m,b,E),fi(this.futureState.root),this.activateChildRoutes(m,b,E)}deactivateChildRoutes(E,m,b){const N=ys(m);E.children.forEach($=>{const ie=$.value.outlet;this.deactivateRoutes($,N[ie],b),delete N[ie]}),Ze(N,($,ie)=>{this.deactivateRouteAndItsChildren($,b)})}deactivateRoutes(E,m,b){const N=E.value,$=m?m.value:null;if(N===$)if(N.component){const ie=b.getContext(N.outlet);ie&&this.deactivateChildRoutes(E,m,ie.children)}else this.deactivateChildRoutes(E,m,b);else $&&this.deactivateRouteAndItsChildren(m,b)}deactivateRouteAndItsChildren(E,m){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,m):this.deactivateRouteAndOutlet(E,m)}detachAndStoreRouteSubtree(E,m){const b=m.getContext(E.value.outlet),N=b&&E.value.component?b.children:m,$=ys(E);for(const ie of Object.keys($))this.deactivateRouteAndItsChildren($[ie],N);if(b&&b.outlet){const ie=b.outlet.detach(),oe=b.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:ie,route:E,contexts:oe})}}deactivateRouteAndOutlet(E,m){const b=m.getContext(E.value.outlet),N=b&&E.value.component?b.children:m,$=ys(E);for(const ie of Object.keys($))this.deactivateRouteAndItsChildren($[ie],N);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(E,m,b){const N=ys(m);E.children.forEach($=>{this.activateRoutes($,N[$.value.outlet],b),this.forwardEvent(new Fn($.value.snapshot))}),E.children.length&&this.forwardEvent(new mn(E.value.snapshot))}activateRoutes(E,m,b){const N=E.value,$=m?m.value:null;if(fi(N),N===$)if(N.component){const ie=b.getOrCreateContext(N.outlet);this.activateChildRoutes(E,m,ie.children)}else this.activateChildRoutes(E,m,b);else if(N.component){const ie=b.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const oe=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),ie.children.onOutletReAttached(oe.contexts),ie.attachRef=oe.componentRef,ie.route=oe.route.value,ie.outlet&&ie.outlet.attach(oe.componentRef,oe.route.value),fi(oe.route.value),this.activateChildRoutes(E,null,ie.children)}else{const oe=Xs(N.snapshot),Xe=oe?.get(p._Vd)??null;ie.attachRef=null,ie.route=N,ie.resolver=Xe,ie.injector=oe,ie.outlet&&ie.outlet.activateWith(N,ie.injector),this.activateChildRoutes(E,null,ie.children)}}else this.activateChildRoutes(E,null,b)}}class Sn{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class Os{constructor(E,m){this.component=E,this.route=m}}function Zs(_,E,m){const b=_._root;return as(b,E?E._root:null,m,[b.value])}function ws(_,E){const m=Symbol(),b=E.get(_,m);return b===m?"function"!=typeof _||(0,p.Z0I)(_)?E.get(_):_:b}function as(_,E,m,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=ys(E);return _.children.forEach(ie=>{(function mi(_,E,m,b,N={canDeactivateChecks:[],canActivateChecks:[]}){const $=_.value,ie=E?E.value:null,oe=m?m.getContext(_.value.outlet):null;if(ie&&$.routeConfig===ie.routeConfig){const Xe=function yo(_,E,m){if("function"==typeof m)return m(_,E);switch(m){case"pathParamsChange":return!fe(_.url,E.url);case"pathParamsOrQueryParamsChange":return!fe(_.url,E.url)||!gn(_.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rr(_,E)||!gn(_.queryParams,E.queryParams);default:return!Rr(_,E)}}(ie,$,$.routeConfig.runGuardsAndResolvers);Xe?N.canActivateChecks.push(new Sn(b)):($.data=ie.data,$._resolvedData=ie._resolvedData),as(_,E,$.component?oe?oe.children:null:m,b,N),Xe&&oe&&oe.outlet&&oe.outlet.isActivated&&N.canDeactivateChecks.push(new Os(oe.outlet.component,ie))}else ie&&Ps(E,oe,N),N.canActivateChecks.push(new Sn(b)),as(_,null,$.component?oe?oe.children:null:m,b,N)})(ie,$[ie.value.outlet],m,b.concat([ie.value]),N),delete $[ie.value.outlet]}),Ze($,(ie,oe)=>Ps(ie,m.getContext(oe),N)),N}function Ps(_,E,m){const b=ys(_),N=_.value;Ze(b,($,ie)=>{Ps($,N.component?E?E.children.getContext(ie):null:E,m)}),m.canDeactivateChecks.push(new Os(N.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,N))}function eo(_){return"function"==typeof _}function Kn(_){return _ instanceof we.K||"EmptyError"===_?.name}const yi=Symbol("INITIAL_VALUE");function us(){return(0,Ne.w)(_=>Ve(_.map(E=>E.pipe((0,lt.q)(1),(0,pt.O)(yi)))).pipe((0,he.U)(E=>{for(const m of E)if(!0!==m){if(m===yi)return yi;if(!1===m||m instanceof me)return m}return!0}),(0,_t.h)(E=>E!==yi),(0,lt.q)(1)))}function Yo(_){return(0,ce.z)((0,at.b)(E=>{if($r(E))throw fa(0,E)}),(0,he.U)(E=>!0===E))}const T={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B(_,E,m,b,N){const $=x(_,E,m);return $.matched?function Qo(_,E,m,b){const N=E.canMatch;if(!N||0===N.length)return(0,C.of)(!0);const $=N.map(ie=>{const oe=ws(ie,_);return ye(function qe(_){return _&&eo(_.canMatch)}(oe)?oe.canMatch(E,m):_.runInContext(()=>oe(E,m)))});return(0,C.of)($).pipe(us(),Yo())}(b=Es(E,b),E,m).pipe((0,he.U)(ie=>!0===ie?$:{...T})):(0,C.of)($)}function x(_,E,m){if(""===E.path)return"full"===E.pathMatch&&(_.hasChildren()||m.length>0)?{...T}:{matched:!0,consumedSegments:[],remainingSegments:m,parameters:{},positionalParamSegments:{}};const N=(E.matcher||mt)(m,_,E);if(!N)return{...T};const $={};Ze(N.posParams,(oe,Xe)=>{$[Xe]=oe.path});const ie=N.consumed.length>0?{...$,...N.consumed[N.consumed.length-1].parameters}:$;return{matched:!0,consumedSegments:N.consumed,remainingSegments:m.slice(N.consumed.length),parameters:ie,positionalParamSegments:N.posParams??{}}}function G(_,E,m,b,N="corrected"){if(m.length>0&&function rt(_,E,m){return m.some(b=>Pn(_,E,b)&&Hr(b)!==zt)}(_,m,b)){const ie=new Q(E,function He(_,E,m,b){const N={};N[zt]=b,b._sourceSegment=_,b._segmentIndexShift=E.length;for(const $ of m)if(""===$.path&&Hr($)!==zt){const ie=new Q([],{});ie._sourceSegment=_,ie._segmentIndexShift=E.length,N[Hr($)]=ie}return N}(_,E,b,new Q(m,_.children)));return ie._sourceSegment=_,ie._segmentIndexShift=E.length,{segmentGroup:ie,slicedSegments:[]}}if(0===m.length&&function Wt(_,E,m){return m.some(b=>Pn(_,E,b))}(_,m,b)){const ie=new Q(_.segments,function pe(_,E,m,b,N,$){const ie={};for(const oe of b)if(Pn(_,m,oe)&&!N[Hr(oe)]){const Xe=new Q([],{});Xe._sourceSegment=_,Xe._segmentIndexShift="legacy"===$?_.segments.length:E.length,ie[Hr(oe)]=Xe}return{...N,...ie}}(_,E,m,b,_.children,N));return ie._sourceSegment=_,ie._segmentIndexShift=E.length,{segmentGroup:ie,slicedSegments:m}}const $=new Q(_.segments,_.children);return $._sourceSegment=_,$._segmentIndexShift=E.length,{segmentGroup:$,slicedSegments:m}}function Pn(_,E,m){return(!(_.hasChildren()||E.length>0)||"full"!==m.pathMatch)&&""===m.path}function Xn(_,E,m,b){return!!(Hr(_)===b||b!==zt&&Pn(E,m,_))&&("**"===_.path||x(E,_,m).matched)}function Yn(_,E,m){return 0===E.length&&!_.children[m]}const Mn=!1;class Ur{constructor(E){this.segmentGroup=E||null}}class sr{constructor(E){this.urlTree=E}}function ur(_){return Qe(new Ur(_))}function ks(_){return Qe(new sr(_))}class Ds{constructor(E,m,b,N,$){this.injector=E,this.configLoader=m,this.urlSerializer=b,this.urlTree=N,this.config=$,this.allowRedirects=!0}apply(){const E=G(this.urlTree.root,[],[],this.config).segmentGroup,m=new Q(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,m,zt).pipe((0,he.U)($=>this.createUrlTree(cn($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vt($=>{if($ instanceof sr)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof Ur?this.noMatchError($):$}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,zt).pipe((0,he.U)(N=>this.createUrlTree(cn(N),E.queryParams,E.fragment))).pipe(Vt(N=>{throw N instanceof Ur?this.noMatchError(N):N}))}noMatchError(E){return new p.vHH(4002,Mn)}createUrlTree(E,m,b){const N=jr(E);return new me(N,m,b)}expandSegmentGroup(E,m,b,N){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(E,m,b).pipe((0,he.U)($=>new Q([],$))):this.expandSegment(E,b,m,b.segments,N,!0)}expandChildren(E,m,b){const N=[];for(const $ of Object.keys(b.children))"primary"===$?N.unshift($):N.push($);return(0,k.D)(N).pipe((0,Se.b)($=>{const ie=b.children[$],oe=es(m,$);return this.expandSegmentGroup(E,oe,ie,$).pipe((0,he.U)(Xe=>({segment:Xe,outlet:$})))}),(0,Ht.R)(($,ie)=>($[ie.outlet]=ie.segment,$),{}),Tn())}expandSegment(E,m,b,N,$,ie){return(0,k.D)(b).pipe((0,Se.b)(oe=>this.expandSegmentAgainstRoute(E,m,b,oe,N,$,ie).pipe(Vt(bt=>{if(bt instanceof Ur)return(0,C.of)(null);throw bt}))),(0,dt.P)(oe=>!!oe),Vt((oe,Xe)=>{if(Kn(oe))return Yn(m,N,$)?(0,C.of)(new Q([],{})):ur(m);throw oe}))}expandSegmentAgainstRoute(E,m,b,N,$,ie,oe){return Xn(N,m,$,ie)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(E,m,N,$,ie):oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,m,b,N,$,ie):ur(m):ur(m)}expandSegmentAgainstRouteUsingRedirect(E,m,b,N,$,ie){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,b,N,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(E,m,b,N,$,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,m,b,N){const $=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?ks($):this.lineralizeSegments(b,$).pipe((0,Pe.z)(ie=>{const oe=new Q(ie,{});return this.expandSegment(E,oe,m,ie,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,m,b,N,$,ie){const{matched:oe,consumedSegments:Xe,remainingSegments:bt,positionalParamSegments:Kt}=x(m,N,$);if(!oe)return ur(m);const Ut=this.applyRedirectCommands(Xe,N.redirectTo,Kt);return N.redirectTo.startsWith("/")?ks(Ut):this.lineralizeSegments(N,Ut).pipe((0,Pe.z)(Vn=>this.expandSegment(E,m,b,Vn.concat(bt),ie,!1)))}matchSegmentAgainstRoute(E,m,b,N,$){return"**"===b.path?(E=Es(b,E),b.loadChildren?(b._loadedRoutes?(0,C.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):this.configLoader.loadChildren(E,b)).pipe((0,he.U)(oe=>(b._loadedRoutes=oe.routes,b._loadedInjector=oe.injector,new Q(N,{})))):(0,C.of)(new Q(N,{}))):B(m,b,N,E).pipe((0,Ne.w)(({matched:ie,consumedSegments:oe,remainingSegments:Xe})=>ie?this.getChildConfig(E=b._injector??E,b,N).pipe((0,Pe.z)(Kt=>{const Ut=Kt.injector??E,Vn=Kt.routes,{segmentGroup:ki,slicedSegments:Gi}=G(m,oe,Xe,Vn),rs=new Q(ki.segments,ki.children);if(0===Gi.length&&rs.hasChildren())return this.expandChildren(Ut,Vn,rs).pipe((0,he.U)(sa=>new Q(oe,sa)));if(0===Vn.length&&0===Gi.length)return(0,C.of)(new Q(oe,{}));const ci=Hr(b)===$;return this.expandSegment(Ut,rs,Vn,Gi,ci?zt:$,!0).pipe((0,he.U)(Do=>new Q(oe.concat(Do.segments),Do.children)))})):ur(m)))}getChildConfig(E,m,b){return m.children?(0,C.of)({routes:m.children,injector:E}):m.loadChildren?void 0!==m._loadedRoutes?(0,C.of)({routes:m._loadedRoutes,injector:m._loadedInjector}):function ga(_,E,m,b){const N=E.canLoad;if(void 0===N||0===N.length)return(0,C.of)(!0);const $=N.map(ie=>{const oe=ws(ie,_);return ye(function P(_){return _&&eo(_.canLoad)}(oe)?oe.canLoad(E,m):_.runInContext(()=>oe(E,m)))});return(0,C.of)($).pipe(us(),Yo())}(E,m,b).pipe((0,Pe.z)(N=>N?this.configLoader.loadChildren(E,m).pipe((0,at.b)($=>{m._loadedRoutes=$.routes,m._loadedInjector=$.injector})):function Ti(_){return Qe(ir(Mn,3))}())):(0,C.of)({routes:[],injector:E})}lineralizeSegments(E,m){let b=[],N=m.root;for(;;){if(b=b.concat(N.segments),0===N.numberOfChildren)return(0,C.of)(b);if(N.numberOfChildren>1||!N.children[zt])return Qe(new p.vHH(4e3,Mn));N=N.children[zt]}}applyRedirectCommands(E,m,b){return this.applyRedirectCreateUrlTree(m,this.urlSerializer.parse(m),E,b)}applyRedirectCreateUrlTree(E,m,b,N){const $=this.createSegmentGroup(E,m.root,b,N);return new me($,this.createQueryParams(m.queryParams,this.urlTree.queryParams),m.fragment)}createQueryParams(E,m){const b={};return Ze(E,(N,$)=>{if("string"==typeof N&&N.startsWith(":")){const oe=N.substring(1);b[$]=m[oe]}else b[$]=N}),b}createSegmentGroup(E,m,b,N){const $=this.createSegments(E,m.segments,b,N);let ie={};return Ze(m.children,(oe,Xe)=>{ie[Xe]=this.createSegmentGroup(E,oe,b,N)}),new Q($,ie)}createSegments(E,m,b,N){return m.map($=>$.path.startsWith(":")?this.findPosParam(E,$,N):this.findOrReturn($,b))}findPosParam(E,m,b){const N=b[m.path.substring(1)];if(!N)throw new p.vHH(4001,Mn);return N}findOrReturn(E,m){let b=0;for(const N of m){if(N.path===E.path)return m.splice(b),N;b++}return E}}class Jo{}class Wu{constructor(E,m,b,N,$,ie,oe,Xe){this.injector=E,this.rootComponentType=m,this.config=b,this.urlTree=N,this.url=$,this.paramsInheritanceStrategy=ie,this.relativeLinkResolution=oe,this.urlSerializer=Xe}recognize(){const E=G(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,zt).pipe((0,he.U)(m=>{if(null===m)return null;const b=new vs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Ni(b,m),$=new _s(this.url,N);return this.inheritParamsAndData($._root),$}))}inheritParamsAndData(E){const m=E.value,b=Yi(m,this.paramsInheritanceStrategy);m.params=Object.freeze(b.params),m.data=Object.freeze(b.data),E.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(E,m,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(E,m,b):this.processSegment(E,m,b,b.segments,N)}processChildren(E,m,b){return(0,k.D)(Object.keys(b.children)).pipe((0,Se.b)(N=>{const $=b.children[N],ie=es(m,N);return this.processSegmentGroup(E,ie,$,N)}),(0,Ht.R)((N,$)=>N&&$?(N.push(...$),N):null),function Kr(_,E=!1){return(0,X.e)((m,b)=>{let N=0;m.subscribe((0,nt.x)(b,$=>{const ie=_($,N++);(ie||E)&&b.next($),!ie&&b.complete()}))})}(N=>null!==N),(0,tn.d)(null),Tn(),(0,he.U)(N=>{if(null===N)return null;const $=Xo(N);return function ma(_){_.sort((E,m)=>E.value.outlet===zt?-1:m.value.outlet===zt?1:E.value.outlet.localeCompare(m.value.outlet))}($),$}))}processSegment(E,m,b,N,$){return(0,k.D)(m).pipe((0,Se.b)(ie=>this.processSegmentAgainstRoute(ie._injector??E,ie,b,N,$)),(0,dt.P)(ie=>!!ie),Vt(ie=>{if(Kn(ie))return Yn(b,N,$)?(0,C.of)([]):(0,C.of)(null);throw ie}))}processSegmentAgainstRoute(E,m,b,N,$){if(m.redirectTo||!Xn(m,b,N,$))return(0,C.of)(null);let ie;if("**"===m.path){const oe=N.length>0?Yr(N).parameters:{},Xe=ya(b)+N.length,bt=new vs(N,oe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(m),Hr(m),m.component??m._loadedComponent??null,m,qa(b),Xe,Ai(m),Xe);ie=(0,C.of)({snapshot:bt,consumedSegments:[],remainingSegments:[]})}else ie=B(b,m,N,E).pipe((0,he.U)(({matched:oe,consumedSegments:Xe,remainingSegments:bt,parameters:Kt})=>{if(!oe)return null;const Ut=ya(b)+Xe.length;return{snapshot:new vs(Xe,Kt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(m),Hr(m),m.component??m._loadedComponent??null,m,qa(b),Ut,Ai(m),Ut),consumedSegments:Xe,remainingSegments:bt}}));return ie.pipe((0,Ne.w)(oe=>{if(null===oe)return(0,C.of)(null);const{snapshot:Xe,consumedSegments:bt,remainingSegments:Kt}=oe;E=m._injector??E;const Ut=m._loadedInjector??E,Vn=function qu(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(m),{segmentGroup:ki,slicedSegments:Gi}=G(b,bt,Kt,Vn.filter(ci=>void 0===ci.redirectTo),this.relativeLinkResolution);if(0===Gi.length&&ki.hasChildren())return this.processChildren(Ut,Vn,ki).pipe((0,he.U)(ci=>null===ci?null:[new Ni(Xe,ci)]));if(0===Vn.length&&0===Gi.length)return(0,C.of)([new Ni(Xe,[])]);const rs=Hr(m)===$;return this.processSegment(Ut,Vn,ki,Gi,rs?zt:$).pipe((0,he.U)(ci=>null===ci?null:[new Ni(Xe,ci)]))}))}}function Wa(_){const E=_.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function Xo(_){const E=[],m=new Set;for(const b of _){if(!Wa(b)){E.push(b);continue}const N=E.find($=>b.value.routeConfig===$.value.routeConfig);void 0!==N?(N.children.push(...b.children),m.add(N)):E.push(b)}for(const b of m){const N=Xo(b.children);E.push(new Ni(b.value,N))}return E.filter(b=>!m.has(b))}function qa(_){let E=_;for(;E._sourceSegment;)E=E._sourceSegment;return E}function ya(_){let E=_,m=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,m+=E._segmentIndexShift??0;return m-1}function va(_){return _.data||{}}function Ai(_){return _.resolve||{}}function wt(_){return"string"==typeof _.title||null===_.title}function kn(_){return(0,Ne.w)(E=>{const m=_(E);return m?(0,k.D)(m).pipe((0,he.U)(()=>E)):(0,C.of)(E)})}let vi=(()=>{class _{buildTitle(m){let b,N=m.root;for(;void 0!==N;)b=this.getResolvedTitleForRoute(N)??b,N=N.children.find($=>$.outlet===zt);return b}getResolvedTitleForRoute(m){return m.data[Hn]}}return _.\u0275fac=function(m){return new(m||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(ta)},providedIn:"root"}),_})(),ta=(()=>{class _ extends vi{constructor(m){super(),this.title=m}updateTitle(m){const b=this.buildTitle(m);void 0!==b&&this.title.setTitle(b)}}return _.\u0275fac=function(m){return new(m||_)(p.LFG(br.Dx))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class fn{}class Lt extends class pu{shouldDetach(E){return!1}store(E,m){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,m){return E.routeConfig===m.routeConfig}}{}const vt=new p.OlP("",{providedIn:"root",factory:()=>({})}),Ea=new p.OlP("ROUTES");let so=(()=>{class _{constructor(m,b){this.injector=m,this.compiler=b,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(m){if(this.componentLoaders.get(m))return this.componentLoaders.get(m);if(m._loadedComponent)return(0,C.of)(m._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(m);const b=ye(m.loadComponent()).pipe((0,at.b)($=>{this.onLoadEndListener&&this.onLoadEndListener(m),m._loadedComponent=$}),tr(()=>{this.componentLoaders.delete(m)})),N=new ee(b,()=>new ge.x).pipe(Me());return this.componentLoaders.set(m,N),N}loadChildren(m,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,C.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const $=this.loadModuleFactoryOrRoutes(b.loadChildren).pipe((0,he.U)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(b);let Xe,bt,Kt=!1;Array.isArray(oe)?bt=oe:(Xe=oe.create(m).injector,bt=_r(Xe.get(Ea,[],p.XFs.Self|p.XFs.Optional)));return{routes:bt.map(Ns),injector:Xe}}),tr(()=>{this.childrenLoaders.delete(b)})),ie=new ee($,()=>new ge.x).pipe(Me());return this.childrenLoaders.set(b,ie),ie}loadModuleFactoryOrRoutes(m){return ye(m()).pipe((0,Pe.z)(b=>b instanceof p.YKP||Array.isArray(b)?(0,C.of)(b):(0,k.D)(this.compiler.compileModuleAsync(b))))}}return _.\u0275fac=function(m){return new(m||_)(p.LFG(p.zs3),p.LFG(p.Sil))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class Na{}class gu{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,m){return E}}function Vo(_){throw _}function Ka(_,E,m){return E.parse("/")}const Ya={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Oa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Qa(){const _=(0,p.f3M)(Ct),E=(0,p.f3M)(Vr),m=(0,p.f3M)(Ie.Ye),b=(0,p.f3M)(p.zs3),N=(0,p.f3M)(p.Sil),$=(0,p.f3M)(Ea,{optional:!0})??[],ie=(0,p.f3M)(vt,{optional:!0})??{},oe=(0,p.f3M)(ta),Xe=(0,p.f3M)(vi,{optional:!0}),bt=(0,p.f3M)(Na,{optional:!0}),Kt=(0,p.f3M)(fn,{optional:!0}),Ut=new Jt(null,_,E,m,b,N,_r($));return bt&&(Ut.urlHandlingStrategy=bt),Kt&&(Ut.routeReuseStrategy=Kt),Ut.titleStrategy=Xe??oe,function Uo(_,E){_.errorHandler&&(E.errorHandler=_.errorHandler),_.malformedUriErrorHandler&&(E.malformedUriErrorHandler=_.malformedUriErrorHandler),_.onSameUrlNavigation&&(E.onSameUrlNavigation=_.onSameUrlNavigation),_.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=_.paramsInheritanceStrategy),_.relativeLinkResolution&&(E.relativeLinkResolution=_.relativeLinkResolution),_.urlUpdateStrategy&&(E.urlUpdateStrategy=_.urlUpdateStrategy),_.canceledNavigationResolution&&(E.canceledNavigationResolution=_.canceledNavigationResolution)}(ie,Ut),Ut}let Jt=(()=>{class _{constructor(m,b,N,$,ie,oe,Xe){this.rootComponentType=m,this.urlSerializer=b,this.rootContexts=N,this.location=$,this.config=Xe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ge.x,this.errorHandler=Vo,this.malformedUriErrorHandler=Ka,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,C.of)(void 0),this.urlHandlingStrategy=new gu,this.routeReuseStrategy=new Lt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ie.get(so),this.configLoader.onLoadEndListener=Vn=>this.triggerEvent(new St(Vn)),this.configLoader.onLoadStartListener=Vn=>this.triggerEvent(new ut(Vn)),this.ngModule=ie.get(p.h0i),this.console=ie.get(p.c2e);const Ut=ie.get(p.R0b);this.isNgZoneEnabled=Ut instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(Xe),this.currentUrlTree=function $e(){return new me(new Q([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Di(this.currentUrlTree,this.rootComponentType),this.transitions=new le({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(m){const b=this.events;return m.pipe((0,_t.h)(N=>0!==N.id),(0,he.U)(N=>({...N,extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,Ne.w)(N=>{let $=!1,ie=!1;return(0,C.of)(N).pipe((0,at.b)(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ne.w)(oe=>{const Xe=this.browserUrlTree.toString(),bt=!this.navigated||oe.extractedUrl.toString()!==Xe||Xe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||bt)&&this.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return Bo(oe.source)&&(this.browserUrlTree=oe.extractedUrl),(0,C.of)(oe).pipe((0,Ne.w)(Ut=>{const Vn=this.transitions.getValue();return b.next(new ji(Ut.id,this.serializeUrl(Ut.extractedUrl),Ut.source,Ut.restoredState)),Vn!==this.transitions.getValue()?Be.E:Promise.resolve(Ut)}),function Fs(_,E,m,b){return(0,Ne.w)(N=>function io(_,E,m,b,N){return new Ds(_,E,m,b,N).apply()}(_,E,m,N.extractedUrl,b).pipe((0,he.U)($=>({...N,urlAfterRedirects:$}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,at.b)(Ut=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ut.urlAfterRedirects},N.urlAfterRedirects=Ut.urlAfterRedirects}),function Ra(_,E,m,b,N,$){return(0,Pe.z)(ie=>function xa(_,E,m,b,N,$,ie="emptyOnly",oe="legacy"){return new Wu(_,E,m,b,N,ie,oe,$).recognize().pipe((0,Ne.w)(Xe=>null===Xe?function er(_){return new Y.y(E=>E.error(_))}(new Jo):(0,C.of)(Xe)))}(_,E,m,ie.urlAfterRedirects,b.serialize(ie.urlAfterRedirects),b,N,$).pipe((0,he.U)(oe=>({...ie,targetSnapshot:oe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,at.b)(Ut=>{if(N.targetSnapshot=Ut.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Ut.extras.skipLocationChange){const ki=this.urlHandlingStrategy.merge(Ut.urlAfterRedirects,Ut.rawUrl);this.setBrowserUrl(ki,Ut)}this.browserUrlTree=Ut.urlAfterRedirects}const Vn=new Hs(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot);b.next(Vn)}));if(bt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Vn,extractedUrl:ki,source:Gi,restoredState:rs,extras:ci}=oe,hs=new ji(Vn,this.serializeUrl(ki),Gi,rs);b.next(hs);const Do=Di(ki,this.rootComponentType).snapshot;return N={...oe,targetSnapshot:Do,urlAfterRedirects:ki,extras:{...ci,skipLocationChange:!1,replaceUrl:!1}},(0,C.of)(N)}return this.rawUrlTree=oe.rawUrl,oe.resolve(null),Be.E}),(0,at.b)(oe=>{const Xe=new Lr(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot);this.triggerEvent(Xe)}),(0,he.U)(oe=>N={...oe,guards:Zs(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function to(_,E){return(0,Pe.z)(m=>{const{targetSnapshot:b,currentSnapshot:N,guards:{canActivateChecks:$,canDeactivateChecks:ie}}=m;return 0===ie.length&&0===$.length?(0,C.of)({...m,guardsResult:!0}):function no(_,E,m,b){return(0,k.D)(_).pipe((0,Pe.z)(N=>function ls(_,E,m,b,N){const $=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,C.of)(!0);const ie=$.map(oe=>{const Xe=Xs(E)??N,bt=ws(oe,Xe);return ye(function z(_){return _&&eo(_.canDeactivate)}(bt)?bt.canDeactivate(_,E,m,b):Xe.runInContext(()=>bt(_,E,m,b))).pipe((0,dt.P)())});return(0,C.of)(ie).pipe(us())}(N.component,N.route,m,E,b)),(0,dt.P)(N=>!0!==N,!0))}(ie,b,N,_).pipe((0,Pe.z)(oe=>oe&&function vo(_){return"boolean"==typeof _}(oe)?function ro(_,E,m,b){return(0,k.D)(E).pipe((0,Se.b)(N=>(0,De.z)(function Fo(_,E){return null!==_&&E&&E(new Zt(_)),(0,C.of)(!0)}(N.route.parent,b),function pa(_,E){return null!==_&&E&&E(new ri(_)),(0,C.of)(!0)}(N.route,b),function Ko(_,E,m){const b=E[E.length-1],$=E.slice(0,E.length-1).reverse().map(ie=>function Dr(_){const E=_.routeConfig?_.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:_,guards:E}:null}(ie)).filter(ie=>null!==ie).map(ie=>Et(()=>{const oe=ie.guards.map(Xe=>{const bt=Xs(ie.node)??m,Kt=ws(Xe,bt);return ye(function A(_){return _&&eo(_.canActivateChild)}(Kt)?Kt.canActivateChild(b,_):bt.runInContext(()=>Kt(b,_))).pipe((0,dt.P)())});return(0,C.of)(oe).pipe(us())}));return(0,C.of)($).pipe(us())}(_,N.path,m),function Lo(_,E,m){const b=E.routeConfig?E.routeConfig.canActivate:null;if(!b||0===b.length)return(0,C.of)(!0);const N=b.map($=>Et(()=>{const ie=Xs(E)??m,oe=ws($,ie);return ye(function R(_){return _&&eo(_.canActivate)}(oe)?oe.canActivate(E,_):ie.runInContext(()=>oe(E,_))).pipe((0,dt.P)())}));return(0,C.of)(N).pipe(us())}(_,N.route,m))),(0,dt.P)(N=>!0!==N,!0))}(b,$,_,E):(0,C.of)(oe)),(0,he.U)(oe=>({...m,guardsResult:oe})))})}(this.ngModule.injector,oe=>this.triggerEvent(oe)),(0,at.b)(oe=>{if(N.guardsResult=oe.guardsResult,$r(oe.guardsResult))throw fa(0,oe.guardsResult);const Xe=new Ce(oe.id,this.serializeUrl(oe.extractedUrl),this.serializeUrl(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.triggerEvent(Xe)}),(0,_t.h)(oe=>!!oe.guardsResult||(this.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),kn(oe=>{if(oe.guards.canActivateChecks.length)return(0,C.of)(oe).pipe((0,at.b)(Xe=>{const bt=new xe(Xe.id,this.serializeUrl(Xe.extractedUrl),this.serializeUrl(Xe.urlAfterRedirects),Xe.targetSnapshot);this.triggerEvent(bt)}),(0,Ne.w)(Xe=>{let bt=!1;return(0,C.of)(Xe).pipe(function Wr(_,E){return(0,Pe.z)(m=>{const{targetSnapshot:b,guards:{canActivateChecks:N}}=m;if(!N.length)return(0,C.of)(m);let $=0;return(0,k.D)(N).pipe((0,Se.b)(ie=>function ts(_,E,m,b){const N=_.routeConfig,$=_._resolve;return void 0!==N?.title&&!wt(N)&&($[Hn]=N.title),function Ls(_,E,m,b){const N=function Ku(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===N.length)return(0,C.of)({});const $={};return(0,k.D)(N).pipe((0,Pe.z)(ie=>function _a(_,E,m,b){const N=Xs(E)??b,$=ws(_,N);return ye($.resolve?$.resolve(E,m):N.runInContext(()=>$(E,m)))}(_[ie],E,m,b).pipe((0,dt.P)(),(0,at.b)(oe=>{$[ie]=oe}))),Nt(1),function rr(_){return(0,he.U)(()=>_)}($),Vt(ie=>Kn(ie)?Be.E:Qe(ie)))}($,_,E,b).pipe((0,he.U)(ie=>(_._resolvedData=ie,_.data=Yi(_,m).resolve,N&&wt(N)&&(_.data[Hn]=N.title),null)))}(ie.route,b,_,E)),(0,at.b)(()=>$++),Nt(1),(0,Pe.z)(ie=>$===N.length?(0,C.of)(m):Be.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,at.b)({next:()=>bt=!0,complete:()=>{bt||(this.restoreHistory(Xe),this.cancelNavigationTransition(Xe,"",2))}}))}),(0,at.b)(Xe=>{const bt=new Fe(Xe.id,this.serializeUrl(Xe.extractedUrl),this.serializeUrl(Xe.urlAfterRedirects),Xe.targetSnapshot);this.triggerEvent(bt)}))}),kn(oe=>{const Xe=bt=>{const Kt=[];bt.routeConfig?.loadComponent&&!bt.routeConfig._loadedComponent&&Kt.push(this.configLoader.loadComponent(bt.routeConfig).pipe((0,at.b)(Ut=>{bt.component=Ut}),(0,he.U)(()=>{})));for(const Ut of bt.children)Kt.push(...Xe(Ut));return Kt};return Ve(Xe(oe.targetSnapshot.root)).pipe((0,tn.d)(),(0,lt.q)(1))}),kn(()=>this.afterPreactivation()),(0,he.U)(oe=>{const Xe=function pi(_,E,m){const b=Oi(_,E._root,m?m._root:void 0);return new fo(b,E)}(this.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return N={...oe,targetRouterState:Xe}}),(0,at.b)(oe=>{this.currentUrlTree=oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),this.routerState=oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,oe),this.browserUrlTree=oe.urlAfterRedirects)}),((_,E,m)=>(0,he.U)(b=>(new gt(E,b.targetRouterState,b.currentRouterState,m).activate(_),b)))(this.rootContexts,this.routeReuseStrategy,oe=>this.triggerEvent(oe)),(0,at.b)({next(){$=!0},complete(){$=!0}}),tr(()=>{$||ie||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),Vt(oe=>{if(ie=!0,Js(oe)){gi(oe)||(this.navigated=!0,this.restoreHistory(N,!0));const Xe=new $s(N.id,this.serializeUrl(N.extractedUrl),oe.message,oe.cancellationCode);if(b.next(Xe),gi(oe)){const bt=this.urlHandlingStrategy.merge(oe.url,this.rawUrlTree),Kt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Bo(N.source)};this.scheduleNavigation(bt,"imperative",null,Kt,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{this.restoreHistory(N,!0);const Xe=new ho(N.id,this.serializeUrl(N.extractedUrl),oe,N.targetSnapshot??void 0);b.next(Xe);try{N.resolve(this.errorHandler(oe))}catch(bt){N.reject(bt)}}return Be.E}))}))}resetRootComponentType(m){this.rootComponentType=m,this.routerState.root.component=this.rootComponentType}setTransition(m){this.transitions.next({...this.transitions.value,...m})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(m=>{const b="popstate"===m.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{const N={replaceUrl:!0},$=m.state?.navigationId?m.state:null;if($){const oe={...$};delete oe.navigationId,delete oe.\u0275routerPageId,0!==Object.keys(oe).length&&(N.state=oe)}const ie=this.parseUrl(m.url);this.scheduleNavigation(ie,b,$,N)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(m){this.events.next(m)}resetConfig(m){this.config=m.map(Ns),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(m,b={}){const{relativeTo:N,queryParams:$,fragment:ie,queryParamsHandling:oe,preserveFragment:Xe}=b,bt=N||this.routerState.root,Kt=Xe?this.currentUrlTree.fragment:ie;let Ut=null;switch(oe){case"merge":Ut={...this.currentUrlTree.queryParams,...$};break;case"preserve":Ut=this.currentUrlTree.queryParams;break;default:Ut=$||null}return null!==Ut&&(Ut=this.removeEmptyProps(Ut)),Mi(bt,this.currentUrlTree,m,Ut,Kt??null)}navigateByUrl(m,b={skipLocationChange:!1}){const N=$r(m)?m:this.parseUrl(m),$=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation($,"imperative",null,b)}navigate(m,b={skipLocationChange:!1}){return function Eo(_){for(let E=0;E<_.length;E++){if(null==_[E])throw new p.vHH(4008,false)}}(m),this.navigateByUrl(this.createUrlTree(m,b),b)}serializeUrl(m){return this.urlSerializer.serialize(m)}parseUrl(m){let b;try{b=this.urlSerializer.parse(m)}catch(N){b=this.malformedUriErrorHandler(N,this.urlSerializer,m)}return b}isActive(m,b){let N;if(N=!0===b?{...Ya}:!1===b?{...Oa}:b,$r(m))return Xt(this.currentUrlTree,m,N);const $=this.parseUrl(m);return Xt(this.currentUrlTree,$,N)}removeEmptyProps(m){return Object.keys(m).reduce((b,N)=>{const $=m[N];return null!=$&&(b[N]=$),b},{})}processNavigations(){this.navigations.subscribe(m=>{this.navigated=!0,this.lastSuccessfulId=m.id,this.currentPageId=m.targetPageId,this.events.next(new ms(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),m.resolve(!0)},m=>{this.console.warn(`Unhandled Navigation Error: ${m}`)})}scheduleNavigation(m,b,N,$,ie){if(this.disposed)return Promise.resolve(!1);let oe,Xe,bt;ie?(oe=ie.resolve,Xe=ie.reject,bt=ie.promise):bt=new Promise((Vn,ki)=>{oe=Vn,Xe=ki});const Kt=++this.navigationId;let Ut;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Ut=N&&N.\u0275routerPageId?N.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Ut=0,this.setTransition({id:Kt,targetPageId:Ut,source:b,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:m,extras:$,resolve:oe,reject:Xe,promise:bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),bt.catch(Vn=>Promise.reject(Vn))}setBrowserUrl(m,b){const N=this.urlSerializer.serialize(m),$={...b.extras.state,...this.generateNgRouterState(b.id,b.targetPageId)};this.location.isCurrentPathEqualTo(N)||b.extras.replaceUrl?this.location.replaceState(N,"",$):this.location.go(N,"",$)}restoreHistory(m,b=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-m.targetPageId;"popstate"!==m.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===N?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===N&&(this.resetState(m),this.browserUrlTree=m.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(N)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(m),this.resetUrlToCurrentUrlTree())}resetState(m){this.routerState=m.currentRouterState,this.currentUrlTree=m.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,m.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(m,b,N){const $=new $s(m.id,this.serializeUrl(m.extractedUrl),b,N);this.triggerEvent($),m.resolve(!1)}generateNgRouterState(m,b){return"computed"===this.canceledNavigationResolution?{navigationId:m,\u0275routerPageId:b}:{navigationId:m}}}return _.\u0275fac=function(m){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:function(){return Qa()},providedIn:"root"}),_})();function Bo(_){return"imperative"!==_}let lr=(()=>{class _{constructor(m,b,N,$,ie){this.router=m,this.route=b,this.tabIndexAttribute=N,this.renderer=$,this.el=ie,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ge.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(m){this._preserveFragment=(0,p.D6c)(m)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(m){this._skipLocationChange=(0,p.D6c)(m)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(m){this._replaceUrl=(0,p.D6c)(m)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(m){if(null!=this.tabIndexAttribute)return;const b=this.renderer,N=this.el.nativeElement;null!==m?b.setAttribute(N,"tabindex",m):b.removeAttribute(N,"tabindex")}ngOnChanges(m){this.onChanges.next(this)}set routerLink(m){null!=m?(this.commands=Array.isArray(m)?m:[m],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(m){return new(m||_)(p.Y36(Jt),p.Y36(oi),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},_.\u0275dir=p.lG2({type:_,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(m,b){1&m&&p.NdJ("click",function(){return b.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})(),an=(()=>{class _{constructor(m,b,N){this.router=m,this.route=b,this.locationStrategy=N,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ge.x,this.subscription=m.events.subscribe($=>{$ instanceof ms&&this.updateTargetUrlAndHref()})}set preserveFragment(m){this._preserveFragment=(0,p.D6c)(m)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(m){this._skipLocationChange=(0,p.D6c)(m)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(m){this._replaceUrl=(0,p.D6c)(m)}get replaceUrl(){return this._replaceUrl}set routerLink(m){this.commands=null!=m?Array.isArray(m)?m:[m]:null}ngOnChanges(m){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(m,b,N,$,ie){return!!(0!==m||b||N||$||ie||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(m){return new(m||_)(p.Y36(Jt),p.Y36(oi),p.Y36(Ie.S$))},_.\u0275dir=p.lG2({type:_,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(m,b){1&m&&p.NdJ("click",function($){return b.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&m&&p.uIk("target",b.target)("href",b.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})();class jo{}let oo=(()=>{class _{constructor(m,b,N,$,ie){this.router=m,this.injector=N,this.preloadingStrategy=$,this.loader=ie}setUpPreloading(){this.subscription=this.router.events.pipe((0,_t.h)(m=>m instanceof ms),(0,Se.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(m,b){const N=[];for(const $ of b){$.providers&&!$._injector&&($._injector=(0,p.MMx)($.providers,m,`Route: ${$.path}`));const ie=$._injector??m,oe=$._loadedInjector??ie;$.loadChildren&&!$._loadedRoutes&&void 0===$.canLoad||$.loadComponent&&!$._loadedComponent?N.push(this.preloadConfig(ie,$)):($.children||$._loadedRoutes)&&N.push(this.processRoutes(oe,$.children??$._loadedRoutes))}return(0,k.D)(N).pipe((0,In.J)())}preloadConfig(m,b){return this.preloadingStrategy.preload(b,()=>{let N;N=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(m,b):(0,C.of)(null);const $=N.pipe((0,Pe.z)(ie=>null===ie?(0,C.of)(void 0):(b._loadedRoutes=ie.routes,b._loadedInjector=ie.injector,this.processRoutes(ie.injector??m,ie.routes))));if(b.loadComponent&&!b._loadedComponent){const ie=this.loader.loadComponent(b);return(0,k.D)([$,ie]).pipe((0,In.J)())}return $})}}return _.\u0275fac=function(m){return new(m||_)(p.LFG(Jt),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(jo),p.LFG(so))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Vs=new p.OlP("");let Cs=(()=>{class _{constructor(m,b,N={}){this.router=m,this.viewportScroller=b,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(m=>{m instanceof ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=m.navigationTrigger,this.restoredId=m.restoredState?m.restoredState.navigationId:0):m instanceof ms&&(this.lastId=m.id,this.scheduleScrollEvent(m,this.router.parseUrl(m.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(m=>{m instanceof hi&&(m.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(m.position):m.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(m.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(m,b){this.router.triggerEvent(new hi(m,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return _.\u0275fac=function(m){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac}),_})();function ao(_,E){return{\u0275kind:_,\u0275providers:E}}function mu(_){return[{provide:Ea,multi:!0,useValue:_}]}function ns(){const _=(0,p.f3M)(p.zs3);return E=>{const m=_.get(p.z2F);if(E!==m.components[0])return;const b=_.get(Jt),N=_.get(Qu);1===_.get(na)&&b.initialNavigation(),_.get(We,null,p.XFs.Optional)?.setUpPreloading(),_.get(Vs,null,p.XFs.Optional)?.init(),b.resetRootComponentType(m.componentTypes[0]),N.next(),N.complete()}}const Qu=new p.OlP("",{factory:()=>new ge.x}),na=new p.OlP("",{providedIn:"root",factory:()=>1});const We=new p.OlP("");function wo(_){return ao(0,[{provide:We,useExisting:oo},{provide:jo,useExisting:_}])}const _i=new p.OlP("ROUTER_FORROOT_GUARD"),Ju=[Ie.Ye,{provide:Ct,useClass:Bt},{provide:Jt,useFactory:Qa},Vr,{provide:oi,useFactory:function El(_){return _.routerState.root},deps:[Jt]},so];function Us(){return new p.PXZ("Router",Jt)}let Io=(()=>{class _{constructor(m){}static forRoot(m,b){return{ngModule:_,providers:[Ju,[],mu(m),{provide:_i,useFactory:Pi,deps:[[Jt,new p.FiY,new p.tp0]]},{provide:vt,useValue:b||{}},b?.useHash?{provide:Ie.S$,useClass:Ie.Do}:{provide:Ie.S$,useClass:Ie.b0},{provide:Vs,useFactory:()=>{const _=(0,p.f3M)(Jt),E=(0,p.f3M)(Ie.EM),m=(0,p.f3M)(vt);return m.scrollOffset&&E.setOffset(m.scrollOffset),new Cs(_,E,m)}},b?.preloadingStrategy?wo(b.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Us},b?.initialNavigation?ia(b):[],[{provide:Ws,useFactory:ns},{provide:p.tb,multi:!0,useExisting:Ws}]]}}static forChild(m){return{ngModule:_,providers:[mu(m)]}}}return _.\u0275fac=function(m){return new(m||_)(p.LFG(_i,8))},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[zs]}),_})();function Pi(_){return"guarded"}function ia(_){return["disabled"===_.initialNavigation?ao(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const E=(0,p.f3M)(Jt);return()=>{E.setUpLocationChangeListener()}}},{provide:na,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?ao(2,[{provide:na,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:E=>{const m=E.get(Ie.V_,Promise.resolve());let b=!1;return()=>m.then(()=>new Promise($=>{const ie=E.get(Jt),oe=E.get(Qu);(function N($){E.get(Jt).events.pipe((0,_t.h)(oe=>oe instanceof ms||oe instanceof $s||oe instanceof ho),(0,he.U)(oe=>oe instanceof ms||oe instanceof $s&&(0===oe.code||1===oe.code)&&null),(0,_t.h)(oe=>null!==oe),(0,lt.q)(1)).subscribe(()=>{$()})})(()=>{$(!0),b=!0}),ie.afterPreactivation=()=>($(!0),b||oe.closed?(0,C.of)(void 0):oe),ie.initialNavigation()}))}}]).\u0275providers:[]]}const Ws=new p.OlP("")},3942:(Rt,ke,L)=>{L.d(ke,{Z:()=>Ve});var p=L(2090),k=L(4859),C=L(9681),ge=L(1877);class le{constructor(ze,De){this._delegate=ze,this.firebase=De,(0,C._addComponent)(ze,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,C.deleteApp)(this._delegate)))}_getService(ze,De=C._DEFAULT_ENTRY_NAME){var Dt;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(ze);return!Et.isInitialized()&&"EXPLICIT"===(null===(Dt=Et.getComponent())||void 0===Dt?void 0:Dt.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:De})}_removeServiceInstance(ze,De=C._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(De)}_addComponent(ze){(0,C._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,C._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Y=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function be(){const Tt=function Ae(Tt){const ze={},De={__esModule:!0,initializeApp:function ce(Ge,X={}){const Me=C.initializeApp(Ge,X);if((0,p.r3)(ze,Me.name))return ze[Me.name];const ee=new Tt(Me,De);return ze[Me.name]=ee,ee},app:Et,registerVersion:C.registerVersion,setLogLevel:C.setLogLevel,onLog:C.onLog,apps:null,SDK_VERSION:C.SDK_VERSION,INTERNAL:{registerComponent:function Qe(Ge){const X=Ge.name,Me=X.replace("-compat","");if(C._registerComponent(Ge)&&"PUBLIC"===Ge.type){const ee=(Ie=Et())=>{if("function"!=typeof Ie[Me])throw Y.create("invalid-app-argument",{appName:X});return Ie[Me]()};void 0!==Ge.serviceProps&&(0,p.ZB)(ee,Ge.serviceProps),De[Me]=ee,Tt.prototype[Me]=function(...Ie){return this._getService.bind(this,X).apply(this,Ge.multipleInstances?Ie:[])}}return"PUBLIC"===Ge.type?De[Me]:null},removeApp:function Dt(Ge){delete ze[Ge]},useAsService:function Be(Ge,X){return"serverAuth"===X?null:X},modularAPIs:C}};function Et(Ge){if(!(0,p.r3)(ze,Ge=Ge||C._DEFAULT_ENTRY_NAME))throw Y.create("no-app",{appName:Ge});return ze[Ge]}return De.default=De,Object.defineProperty(De,"apps",{get:function Je(){return Object.keys(ze).map(Ge=>ze[Ge])}}),Et.App=Tt,De}(le);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function ze(De){(0,p.ZB)(Tt,De)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Tt}(),ne=new ge.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=K;!function et(Tt){(0,C.registerVersion)("@firebase/app-compat","0.1.34",Tt)}()},9681:(Rt,ke,L)=>{L.r(ke),L.d(ke,{FirebaseError:()=>ge.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>dt,_addComponent:()=>Ht,_addOrOverwriteComponent:()=>Nt,_apps:()=>at,_clearComponents:()=>Kr,_components:()=>Vt,_getProvider:()=>tn,_registerComponent:()=>yn,_removeServiceInstance:()=>Tn,deleteApp:()=>zn,getApp:()=>Hn,getApps:()=>or,initializeApp:()=>zt,onLog:()=>gn,registerVersion:()=>Un,setLogLevel:()=>Gn});var p=L(5861),k=L(4859),C=L(1877),ge=L(2090),le=L(8766);class we{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(fe=>{if(function Y(ue){return"VERSION"===ue.getComponent()?.type}(fe)){const ot=fe.getImmediate();return`${ot.library}/${ot.version}`}return null}).filter(fe=>fe).join(" ")}}const Ae="@firebase/app",K=new C.Yd("@firebase/app"),dt="[DEFAULT]",Se={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},at=new Map,Vt=new Map;function Ht(ue,Ee){try{ue.container.addComponent(Ee)}catch(fe){K.debug(`Component ${Ee.name} failed to register with FirebaseApp ${ue.name}`,fe)}}function Nt(ue,Ee){ue.container.addOrOverwriteComponent(Ee)}function yn(ue){const Ee=ue.name;if(Vt.has(Ee))return K.debug(`There were multiple attempts to register component ${Ee}.`),!1;Vt.set(Ee,ue);for(const fe of at.values())Ht(fe,ue);return!0}function tn(ue,Ee){const fe=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return fe&&fe.triggerHeartbeat(),ue.container.getProvider(Ee)}function Tn(ue,Ee,fe=dt){tn(ue,Ee).clearInstance(fe)}function Kr(){Vt.clear()}const tr=new ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(Ee,fe,ot){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},fe),this._name=fe.name,this._automaticDataCollectionEnabled=fe.automaticDataCollectionEnabled,this._container=ot,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}const br="9.10.0";function zt(ue,Ee={}){"object"!=typeof Ee&&(Ee={name:Ee});const fe=Object.assign({name:dt,automaticDataCollectionEnabled:!1},Ee),ot=fe.name;if("string"!=typeof ot||!ot)throw tr.create("bad-app-name",{appName:String(ot)});const Ct=at.get(ot);if(Ct){if((0,ge.vZ)(ue,Ct.options)&&(0,ge.vZ)(fe,Ct.config))return Ct;throw tr.create("duplicate-app",{appName:ot})}const Bt=new k.H0(ot);for(const _n of Vt.values())Bt.addComponent(_n);const $n=new In(ue,fe,Bt);return at.set(ot,$n),$n}function Hn(ue=dt){const Ee=at.get(ue);if(!Ee)throw tr.create("no-app",{appName:ue});return Ee}function or(){return Array.from(at.values())}function zn(ue){return mt.apply(this,arguments)}function mt(){return(mt=(0,p.Z)(function*(ue){const Ee=ue.name;at.has(Ee)&&(at.delete(Ee),yield Promise.all(ue.container.getProviders().map(fe=>fe.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function Un(ue,Ee,fe){var ot;let Ct=null!==(ot=Se[ue])&&void 0!==ot?ot:ue;fe&&(Ct+=`-${fe}`);const Bt=Ct.match(/\s|\//),$n=Ee.match(/\s|\//);if(Bt||$n){const _n=[`Unable to register library "${Ct}" with version "${Ee}":`];return Bt&&_n.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Bt&&$n&&_n.push("and"),$n&&_n.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void K.warn(_n.join(" "))}yn(new k.wA(`${Ct}-version`,()=>({library:Ct,version:Ee}),"VERSION"))}function gn(ue,Ee){if(null!==ue&&"function"!=typeof ue)throw tr.create("invalid-log-argument");(0,C.Am)(ue,Ee)}function Gn(ue){(0,C.Ub)(ue)}const fr="firebase-heartbeat-store";let Ze=null;function ye(){return Ze||(Ze=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(ue,Ee)=>{0===Ee&&ue.createObjectStore(fr)}}).catch(ue=>{throw tr.create("idb-open",{originalErrorMessage:ue.message})})),Ze}function $e(){return($e=(0,p.Z)(function*(ue){var Ee;try{return(yield ye()).transaction(fr).objectStore(fr).get(Xt(ue))}catch(fe){if(fe instanceof ge.ZR)K.warn(fe.message);else{const ot=tr.create("idb-get",{originalErrorMessage:null===(Ee=fe)||void 0===Ee?void 0:Ee.message});K.warn(ot.message)}}})).apply(this,arguments)}function it(ue,Ee){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(ue,Ee){var fe;try{const Ct=(yield ye()).transaction(fr,"readwrite");return yield Ct.objectStore(fr).put(Ee,Xt(ue)),Ct.done}catch(ot){if(ot instanceof ge.ZR)K.warn(ot.message);else{const Ct=tr.create("idb-set",{originalErrorMessage:null===(fe=ot)||void 0===fe?void 0:fe.message});K.warn(Ct.message)}}})).apply(this,arguments)}function Xt(ue){return`${ue.name}!${ue.options.appId}`}class Zn{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const fe=this.container.getProvider("app").getImmediate();this._storage=new nn(fe),this._heartbeatsCachePromise=this._storage.read().then(ot=>(this._heartbeatsCache=ot,ot))}triggerHeartbeat(){var Ee=this;return(0,p.Z)(function*(){const ot=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=vn();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!Ee._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Ct))return Ee._heartbeatsCache.heartbeats.push({date:Ct,agent:ot}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Bt=>{const $n=new Date(Bt.date).valueOf();return Date.now()-$n<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,p.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const fe=vn(),{heartbeatsToSend:ot,unsentEntries:Ct}=function Tr(ue,Ee=1024){const fe=[];let ot=ue.slice();for(const Ct of ue){const Bt=fe.find($n=>$n.agent===Ct.agent);if(Bt){if(Bt.dates.push(Ct.date),me(fe)>Ee){Bt.dates.pop();break}}else if(fe.push({agent:Ct.agent,dates:[Ct.date]}),me(fe)>Ee){fe.pop();break}ot=ot.slice(1)}return{heartbeatsToSend:fe,unsentEntries:ot}}(Ee._heartbeatsCache.heartbeats),Bt=(0,ge.L)(JSON.stringify({version:2,heartbeats:ot}));return Ee._heartbeatsCache.lastSentHeartbeatDate=fe,Ct.length>0?(Ee._heartbeatsCache.heartbeats=Ct,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),Bt})()}}function vn(){return(new Date).toISOString().substring(0,10)}class nn{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ge.hl)()&&(0,ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,p.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function ae(ue){return $e.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var fe=this;return(0,p.Z)(function*(){var ot;if(yield fe._canUseIndexedDBPromise){const Bt=yield fe.read();return it(fe.app,{lastSentHeartbeatDate:null!==(ot=Ee.lastSentHeartbeatDate)&&void 0!==ot?ot:Bt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var fe=this;return(0,p.Z)(function*(){var ot;if(yield fe._canUseIndexedDBPromise){const Bt=yield fe.read();return it(fe.app,{lastSentHeartbeatDate:null!==(ot=Ee.lastSentHeartbeatDate)&&void 0!==ot?ot:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...Ee.heartbeats]})}})()}}function me(ue){return(0,ge.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function Q(ue){yn(new k.wA("platform-logger",Ee=>new we(Ee),"PRIVATE")),yn(new k.wA("heartbeat",Ee=>new Zn(Ee),"PRIVATE")),Un(Ae,"0.7.33",ue),Un(Ae,"0.7.33","esm2017"),Un("fire-js","")}("")},4859:(Rt,ke,L)=>{L.d(ke,{H0:()=>Ae,wA:()=>C});var p=L(5861),k=L(2090);class C{constructor(K,ne,re){this.name=K,this.instanceFactory=ne,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ge="[DEFAULT]";class le{constructor(K,ne){this.name=K,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const ne=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(ne)){const re=new k.BH;if(this.instancesDeferred.set(ne,re),this.isInitialized(ne)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:ne});nt&&re.resolve(nt)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(K){var ne;const re=this.normalizeInstanceIdentifier(K?.identifier),nt=null!==(ne=K?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(et){if(nt)return null;throw et}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Y(be){return"EAGER"===be.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ge})}catch{}for(const[ne,re]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(ne);try{const et=this.getOrInitializeService({instanceIdentifier:nt});re.resolve(et)}catch{}}}}clearInstance(K=ge){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,p.Z)(function*(){const ne=Array.from(K.instances.values());yield Promise.all([...ne.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...ne.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ge){return this.instances.has(K)}getOptions(K=ge){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:ne={}}=K,re=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:re,options:ne});for(const[et,Ve]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(et)&&Ve.resolve(nt);return nt}onInit(K,ne){var re;const nt=this.normalizeInstanceIdentifier(ne),et=null!==(re=this.onInitCallbacks.get(nt))&&void 0!==re?re:new Set;et.add(K),this.onInitCallbacks.set(nt,et);const Ve=this.instances.get(nt);return Ve&&K(Ve,nt),()=>{et.delete(K)}}invokeOnInitCallbacks(K,ne){const re=this.onInitCallbacks.get(ne);if(re)for(const nt of re)try{nt(K,ne)}catch{}}getOrInitializeService({instanceIdentifier:K,options:ne={}}){let re=this.instances.get(K);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(be=K,be===ge?void 0:be),options:ne}),this.instances.set(K,re),this.instancesOptions.set(K,ne),this.invokeOnInitCallbacks(re,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,re)}catch{}var be;return re||null}normalizeInstanceIdentifier(K=ge){return this.component?this.component.multipleInstances?K:ge:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const ne=this.getProvider(K.name);if(ne.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);ne.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const ne=new le(K,this);return this.providers.set(K,ne),ne}getProviders(){return Array.from(this.providers.values())}}},1877:(Rt,ke,L)=>{L.d(ke,{Am:()=>be,Ub:()=>Ae,Yd:()=>Y,in:()=>k});const p=[];var k=(()=>{return(K=k||(k={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",k;var K})();const C={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},ge=k.INFO,le={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},we=(K,ne,...re)=>{if(ne<K.logLevel)return;const nt=(new Date).toISOString(),et=le[ne];if(!et)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[et](`[${nt}]  ${K.name}:`,...re)};class Y{constructor(ne){this.name=ne,this._logLevel=ge,this._logHandler=we,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in k))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?C[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...ne),this._logHandler(this,k.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...ne),this._logHandler(this,k.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,k.INFO,...ne),this._logHandler(this,k.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,k.WARN,...ne),this._logHandler(this,k.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...ne),this._logHandler(this,k.ERROR,...ne)}}function Ae(K){p.forEach(ne=>{ne.setLogLevel(K)})}function be(K,ne){for(const re of p){let nt=null;ne&&ne.level&&(nt=C[ne.level]),re.userLogHandler=null===K?null:(et,Ve,...Tt)=>{const ze=Tt.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");Ve>=(nt??et.logLevel)&&K({level:k[Ve].toLowerCase(),message:ze,args:Tt,type:et.name})}}}},8766:(Rt,ke,L)=>{L.d(ke,{Lj:()=>ce,X3:()=>Et});var p=L(5861);let C,ge;const Y=new WeakMap,Ae=new WeakMap,be=new WeakMap,K=new WeakMap,ne=new WeakMap;let et={get(X,Me,ee){if(X instanceof IDBTransaction){if("done"===Me)return Ae.get(X);if("objectStoreNames"===Me)return X.objectStoreNames||be.get(X);if("store"===Me)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return De(X[Me])},set:(X,Me,ee)=>(X[Me]=ee,!0),has:(X,Me)=>X instanceof IDBTransaction&&("done"===Me||"store"===Me)||Me in X};function ze(X){return"function"==typeof X?function Tt(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...Me){return X.apply(Dt(this),Me),De(Y.get(this))}:function(...Me){return De(X.apply(Dt(this),Me))}:function(Me,...ee){const Ie=X.call(Dt(this),Me,...ee);return be.set(Ie,Me.sort?Me.sort():[Me]),De(Ie)}}(X):(X instanceof IDBTransaction&&function nt(X){if(Ae.has(X))return;const Me=new Promise((ee,Ie)=>{const he=()=>{X.removeEventListener("complete",Ne),X.removeEventListener("error",lt),X.removeEventListener("abort",lt)},Ne=()=>{ee(),he()},lt=()=>{Ie(X.error||new DOMException("AbortError","AbortError")),he()};X.addEventListener("complete",Ne),X.addEventListener("error",lt),X.addEventListener("abort",lt)});Ae.set(X,Me)}(X),((X,Me)=>Me.some(ee=>X instanceof ee))(X,function le(){return C||(C=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,et):X)}function De(X){if(X instanceof IDBRequest)return function re(X){const Me=new Promise((ee,Ie)=>{const he=()=>{X.removeEventListener("success",Ne),X.removeEventListener("error",lt)},Ne=()=>{ee(De(X.result)),he()},lt=()=>{Ie(X.error),he()};X.addEventListener("success",Ne),X.addEventListener("error",lt)});return Me.then(ee=>{ee instanceof IDBCursor&&Y.set(ee,X)}).catch(()=>{}),ne.set(Me,X),Me}(X);if(K.has(X))return K.get(X);const Me=ze(X);return Me!==X&&(K.set(X,Me),ne.set(Me,X)),Me}const Dt=X=>ne.get(X);function Et(X,Me,{blocked:ee,upgrade:Ie,blocking:he,terminated:Ne}={}){const lt=indexedDB.open(X,Me),pt=De(lt);return Ie&&lt.addEventListener("upgradeneeded",_t=>{Ie(De(lt.result),_t.oldVersion,_t.newVersion,De(lt.transaction))}),ee&&lt.addEventListener("blocked",()=>ee()),pt.then(_t=>{Ne&&_t.addEventListener("close",()=>Ne()),he&&_t.addEventListener("versionchange",()=>he())}).catch(()=>{}),pt}function ce(X,{blocked:Me}={}){const ee=indexedDB.deleteDatabase(X);return Me&&ee.addEventListener("blocked",()=>Me()),De(ee).then(()=>{})}const Je=["get","getKey","getAll","getAllKeys","count"],Qe=["put","add","delete","clear"],Be=new Map;function Ge(X,Me){if(!(X instanceof IDBDatabase)||Me in X||"string"!=typeof Me)return;if(Be.get(Me))return Be.get(Me);const ee=Me.replace(/FromIndex$/,""),Ie=Me!==ee,he=Qe.includes(ee);if(!(ee in(Ie?IDBIndex:IDBObjectStore).prototype)||!he&&!Je.includes(ee))return;const Ne=function(){var lt=(0,p.Z)(function*(pt,..._t){const Pe=this.transaction(pt,he?"readwrite":"readonly");let dt=Pe.store;return Ie&&(dt=dt.index(_t.shift())),(yield Promise.all([dt[ee](..._t),he&&Pe.done]))[0]});return function(_t){return lt.apply(this,arguments)}}();return Be.set(Me,Ne),Ne}!function Ve(X){et=X(et)}(X=>({...X,get:(Me,ee,Ie)=>Ge(Me,ee)||X.get(Me,ee,Ie),has:(Me,ee)=>!!Ge(Me,ee)||X.has(Me,ee)}))},5861:(Rt,ke,L)=>{function p(C,ge,le,we,Y,Ae,be){try{var K=C[Ae](be),ne=K.value}catch(re){return void le(re)}K.done?ge(ne):Promise.resolve(ne).then(we,Y)}function k(C){return function(){var ge=this,le=arguments;return new Promise(function(we,Y){var Ae=C.apply(ge,le);function be(ne){p(Ae,we,Y,be,K,"next",ne)}function K(ne){p(Ae,we,Y,be,K,"throw",ne)}be(void 0)})}}L.d(ke,{Z:()=>k})}},Rt=>{Rt(Rt.s=5806)}]);